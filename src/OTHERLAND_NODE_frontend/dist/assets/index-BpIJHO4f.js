(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xa={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(Ar,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var f=n[s]={exports:{},id:s,loaded:!1};return r[s].call(f.exports,f,f.exports,i),f.loaded=!0,f.exports}return i.m=r,i.c=n,i.p="",i(0)}([function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(1),f=i(3),c=i(8),m=i(15);function A(l,a,o){var d=null,x=function(W,ae){o&&o(W,ae),d&&d.visit(W,ae)},v=typeof o=="function"?x:null,k=!1;if(a){k=typeof a.comment=="boolean"&&a.comment;var N=typeof a.attachComment=="boolean"&&a.attachComment;(k||N)&&(d=new s.CommentHandler,d.attach=N,a.comment=!0,v=x)}var M=!1;a&&typeof a.sourceType=="string"&&(M=a.sourceType==="module");var P;a&&typeof a.jsx=="boolean"&&a.jsx?P=new f.JSXParser(l,a,v):P=new c.Parser(l,a,v);var j=M?P.parseModule():P.parseScript(),K=j;return k&&d&&(K.comments=d.comments),P.config.tokens&&(K.tokens=P.tokens),P.config.tolerant&&(K.errors=P.errorHandler.errors),K}n.parse=A;function B(l,a,o){var d=a||{};return d.sourceType="module",A(l,d,o)}n.parseModule=B;function D(l,a,o){var d=a||{};return d.sourceType="script",A(l,d,o)}n.parseScript=D;function g(l,a,o){var d=new m.Tokenizer(l,a),x;x=[];try{for(;;){var v=d.getNextToken();if(!v)break;o&&(v=o(v)),x.push(v)}}catch(k){d.errorHandler.tolerate(k)}return d.errorHandler.tolerant&&(x.errors=d.errors()),x}n.tokenize=g;var E=i(2);n.Syntax=E.Syntax,n.version="4.0.1"},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(2),f=function(){function c(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return c.prototype.insertInnerComments=function(m,A){if(m.type===s.Syntax.BlockStatement&&m.body.length===0){for(var B=[],D=this.leading.length-1;D>=0;--D){var g=this.leading[D];A.end.offset>=g.start&&(B.unshift(g.comment),this.leading.splice(D,1),this.trailing.splice(D,1))}B.length&&(m.innerComments=B)}},c.prototype.findTrailingComments=function(m){var A=[];if(this.trailing.length>0){for(var B=this.trailing.length-1;B>=0;--B){var D=this.trailing[B];D.start>=m.end.offset&&A.unshift(D.comment)}return this.trailing.length=0,A}var g=this.stack[this.stack.length-1];if(g&&g.node.trailingComments){var E=g.node.trailingComments[0];E&&E.range[0]>=m.end.offset&&(A=g.node.trailingComments,delete g.node.trailingComments)}return A},c.prototype.findLeadingComments=function(m){for(var A=[],B;this.stack.length>0;){var D=this.stack[this.stack.length-1];if(D&&D.start>=m.start.offset)B=D.node,this.stack.pop();else break}if(B){for(var g=B.leadingComments?B.leadingComments.length:0,E=g-1;E>=0;--E){var l=B.leadingComments[E];l.range[1]<=m.start.offset&&(A.unshift(l),B.leadingComments.splice(E,1))}return B.leadingComments&&B.leadingComments.length===0&&delete B.leadingComments,A}for(var E=this.leading.length-1;E>=0;--E){var D=this.leading[E];D.start<=m.start.offset&&(A.unshift(D.comment),this.leading.splice(E,1))}return A},c.prototype.visitNode=function(m,A){if(!(m.type===s.Syntax.Program&&m.body.length>0)){this.insertInnerComments(m,A);var B=this.findTrailingComments(A),D=this.findLeadingComments(A);D.length>0&&(m.leadingComments=D),B.length>0&&(m.trailingComments=B),this.stack.push({node:m,start:A.start.offset})}},c.prototype.visitComment=function(m,A){var B=m.type[0]==="L"?"Line":"Block",D={type:B,value:m.value};if(m.range&&(D.range=m.range),m.loc&&(D.loc=m.loc),this.comments.push(D),this.attach){var g={comment:{type:B,value:m.value,range:[A.start.offset,A.end.offset]},start:A.start.offset};m.loc&&(g.comment.loc=m.loc),m.type=B,this.leading.push(g),this.trailing.push(g)}},c.prototype.visit=function(m,A){m.type==="LineComment"?this.visitComment(m,A):m.type==="BlockComment"?this.visitComment(m,A):this.attach&&this.visitNode(m,A)},c}();n.CommentHandler=f},function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(r,n,i){var s=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var x in d)d.hasOwnProperty(x)&&(o[x]=d[x])};return function(o,d){a(o,d);function x(){this.constructor=o}o.prototype=d===null?Object.create(d):(x.prototype=d.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var f=i(4),c=i(5),m=i(6),A=i(7),B=i(8),D=i(13),g=i(14);D.TokenName[100]="JSXIdentifier",D.TokenName[101]="JSXText";function E(a){var o;switch(a.type){case m.JSXSyntax.JSXIdentifier:var d=a;o=d.name;break;case m.JSXSyntax.JSXNamespacedName:var x=a;o=E(x.namespace)+":"+E(x.name);break;case m.JSXSyntax.JSXMemberExpression:var v=a;o=E(v.object)+"."+E(v.property);break}return o}var l=function(a){s(o,a);function o(d,x,v){return a.call(this,d,x,v)||this}return o.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():a.prototype.parsePrimaryExpression.call(this)},o.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},o.prototype.finishJSX=function(){this.nextToken()},o.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},o.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},o.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},o.prototype.scanXHTMLEntity=function(d){for(var x="&",v=!0,k=!1,N=!1,M=!1;!this.scanner.eof()&&v&&!k;){var P=this.scanner.source[this.scanner.index];if(P===d)break;if(k=P===";",x+=P,++this.scanner.index,!k)switch(x.length){case 2:N=P==="#";break;case 3:N&&(M=P==="x",v=M||f.Character.isDecimalDigit(P.charCodeAt(0)),N=N&&!M);break;default:v=v&&!(N&&!f.Character.isDecimalDigit(P.charCodeAt(0))),v=v&&!(M&&!f.Character.isHexDigit(P.charCodeAt(0)));break}}if(v&&k&&x.length>2){var j=x.substr(1,x.length-2);N&&j.length>1?x=String.fromCharCode(parseInt(j.substr(1),10)):M&&j.length>2?x=String.fromCharCode(parseInt("0"+j.substr(1),16)):!N&&!M&&g.XHTMLEntities[j]&&(x=g.XHTMLEntities[j])}return x},o.prototype.lexJSX=function(){var d=this.scanner.source.charCodeAt(this.scanner.index);if(d===60||d===62||d===47||d===58||d===61||d===123||d===125){var x=this.scanner.source[this.scanner.index++];return{type:7,value:x,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(d===34||d===39){for(var v=this.scanner.index,k=this.scanner.source[this.scanner.index++],N="";!this.scanner.eof();){var M=this.scanner.source[this.scanner.index++];if(M===k)break;M==="&"?N+=this.scanXHTMLEntity(k):N+=M}return{type:8,value:N,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:v,end:this.scanner.index}}if(d===46){var P=this.scanner.source.charCodeAt(this.scanner.index+1),j=this.scanner.source.charCodeAt(this.scanner.index+2),x=P===46&&j===46?"...":".",v=this.scanner.index;return this.scanner.index+=x.length,{type:7,value:x,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:v,end:this.scanner.index}}if(d===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(f.Character.isIdentifierStart(d)&&d!==92){var v=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var M=this.scanner.source.charCodeAt(this.scanner.index);if(f.Character.isIdentifierPart(M)&&M!==92)++this.scanner.index;else if(M===45)++this.scanner.index;else break}var K=this.scanner.source.slice(v,this.scanner.index);return{type:100,value:K,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:v,end:this.scanner.index}}return this.scanner.lex()},o.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var d=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(d)),d},o.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var d=this.scanner.index,x="";!this.scanner.eof();){var v=this.scanner.source[this.scanner.index];if(v==="{"||v==="<")break;++this.scanner.index,x+=v,f.Character.isLineTerminator(v.charCodeAt(0))&&(++this.scanner.lineNumber,v==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var k={type:101,value:x,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:d,end:this.scanner.index};return x.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(k)),k},o.prototype.peekJSXToken=function(){var d=this.scanner.saveState();this.scanner.scanComments();var x=this.lexJSX();return this.scanner.restoreState(d),x},o.prototype.expectJSX=function(d){var x=this.nextJSXToken();(x.type!==7||x.value!==d)&&this.throwUnexpectedToken(x)},o.prototype.matchJSX=function(d){var x=this.peekJSXToken();return x.type===7&&x.value===d},o.prototype.parseJSXIdentifier=function(){var d=this.createJSXNode(),x=this.nextJSXToken();return x.type!==100&&this.throwUnexpectedToken(x),this.finalize(d,new c.JSXIdentifier(x.value))},o.prototype.parseJSXElementName=function(){var d=this.createJSXNode(),x=this.parseJSXIdentifier();if(this.matchJSX(":")){var v=x;this.expectJSX(":");var k=this.parseJSXIdentifier();x=this.finalize(d,new c.JSXNamespacedName(v,k))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var N=x;this.expectJSX(".");var M=this.parseJSXIdentifier();x=this.finalize(d,new c.JSXMemberExpression(N,M))}return x},o.prototype.parseJSXAttributeName=function(){var d=this.createJSXNode(),x,v=this.parseJSXIdentifier();if(this.matchJSX(":")){var k=v;this.expectJSX(":");var N=this.parseJSXIdentifier();x=this.finalize(d,new c.JSXNamespacedName(k,N))}else x=v;return x},o.prototype.parseJSXStringLiteralAttribute=function(){var d=this.createJSXNode(),x=this.nextJSXToken();x.type!==8&&this.throwUnexpectedToken(x);var v=this.getTokenRaw(x);return this.finalize(d,new A.Literal(x.value,v))},o.prototype.parseJSXExpressionAttribute=function(){var d=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var x=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(d,new c.JSXExpressionContainer(x))},o.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},o.prototype.parseJSXNameValueAttribute=function(){var d=this.createJSXNode(),x=this.parseJSXAttributeName(),v=null;return this.matchJSX("=")&&(this.expectJSX("="),v=this.parseJSXAttributeValue()),this.finalize(d,new c.JSXAttribute(x,v))},o.prototype.parseJSXSpreadAttribute=function(){var d=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var x=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(d,new c.JSXSpreadAttribute(x))},o.prototype.parseJSXAttributes=function(){for(var d=[];!this.matchJSX("/")&&!this.matchJSX(">");){var x=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();d.push(x)}return d},o.prototype.parseJSXOpeningElement=function(){var d=this.createJSXNode();this.expectJSX("<");var x=this.parseJSXElementName(),v=this.parseJSXAttributes(),k=this.matchJSX("/");return k&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(d,new c.JSXOpeningElement(x,k,v))},o.prototype.parseJSXBoundaryElement=function(){var d=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var x=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(d,new c.JSXClosingElement(x))}var v=this.parseJSXElementName(),k=this.parseJSXAttributes(),N=this.matchJSX("/");return N&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(d,new c.JSXOpeningElement(v,N,k))},o.prototype.parseJSXEmptyExpression=function(){var d=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(d,new c.JSXEmptyExpression)},o.prototype.parseJSXExpressionContainer=function(){var d=this.createJSXNode();this.expectJSX("{");var x;return this.matchJSX("}")?(x=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),x=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(d,new c.JSXExpressionContainer(x))},o.prototype.parseJSXChildren=function(){for(var d=[];!this.scanner.eof();){var x=this.createJSXChildNode(),v=this.nextJSXText();if(v.start<v.end){var k=this.getTokenRaw(v),N=this.finalize(x,new c.JSXText(v.value,k));d.push(N)}if(this.scanner.source[this.scanner.index]==="{"){var M=this.parseJSXExpressionContainer();d.push(M)}else break}return d},o.prototype.parseComplexJSXElement=function(d){for(var x=[];!this.scanner.eof();){d.children=d.children.concat(this.parseJSXChildren());var v=this.createJSXChildNode(),k=this.parseJSXBoundaryElement();if(k.type===m.JSXSyntax.JSXOpeningElement){var N=k;if(N.selfClosing){var M=this.finalize(v,new c.JSXElement(N,[],null));d.children.push(M)}else x.push(d),d={node:v,opening:N,closing:null,children:[]}}if(k.type===m.JSXSyntax.JSXClosingElement){d.closing=k;var P=E(d.opening.name),j=E(d.closing.name);if(P!==j&&this.tolerateError("Expected corresponding JSX closing tag for %0",P),x.length>0){var M=this.finalize(d.node,new c.JSXElement(d.opening,d.children,d.closing));d=x[x.length-1],d.children.push(M),x.pop()}else break}}return d},o.prototype.parseJSXElement=function(){var d=this.createJSXNode(),x=this.parseJSXOpeningElement(),v=[],k=null;if(!x.selfClosing){var N=this.parseComplexJSXElement({node:d,opening:x,closing:k,children:v});v=N.children,k=N.closing}return this.finalize(d,new c.JSXElement(x,v,k))},o.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var d=this.parseJSXElement();return this.finishJSX(),d},o.prototype.isStartOfExpression=function(){return a.prototype.isStartOfExpression.call(this)||this.match("<")},o}(B.Parser);n.JSXParser=l},function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};n.Character={fromCodePoint:function(s){return s<65536?String.fromCharCode(s):String.fromCharCode(55296+(s-65536>>10))+String.fromCharCode(56320+(s-65536&1023))},isWhiteSpace:function(s){return s===32||s===9||s===11||s===12||s===160||s>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(s)>=0},isLineTerminator:function(s){return s===10||s===13||s===8232||s===8233},isIdentifierStart:function(s){return s===36||s===95||s>=65&&s<=90||s>=97&&s<=122||s===92||s>=128&&i.NonAsciiIdentifierStart.test(n.Character.fromCodePoint(s))},isIdentifierPart:function(s){return s===36||s===95||s>=65&&s<=90||s>=97&&s<=122||s>=48&&s<=57||s===92||s>=128&&i.NonAsciiIdentifierPart.test(n.Character.fromCodePoint(s))},isDecimalDigit:function(s){return s>=48&&s<=57},isHexDigit:function(s){return s>=48&&s<=57||s>=65&&s<=70||s>=97&&s<=102},isOctalDigit:function(s){return s>=48&&s<=55}}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(6),f=function(){function d(x){this.type=s.JSXSyntax.JSXClosingElement,this.name=x}return d}();n.JSXClosingElement=f;var c=function(){function d(x,v,k){this.type=s.JSXSyntax.JSXElement,this.openingElement=x,this.children=v,this.closingElement=k}return d}();n.JSXElement=c;var m=function(){function d(){this.type=s.JSXSyntax.JSXEmptyExpression}return d}();n.JSXEmptyExpression=m;var A=function(){function d(x){this.type=s.JSXSyntax.JSXExpressionContainer,this.expression=x}return d}();n.JSXExpressionContainer=A;var B=function(){function d(x){this.type=s.JSXSyntax.JSXIdentifier,this.name=x}return d}();n.JSXIdentifier=B;var D=function(){function d(x,v){this.type=s.JSXSyntax.JSXMemberExpression,this.object=x,this.property=v}return d}();n.JSXMemberExpression=D;var g=function(){function d(x,v){this.type=s.JSXSyntax.JSXAttribute,this.name=x,this.value=v}return d}();n.JSXAttribute=g;var E=function(){function d(x,v){this.type=s.JSXSyntax.JSXNamespacedName,this.namespace=x,this.name=v}return d}();n.JSXNamespacedName=E;var l=function(){function d(x,v,k){this.type=s.JSXSyntax.JSXOpeningElement,this.name=x,this.selfClosing=v,this.attributes=k}return d}();n.JSXOpeningElement=l;var a=function(){function d(x){this.type=s.JSXSyntax.JSXSpreadAttribute,this.argument=x}return d}();n.JSXSpreadAttribute=a;var o=function(){function d(x,v){this.type=s.JSXSyntax.JSXText,this.value=x,this.raw=v}return d}();n.JSXText=o},function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(2),f=function(){function ee(te){this.type=s.Syntax.ArrayExpression,this.elements=te}return ee}();n.ArrayExpression=f;var c=function(){function ee(te){this.type=s.Syntax.ArrayPattern,this.elements=te}return ee}();n.ArrayPattern=c;var m=function(){function ee(te,fe,Ae){this.type=s.Syntax.ArrowFunctionExpression,this.id=null,this.params=te,this.body=fe,this.generator=!1,this.expression=Ae,this.async=!1}return ee}();n.ArrowFunctionExpression=m;var A=function(){function ee(te,fe,Ae){this.type=s.Syntax.AssignmentExpression,this.operator=te,this.left=fe,this.right=Ae}return ee}();n.AssignmentExpression=A;var B=function(){function ee(te,fe){this.type=s.Syntax.AssignmentPattern,this.left=te,this.right=fe}return ee}();n.AssignmentPattern=B;var D=function(){function ee(te,fe,Ae){this.type=s.Syntax.ArrowFunctionExpression,this.id=null,this.params=te,this.body=fe,this.generator=!1,this.expression=Ae,this.async=!0}return ee}();n.AsyncArrowFunctionExpression=D;var g=function(){function ee(te,fe,Ae){this.type=s.Syntax.FunctionDeclaration,this.id=te,this.params=fe,this.body=Ae,this.generator=!1,this.expression=!1,this.async=!0}return ee}();n.AsyncFunctionDeclaration=g;var E=function(){function ee(te,fe,Ae){this.type=s.Syntax.FunctionExpression,this.id=te,this.params=fe,this.body=Ae,this.generator=!1,this.expression=!1,this.async=!0}return ee}();n.AsyncFunctionExpression=E;var l=function(){function ee(te){this.type=s.Syntax.AwaitExpression,this.argument=te}return ee}();n.AwaitExpression=l;var a=function(){function ee(te,fe,Ae){var dt=te==="||"||te==="&&";this.type=dt?s.Syntax.LogicalExpression:s.Syntax.BinaryExpression,this.operator=te,this.left=fe,this.right=Ae}return ee}();n.BinaryExpression=a;var o=function(){function ee(te){this.type=s.Syntax.BlockStatement,this.body=te}return ee}();n.BlockStatement=o;var d=function(){function ee(te){this.type=s.Syntax.BreakStatement,this.label=te}return ee}();n.BreakStatement=d;var x=function(){function ee(te,fe){this.type=s.Syntax.CallExpression,this.callee=te,this.arguments=fe}return ee}();n.CallExpression=x;var v=function(){function ee(te,fe){this.type=s.Syntax.CatchClause,this.param=te,this.body=fe}return ee}();n.CatchClause=v;var k=function(){function ee(te){this.type=s.Syntax.ClassBody,this.body=te}return ee}();n.ClassBody=k;var N=function(){function ee(te,fe,Ae){this.type=s.Syntax.ClassDeclaration,this.id=te,this.superClass=fe,this.body=Ae}return ee}();n.ClassDeclaration=N;var M=function(){function ee(te,fe,Ae){this.type=s.Syntax.ClassExpression,this.id=te,this.superClass=fe,this.body=Ae}return ee}();n.ClassExpression=M;var P=function(){function ee(te,fe){this.type=s.Syntax.MemberExpression,this.computed=!0,this.object=te,this.property=fe}return ee}();n.ComputedMemberExpression=P;var j=function(){function ee(te,fe,Ae){this.type=s.Syntax.ConditionalExpression,this.test=te,this.consequent=fe,this.alternate=Ae}return ee}();n.ConditionalExpression=j;var K=function(){function ee(te){this.type=s.Syntax.ContinueStatement,this.label=te}return ee}();n.ContinueStatement=K;var W=function(){function ee(){this.type=s.Syntax.DebuggerStatement}return ee}();n.DebuggerStatement=W;var ae=function(){function ee(te,fe){this.type=s.Syntax.ExpressionStatement,this.expression=te,this.directive=fe}return ee}();n.Directive=ae;var he=function(){function ee(te,fe){this.type=s.Syntax.DoWhileStatement,this.body=te,this.test=fe}return ee}();n.DoWhileStatement=he;var R=function(){function ee(){this.type=s.Syntax.EmptyStatement}return ee}();n.EmptyStatement=R;var z=function(){function ee(te){this.type=s.Syntax.ExportAllDeclaration,this.source=te}return ee}();n.ExportAllDeclaration=z;var X=function(){function ee(te){this.type=s.Syntax.ExportDefaultDeclaration,this.declaration=te}return ee}();n.ExportDefaultDeclaration=X;var Y=function(){function ee(te,fe,Ae){this.type=s.Syntax.ExportNamedDeclaration,this.declaration=te,this.specifiers=fe,this.source=Ae}return ee}();n.ExportNamedDeclaration=Y;var L=function(){function ee(te,fe){this.type=s.Syntax.ExportSpecifier,this.exported=fe,this.local=te}return ee}();n.ExportSpecifier=L;var re=function(){function ee(te){this.type=s.Syntax.ExpressionStatement,this.expression=te}return ee}();n.ExpressionStatement=re;var se=function(){function ee(te,fe,Ae){this.type=s.Syntax.ForInStatement,this.left=te,this.right=fe,this.body=Ae,this.each=!1}return ee}();n.ForInStatement=se;var me=function(){function ee(te,fe,Ae){this.type=s.Syntax.ForOfStatement,this.left=te,this.right=fe,this.body=Ae}return ee}();n.ForOfStatement=me;var oe=function(){function ee(te,fe,Ae,dt){this.type=s.Syntax.ForStatement,this.init=te,this.test=fe,this.update=Ae,this.body=dt}return ee}();n.ForStatement=oe;var le=function(){function ee(te,fe,Ae,dt){this.type=s.Syntax.FunctionDeclaration,this.id=te,this.params=fe,this.body=Ae,this.generator=dt,this.expression=!1,this.async=!1}return ee}();n.FunctionDeclaration=le;var ne=function(){function ee(te,fe,Ae,dt){this.type=s.Syntax.FunctionExpression,this.id=te,this.params=fe,this.body=Ae,this.generator=dt,this.expression=!1,this.async=!1}return ee}();n.FunctionExpression=ne;var _=function(){function ee(te){this.type=s.Syntax.Identifier,this.name=te}return ee}();n.Identifier=_;var ce=function(){function ee(te,fe,Ae){this.type=s.Syntax.IfStatement,this.test=te,this.consequent=fe,this.alternate=Ae}return ee}();n.IfStatement=ce;var pe=function(){function ee(te,fe){this.type=s.Syntax.ImportDeclaration,this.specifiers=te,this.source=fe}return ee}();n.ImportDeclaration=pe;var ye=function(){function ee(te){this.type=s.Syntax.ImportDefaultSpecifier,this.local=te}return ee}();n.ImportDefaultSpecifier=ye;var ie=function(){function ee(te){this.type=s.Syntax.ImportNamespaceSpecifier,this.local=te}return ee}();n.ImportNamespaceSpecifier=ie;var de=function(){function ee(te,fe){this.type=s.Syntax.ImportSpecifier,this.local=te,this.imported=fe}return ee}();n.ImportSpecifier=de;var F=function(){function ee(te,fe){this.type=s.Syntax.LabeledStatement,this.label=te,this.body=fe}return ee}();n.LabeledStatement=F;var T=function(){function ee(te,fe){this.type=s.Syntax.Literal,this.value=te,this.raw=fe}return ee}();n.Literal=T;var U=function(){function ee(te,fe){this.type=s.Syntax.MetaProperty,this.meta=te,this.property=fe}return ee}();n.MetaProperty=U;var H=function(){function ee(te,fe,Ae,dt,bn){this.type=s.Syntax.MethodDefinition,this.key=te,this.computed=fe,this.value=Ae,this.kind=dt,this.static=bn}return ee}();n.MethodDefinition=H;var q=function(){function ee(te){this.type=s.Syntax.Program,this.body=te,this.sourceType="module"}return ee}();n.Module=q;var G=function(){function ee(te,fe){this.type=s.Syntax.NewExpression,this.callee=te,this.arguments=fe}return ee}();n.NewExpression=G;var w=function(){function ee(te){this.type=s.Syntax.ObjectExpression,this.properties=te}return ee}();n.ObjectExpression=w;var u=function(){function ee(te){this.type=s.Syntax.ObjectPattern,this.properties=te}return ee}();n.ObjectPattern=u;var h=function(){function ee(te,fe,Ae,dt,bn,_s){this.type=s.Syntax.Property,this.key=fe,this.computed=Ae,this.value=dt,this.kind=te,this.method=bn,this.shorthand=_s}return ee}();n.Property=h;var S=function(){function ee(te,fe,Ae,dt){this.type=s.Syntax.Literal,this.value=te,this.raw=fe,this.regex={pattern:Ae,flags:dt}}return ee}();n.RegexLiteral=S;var C=function(){function ee(te){this.type=s.Syntax.RestElement,this.argument=te}return ee}();n.RestElement=C;var O=function(){function ee(te){this.type=s.Syntax.ReturnStatement,this.argument=te}return ee}();n.ReturnStatement=O;var J=function(){function ee(te){this.type=s.Syntax.Program,this.body=te,this.sourceType="script"}return ee}();n.Script=J;var ue=function(){function ee(te){this.type=s.Syntax.SequenceExpression,this.expressions=te}return ee}();n.SequenceExpression=ue;var ge=function(){function ee(te){this.type=s.Syntax.SpreadElement,this.argument=te}return ee}();n.SpreadElement=ge;var we=function(){function ee(te,fe){this.type=s.Syntax.MemberExpression,this.computed=!1,this.object=te,this.property=fe}return ee}();n.StaticMemberExpression=we;var Be=function(){function ee(){this.type=s.Syntax.Super}return ee}();n.Super=Be;var b=function(){function ee(te,fe){this.type=s.Syntax.SwitchCase,this.test=te,this.consequent=fe}return ee}();n.SwitchCase=b;var p=function(){function ee(te,fe){this.type=s.Syntax.SwitchStatement,this.discriminant=te,this.cases=fe}return ee}();n.SwitchStatement=p;var y=function(){function ee(te,fe){this.type=s.Syntax.TaggedTemplateExpression,this.tag=te,this.quasi=fe}return ee}();n.TaggedTemplateExpression=y;var I=function(){function ee(te,fe){this.type=s.Syntax.TemplateElement,this.value=te,this.tail=fe}return ee}();n.TemplateElement=I;var V=function(){function ee(te,fe){this.type=s.Syntax.TemplateLiteral,this.quasis=te,this.expressions=fe}return ee}();n.TemplateLiteral=V;var Q=function(){function ee(){this.type=s.Syntax.ThisExpression}return ee}();n.ThisExpression=Q;var Z=function(){function ee(te){this.type=s.Syntax.ThrowStatement,this.argument=te}return ee}();n.ThrowStatement=Z;var Se=function(){function ee(te,fe,Ae){this.type=s.Syntax.TryStatement,this.block=te,this.handler=fe,this.finalizer=Ae}return ee}();n.TryStatement=Se;var De=function(){function ee(te,fe){this.type=s.Syntax.UnaryExpression,this.operator=te,this.argument=fe,this.prefix=!0}return ee}();n.UnaryExpression=De;var _e=function(){function ee(te,fe,Ae){this.type=s.Syntax.UpdateExpression,this.operator=te,this.argument=fe,this.prefix=Ae}return ee}();n.UpdateExpression=_e;var ve=function(){function ee(te,fe){this.type=s.Syntax.VariableDeclaration,this.declarations=te,this.kind=fe}return ee}();n.VariableDeclaration=ve;var Ue=function(){function ee(te,fe){this.type=s.Syntax.VariableDeclarator,this.id=te,this.init=fe}return ee}();n.VariableDeclarator=Ue;var Oe=function(){function ee(te,fe){this.type=s.Syntax.WhileStatement,this.test=te,this.body=fe}return ee}();n.WhileStatement=Oe;var Lr=function(){function ee(te,fe){this.type=s.Syntax.WithStatement,this.object=te,this.body=fe}return ee}();n.WithStatement=Lr;var Jr=function(){function ee(te,fe){this.type=s.Syntax.YieldExpression,this.argument=te,this.delegate=fe}return ee}();n.YieldExpression=Jr},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(9),f=i(10),c=i(11),m=i(7),A=i(12),B=i(2),D=i(13),g="ArrowParameterPlaceHolder",E=function(){function l(a,o,d){o===void 0&&(o={}),this.config={range:typeof o.range=="boolean"&&o.range,loc:typeof o.loc=="boolean"&&o.loc,source:null,tokens:typeof o.tokens=="boolean"&&o.tokens,comment:typeof o.comment=="boolean"&&o.comment,tolerant:typeof o.tolerant=="boolean"&&o.tolerant},this.config.loc&&o.source&&o.source!==null&&(this.config.source=String(o.source)),this.delegate=d,this.errorHandler=new f.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new A.Scanner(a,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return l.prototype.throwError=function(a){var o=Array.prototype.slice.call(arguments,1),d=a.replace(/%(\d)/g,function(N,M){return s.assert(M<o.length,"Message reference must be in range"),o[M]}),x=this.lastMarker.index,v=this.lastMarker.line,k=this.lastMarker.column+1;throw this.errorHandler.createError(x,v,k,d)},l.prototype.tolerateError=function(a){var o=Array.prototype.slice.call(arguments,1),d=a.replace(/%(\d)/g,function(N,M){return s.assert(M<o.length,"Message reference must be in range"),o[M]}),x=this.lastMarker.index,v=this.scanner.lineNumber,k=this.lastMarker.column+1;this.errorHandler.tolerateError(x,v,k,d)},l.prototype.unexpectedTokenError=function(a,o){var d=o||c.Messages.UnexpectedToken,x;if(a?(o||(d=a.type===2?c.Messages.UnexpectedEOS:a.type===3?c.Messages.UnexpectedIdentifier:a.type===6?c.Messages.UnexpectedNumber:a.type===8?c.Messages.UnexpectedString:a.type===10?c.Messages.UnexpectedTemplate:c.Messages.UnexpectedToken,a.type===4&&(this.scanner.isFutureReservedWord(a.value)?d=c.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(a.value)&&(d=c.Messages.StrictReservedWord))),x=a.value):x="ILLEGAL",d=d.replace("%0",x),a&&typeof a.lineNumber=="number"){var v=a.start,k=a.lineNumber,N=this.lastMarker.index-this.lastMarker.column,M=a.start-N+1;return this.errorHandler.createError(v,k,M,d)}else{var v=this.lastMarker.index,k=this.lastMarker.line,M=this.lastMarker.column+1;return this.errorHandler.createError(v,k,M,d)}},l.prototype.throwUnexpectedToken=function(a,o){throw this.unexpectedTokenError(a,o)},l.prototype.tolerateUnexpectedToken=function(a,o){this.errorHandler.tolerate(this.unexpectedTokenError(a,o))},l.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var a=this.scanner.scanComments();if(a.length>0&&this.delegate)for(var o=0;o<a.length;++o){var d=a[o],x=void 0;x={type:d.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(d.slice[0],d.slice[1])},this.config.range&&(x.range=d.range),this.config.loc&&(x.loc=d.loc);var v={start:{line:d.loc.start.line,column:d.loc.start.column,offset:d.range[0]},end:{line:d.loc.end.line,column:d.loc.end.column,offset:d.range[1]}};this.delegate(x,v)}}},l.prototype.getTokenRaw=function(a){return this.scanner.source.slice(a.start,a.end)},l.prototype.convertToken=function(a){var o={type:D.TokenName[a.type],value:this.getTokenRaw(a)};if(this.config.range&&(o.range=[a.start,a.end]),this.config.loc&&(o.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),a.type===9){var d=a.pattern,x=a.flags;o.regex={pattern:d,flags:x}}return o},l.prototype.nextToken=function(){var a=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var o=this.scanner.lex();return this.hasLineTerminator=a.lineNumber!==o.lineNumber,o&&this.context.strict&&o.type===3&&this.scanner.isStrictModeReservedWord(o.value)&&(o.type=4),this.lookahead=o,this.config.tokens&&o.type!==2&&this.tokens.push(this.convertToken(o)),a},l.prototype.nextRegexToken=function(){this.collectComments();var a=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(a))),this.lookahead=a,this.nextToken(),a},l.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},l.prototype.startNode=function(a,o){o===void 0&&(o=0);var d=a.start-a.lineStart,x=a.lineNumber;return d<0&&(d+=o,x--),{index:a.start,line:x,column:d}},l.prototype.finalize=function(a,o){if(this.config.range&&(o.range=[a.index,this.lastMarker.index]),this.config.loc&&(o.loc={start:{line:a.line,column:a.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(o.loc.source=this.config.source)),this.delegate){var d={start:{line:a.line,column:a.column,offset:a.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(o,d)}return o},l.prototype.expect=function(a){var o=this.nextToken();(o.type!==7||o.value!==a)&&this.throwUnexpectedToken(o)},l.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var a=this.lookahead;a.type===7&&a.value===","?this.nextToken():a.type===7&&a.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(a)):this.tolerateUnexpectedToken(a,c.Messages.UnexpectedToken)}else this.expect(",")},l.prototype.expectKeyword=function(a){var o=this.nextToken();(o.type!==4||o.value!==a)&&this.throwUnexpectedToken(o)},l.prototype.match=function(a){return this.lookahead.type===7&&this.lookahead.value===a},l.prototype.matchKeyword=function(a){return this.lookahead.type===4&&this.lookahead.value===a},l.prototype.matchContextualKeyword=function(a){return this.lookahead.type===3&&this.lookahead.value===a},l.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var a=this.lookahead.value;return a==="="||a==="*="||a==="**="||a==="/="||a==="%="||a==="+="||a==="-="||a==="<<="||a===">>="||a===">>>="||a==="&="||a==="^="||a==="|="},l.prototype.isolateCoverGrammar=function(a){var o=this.context.isBindingElement,d=this.context.isAssignmentTarget,x=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var v=a.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=o,this.context.isAssignmentTarget=d,this.context.firstCoverInitializedNameError=x,v},l.prototype.inheritCoverGrammar=function(a){var o=this.context.isBindingElement,d=this.context.isAssignmentTarget,x=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var v=a.call(this);return this.context.isBindingElement=this.context.isBindingElement&&o,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&d,this.context.firstCoverInitializedNameError=x||this.context.firstCoverInitializedNameError,v},l.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},l.prototype.parsePrimaryExpression=function(){var a=this.createNode(),o,d,x;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),o=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(a,new m.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,c.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),x=this.getTokenRaw(d),o=this.finalize(a,new m.Literal(d.value,x));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),x=this.getTokenRaw(d),o=this.finalize(a,new m.Literal(d.value==="true",x));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),x=this.getTokenRaw(d),o=this.finalize(a,new m.Literal(null,x));break;case 10:o=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,o=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":o=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":o=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,d=this.nextRegexToken(),x=this.getTokenRaw(d),o=this.finalize(a,new m.RegexLiteral(d.regex,x,d.pattern,d.flags));break;default:o=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?o=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?o=this.finalize(a,new m.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?o=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),o=this.finalize(a,new m.ThisExpression)):this.matchKeyword("class")?o=this.parseClassExpression():o=this.throwUnexpectedToken(this.nextToken()));break;default:o=this.throwUnexpectedToken(this.nextToken())}return o},l.prototype.parseSpreadElement=function(){var a=this.createNode();this.expect("...");var o=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(a,new m.SpreadElement(o))},l.prototype.parseArrayInitializer=function(){var a=this.createNode(),o=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),o.push(null);else if(this.match("...")){var d=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),o.push(d)}else o.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(a,new m.ArrayExpression(o))},l.prototype.parsePropertyMethod=function(a){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=a.simple;var x=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&a.firstRestricted&&this.tolerateUnexpectedToken(a.firstRestricted,a.message),this.context.strict&&a.stricted&&this.tolerateUnexpectedToken(a.stricted,a.message),this.context.strict=o,this.context.allowStrictDirective=d,x},l.prototype.parsePropertyMethodFunction=function(){var a=!1,o=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters(),v=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(o,new m.FunctionExpression(null,x.params,v,a))},l.prototype.parsePropertyMethodAsyncFunction=function(){var a=this.createNode(),o=this.context.allowYield,d=this.context.await;this.context.allowYield=!1,this.context.await=!0;var x=this.parseFormalParameters(),v=this.parsePropertyMethod(x);return this.context.allowYield=o,this.context.await=d,this.finalize(a,new m.AsyncFunctionExpression(null,x.params,v))},l.prototype.parseObjectPropertyKey=function(){var a=this.createNode(),o=this.nextToken(),d;switch(o.type){case 8:case 6:this.context.strict&&o.octal&&this.tolerateUnexpectedToken(o,c.Messages.StrictOctalLiteral);var x=this.getTokenRaw(o);d=this.finalize(a,new m.Literal(o.value,x));break;case 3:case 1:case 5:case 4:d=this.finalize(a,new m.Identifier(o.value));break;case 7:o.value==="["?(d=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):d=this.throwUnexpectedToken(o);break;default:d=this.throwUnexpectedToken(o)}return d},l.prototype.isPropertyKey=function(a,o){return a.type===B.Syntax.Identifier&&a.name===o||a.type===B.Syntax.Literal&&a.value===o},l.prototype.parseObjectProperty=function(a){var o=this.createNode(),d=this.lookahead,x,v=null,k=null,N=!1,M=!1,P=!1,j=!1;if(d.type===3){var K=d.value;this.nextToken(),N=this.match("["),j=!this.hasLineTerminator&&K==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),v=j?this.parseObjectPropertyKey():this.finalize(o,new m.Identifier(K))}else this.match("*")?this.nextToken():(N=this.match("["),v=this.parseObjectPropertyKey());var W=this.qualifiedPropertyName(this.lookahead);if(d.type===3&&!j&&d.value==="get"&&W)x="get",N=this.match("["),v=this.parseObjectPropertyKey(),this.context.allowYield=!1,k=this.parseGetterMethod();else if(d.type===3&&!j&&d.value==="set"&&W)x="set",N=this.match("["),v=this.parseObjectPropertyKey(),k=this.parseSetterMethod();else if(d.type===7&&d.value==="*"&&W)x="init",N=this.match("["),v=this.parseObjectPropertyKey(),k=this.parseGeneratorMethod(),M=!0;else if(v||this.throwUnexpectedToken(this.lookahead),x="init",this.match(":")&&!j)!N&&this.isPropertyKey(v,"__proto__")&&(a.value&&this.tolerateError(c.Messages.DuplicateProtoProperty),a.value=!0),this.nextToken(),k=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))k=j?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),M=!0;else if(d.type===3){var K=this.finalize(o,new m.Identifier(d.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),P=!0;var ae=this.isolateCoverGrammar(this.parseAssignmentExpression);k=this.finalize(o,new m.AssignmentPattern(K,ae))}else P=!0,k=K}else this.throwUnexpectedToken(this.nextToken());return this.finalize(o,new m.Property(x,v,N,k,M,P))},l.prototype.parseObjectInitializer=function(){var a=this.createNode();this.expect("{");for(var o=[],d={value:!1};!this.match("}");)o.push(this.parseObjectProperty(d)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(a,new m.ObjectExpression(o))},l.prototype.parseTemplateHead=function(){s.assert(this.lookahead.head,"Template literal must start with a template head");var a=this.createNode(),o=this.nextToken(),d=o.value,x=o.cooked;return this.finalize(a,new m.TemplateElement({raw:d,cooked:x},o.tail))},l.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var a=this.createNode(),o=this.nextToken(),d=o.value,x=o.cooked;return this.finalize(a,new m.TemplateElement({raw:d,cooked:x},o.tail))},l.prototype.parseTemplateLiteral=function(){var a=this.createNode(),o=[],d=[],x=this.parseTemplateHead();for(d.push(x);!x.tail;)o.push(this.parseExpression()),x=this.parseTemplateElement(),d.push(x);return this.finalize(a,new m.TemplateLiteral(d,o))},l.prototype.reinterpretExpressionAsPattern=function(a){switch(a.type){case B.Syntax.Identifier:case B.Syntax.MemberExpression:case B.Syntax.RestElement:case B.Syntax.AssignmentPattern:break;case B.Syntax.SpreadElement:a.type=B.Syntax.RestElement,this.reinterpretExpressionAsPattern(a.argument);break;case B.Syntax.ArrayExpression:a.type=B.Syntax.ArrayPattern;for(var o=0;o<a.elements.length;o++)a.elements[o]!==null&&this.reinterpretExpressionAsPattern(a.elements[o]);break;case B.Syntax.ObjectExpression:a.type=B.Syntax.ObjectPattern;for(var o=0;o<a.properties.length;o++)this.reinterpretExpressionAsPattern(a.properties[o].value);break;case B.Syntax.AssignmentExpression:a.type=B.Syntax.AssignmentPattern,delete a.operator,this.reinterpretExpressionAsPattern(a.left);break}},l.prototype.parseGroupExpression=function(){var a;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),a={type:g,params:[],async:!1};else{var o=this.lookahead,d=[];if(this.match("..."))a=this.parseRestElement(d),this.expect(")"),this.match("=>")||this.expect("=>"),a={type:g,params:[a],async:!1};else{var x=!1;if(this.context.isBindingElement=!0,a=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var v=[];for(this.context.isAssignmentTarget=!1,v.push(a);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var k=0;k<v.length;k++)this.reinterpretExpressionAsPattern(v[k]);x=!0,a={type:g,params:v,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),v.push(this.parseRestElement(d)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var k=0;k<v.length;k++)this.reinterpretExpressionAsPattern(v[k]);x=!0,a={type:g,params:v,async:!1}}else v.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(x)break}x||(a=this.finalize(this.startNode(o),new m.SequenceExpression(v)))}if(!x){if(this.expect(")"),this.match("=>")&&(a.type===B.Syntax.Identifier&&a.name==="yield"&&(x=!0,a={type:g,params:[a],async:!1}),!x)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),a.type===B.Syntax.SequenceExpression)for(var k=0;k<a.expressions.length;k++)this.reinterpretExpressionAsPattern(a.expressions[k]);else this.reinterpretExpressionAsPattern(a);var N=a.type===B.Syntax.SequenceExpression?a.expressions:[a];a={type:g,params:N,async:!1}}this.context.isBindingElement=!1}}}return a},l.prototype.parseArguments=function(){this.expect("(");var a=[];if(!this.match(")"))for(;;){var o=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(a.push(o),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),a},l.prototype.isIdentifierName=function(a){return a.type===3||a.type===4||a.type===1||a.type===5},l.prototype.parseIdentifierName=function(){var a=this.createNode(),o=this.nextToken();return this.isIdentifierName(o)||this.throwUnexpectedToken(o),this.finalize(a,new m.Identifier(o.value))},l.prototype.parseNewExpression=function(){var a=this.createNode(),o=this.parseIdentifierName();s.assert(o.name==="new","New expression must start with `new`");var d;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var x=this.parseIdentifierName();d=new m.MetaProperty(o,x)}else this.throwUnexpectedToken(this.lookahead);else{var v=this.isolateCoverGrammar(this.parseLeftHandSideExpression),k=this.match("(")?this.parseArguments():[];d=new m.NewExpression(v,k),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(a,d)},l.prototype.parseAsyncArgument=function(){var a=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,a},l.prototype.parseAsyncArguments=function(){this.expect("(");var a=[];if(!this.match(")"))for(;;){var o=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(a.push(o),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),a},l.prototype.parseLeftHandSideExpressionAllowCall=function(){var a=this.lookahead,o=this.matchContextualKeyword("async"),d=this.context.allowIn;this.context.allowIn=!0;var x;for(this.matchKeyword("super")&&this.context.inFunctionBody?(x=this.createNode(),this.nextToken(),x=this.finalize(x,new m.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):x=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var v=this.parseIdentifierName();x=this.finalize(this.startNode(a),new m.StaticMemberExpression(x,v))}else if(this.match("(")){var k=o&&a.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var N=k?this.parseAsyncArguments():this.parseArguments();if(x=this.finalize(this.startNode(a),new m.CallExpression(x,N)),k&&this.match("=>")){for(var M=0;M<N.length;++M)this.reinterpretExpressionAsPattern(N[M]);x={type:g,params:N,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var v=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),x=this.finalize(this.startNode(a),new m.ComputedMemberExpression(x,v))}else if(this.lookahead.type===10&&this.lookahead.head){var P=this.parseTemplateLiteral();x=this.finalize(this.startNode(a),new m.TaggedTemplateExpression(x,P))}else break;return this.context.allowIn=d,x},l.prototype.parseSuper=function(){var a=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(a,new m.Super)},l.prototype.parseLeftHandSideExpression=function(){s.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var a=this.startNode(this.lookahead),o=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var d=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),o=this.finalize(a,new m.ComputedMemberExpression(o,d))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var d=this.parseIdentifierName();o=this.finalize(a,new m.StaticMemberExpression(o,d))}else if(this.lookahead.type===10&&this.lookahead.head){var x=this.parseTemplateLiteral();o=this.finalize(a,new m.TaggedTemplateExpression(o,x))}else break;return o},l.prototype.parseUpdateExpression=function(){var a,o=this.lookahead;if(this.match("++")||this.match("--")){var d=this.startNode(o),x=this.nextToken();a=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&a.type===B.Syntax.Identifier&&this.scanner.isRestrictedWord(a.name)&&this.tolerateError(c.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment);var v=!0;a=this.finalize(d,new m.UpdateExpression(x.value,a,v)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(a=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&a.type===B.Syntax.Identifier&&this.scanner.isRestrictedWord(a.name)&&this.tolerateError(c.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var k=this.nextToken().value,v=!1;a=this.finalize(this.startNode(o),new m.UpdateExpression(k,a,v))}return a},l.prototype.parseAwaitExpression=function(){var a=this.createNode();this.nextToken();var o=this.parseUnaryExpression();return this.finalize(a,new m.AwaitExpression(o))},l.prototype.parseUnaryExpression=function(){var a;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var o=this.startNode(this.lookahead),d=this.nextToken();a=this.inheritCoverGrammar(this.parseUnaryExpression),a=this.finalize(o,new m.UnaryExpression(d.value,a)),this.context.strict&&a.operator==="delete"&&a.argument.type===B.Syntax.Identifier&&this.tolerateError(c.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?a=this.parseAwaitExpression():a=this.parseUpdateExpression();return a},l.prototype.parseExponentiationExpression=function(){var a=this.lookahead,o=this.inheritCoverGrammar(this.parseUnaryExpression);if(o.type!==B.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var d=o,x=this.isolateCoverGrammar(this.parseExponentiationExpression);o=this.finalize(this.startNode(a),new m.BinaryExpression("**",d,x))}return o},l.prototype.binaryPrecedence=function(a){var o=a.value,d;return a.type===7?d=this.operatorPrecedence[o]||0:a.type===4?d=o==="instanceof"||this.context.allowIn&&o==="in"?7:0:d=0,d},l.prototype.parseBinaryExpression=function(){var a=this.lookahead,o=this.inheritCoverGrammar(this.parseExponentiationExpression),d=this.lookahead,x=this.binaryPrecedence(d);if(x>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var v=[a,this.lookahead],k=o,N=this.isolateCoverGrammar(this.parseExponentiationExpression),M=[k,d.value,N],P=[x];x=this.binaryPrecedence(this.lookahead),!(x<=0);){for(;M.length>2&&x<=P[P.length-1];){N=M.pop();var j=M.pop();P.pop(),k=M.pop(),v.pop();var K=this.startNode(v[v.length-1]);M.push(this.finalize(K,new m.BinaryExpression(j,k,N)))}M.push(this.nextToken().value),P.push(x),v.push(this.lookahead),M.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var W=M.length-1;o=M[W];for(var ae=v.pop();W>1;){var he=v.pop(),R=ae&&ae.lineStart,K=this.startNode(he,R),j=M[W-1];o=this.finalize(K,new m.BinaryExpression(j,M[W-2],o)),W-=2,ae=he}}return o},l.prototype.parseConditionalExpression=function(){var a=this.lookahead,o=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var d=this.context.allowIn;this.context.allowIn=!0;var x=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=d,this.expect(":");var v=this.isolateCoverGrammar(this.parseAssignmentExpression);o=this.finalize(this.startNode(a),new m.ConditionalExpression(o,x,v)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return o},l.prototype.checkPatternParam=function(a,o){switch(o.type){case B.Syntax.Identifier:this.validateParam(a,o,o.name);break;case B.Syntax.RestElement:this.checkPatternParam(a,o.argument);break;case B.Syntax.AssignmentPattern:this.checkPatternParam(a,o.left);break;case B.Syntax.ArrayPattern:for(var d=0;d<o.elements.length;d++)o.elements[d]!==null&&this.checkPatternParam(a,o.elements[d]);break;case B.Syntax.ObjectPattern:for(var d=0;d<o.properties.length;d++)this.checkPatternParam(a,o.properties[d].value);break}a.simple=a.simple&&o instanceof m.Identifier},l.prototype.reinterpretAsCoverFormalsList=function(a){var o=[a],d,x=!1;switch(a.type){case B.Syntax.Identifier:break;case g:o=a.params,x=a.async;break;default:return null}d={simple:!0,paramSet:{}};for(var v=0;v<o.length;++v){var k=o[v];k.type===B.Syntax.AssignmentPattern?k.right.type===B.Syntax.YieldExpression&&(k.right.argument&&this.throwUnexpectedToken(this.lookahead),k.right.type=B.Syntax.Identifier,k.right.name="yield",delete k.right.argument,delete k.right.delegate):x&&k.type===B.Syntax.Identifier&&k.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(d,k),o[v]=k}if(this.context.strict||!this.context.allowYield)for(var v=0;v<o.length;++v){var k=o[v];k.type===B.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(d.message===c.Messages.StrictParamDupe){var N=this.context.strict?d.stricted:d.firstRestricted;this.throwUnexpectedToken(N,d.message)}return{simple:d.simple,params:o,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}},l.prototype.parseAssignmentExpression=function(){var a;if(!this.context.allowYield&&this.matchKeyword("yield"))a=this.parseYieldExpression();else{var o=this.lookahead,d=o;if(a=this.parseConditionalExpression(),d.type===3&&d.lineNumber===this.lookahead.lineNumber&&d.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var x=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(x),a={type:g,params:[x],async:!0}}if(a.type===g||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var v=a.async,k=this.reinterpretAsCoverFormalsList(a);if(k){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var N=this.context.strict,M=this.context.allowStrictDirective;this.context.allowStrictDirective=k.simple;var P=this.context.allowYield,j=this.context.await;this.context.allowYield=!0,this.context.await=v;var K=this.startNode(o);this.expect("=>");var W=void 0;if(this.match("{")){var ae=this.context.allowIn;this.context.allowIn=!0,W=this.parseFunctionSourceElements(),this.context.allowIn=ae}else W=this.isolateCoverGrammar(this.parseAssignmentExpression);var he=W.type!==B.Syntax.BlockStatement;this.context.strict&&k.firstRestricted&&this.throwUnexpectedToken(k.firstRestricted,k.message),this.context.strict&&k.stricted&&this.tolerateUnexpectedToken(k.stricted,k.message),a=v?this.finalize(K,new m.AsyncArrowFunctionExpression(k.params,W,he)):this.finalize(K,new m.ArrowFunctionExpression(k.params,W,he)),this.context.strict=N,this.context.allowStrictDirective=M,this.context.allowYield=P,this.context.await=j}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment),this.context.strict&&a.type===B.Syntax.Identifier){var R=a;this.scanner.isRestrictedWord(R.name)&&this.tolerateUnexpectedToken(d,c.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(R.name)&&this.tolerateUnexpectedToken(d,c.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(a):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),d=this.nextToken();var z=d.value,X=this.isolateCoverGrammar(this.parseAssignmentExpression);a=this.finalize(this.startNode(o),new m.AssignmentExpression(z,a,X)),this.context.firstCoverInitializedNameError=null}}return a},l.prototype.parseExpression=function(){var a=this.lookahead,o=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var d=[];for(d.push(o);this.lookahead.type!==2&&this.match(",");)this.nextToken(),d.push(this.isolateCoverGrammar(this.parseAssignmentExpression));o=this.finalize(this.startNode(a),new m.SequenceExpression(d))}return o},l.prototype.parseStatementListItem=function(){var a;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,c.Messages.IllegalExportDeclaration),a=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,c.Messages.IllegalImportDeclaration),a=this.parseImportDeclaration();break;case"const":a=this.parseLexicalDeclaration({inFor:!1});break;case"function":a=this.parseFunctionDeclaration();break;case"class":a=this.parseClassDeclaration();break;case"let":a=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:a=this.parseStatement();break}else a=this.parseStatement();return a},l.prototype.parseBlock=function(){var a=this.createNode();this.expect("{");for(var o=[];!this.match("}");)o.push(this.parseStatementListItem());return this.expect("}"),this.finalize(a,new m.BlockStatement(o))},l.prototype.parseLexicalBinding=function(a,o){var d=this.createNode(),x=[],v=this.parsePattern(x,a);this.context.strict&&v.type===B.Syntax.Identifier&&this.scanner.isRestrictedWord(v.name)&&this.tolerateError(c.Messages.StrictVarName);var k=null;return a==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),k=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(c.Messages.DeclarationMissingInitializer,"const")):(!o.inFor&&v.type!==B.Syntax.Identifier||this.match("="))&&(this.expect("="),k=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(d,new m.VariableDeclarator(v,k))},l.prototype.parseBindingList=function(a,o){for(var d=[this.parseLexicalBinding(a,o)];this.match(",");)this.nextToken(),d.push(this.parseLexicalBinding(a,o));return d},l.prototype.isLexicalDeclaration=function(){var a=this.scanner.saveState();this.scanner.scanComments();var o=this.scanner.lex();return this.scanner.restoreState(a),o.type===3||o.type===7&&o.value==="["||o.type===7&&o.value==="{"||o.type===4&&o.value==="let"||o.type===4&&o.value==="yield"},l.prototype.parseLexicalDeclaration=function(a){var o=this.createNode(),d=this.nextToken().value;s.assert(d==="let"||d==="const","Lexical declaration must be either let or const");var x=this.parseBindingList(d,a);return this.consumeSemicolon(),this.finalize(o,new m.VariableDeclaration(x,d))},l.prototype.parseBindingRestElement=function(a,o){var d=this.createNode();this.expect("...");var x=this.parsePattern(a,o);return this.finalize(d,new m.RestElement(x))},l.prototype.parseArrayPattern=function(a,o){var d=this.createNode();this.expect("[");for(var x=[];!this.match("]");)if(this.match(","))this.nextToken(),x.push(null);else{if(this.match("...")){x.push(this.parseBindingRestElement(a,o));break}else x.push(this.parsePatternWithDefault(a,o));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(d,new m.ArrayPattern(x))},l.prototype.parsePropertyPattern=function(a,o){var d=this.createNode(),x=!1,v=!1,k=!1,N,M;if(this.lookahead.type===3){var P=this.lookahead;N=this.parseVariableIdentifier();var j=this.finalize(d,new m.Identifier(P.value));if(this.match("=")){a.push(P),v=!0,this.nextToken();var K=this.parseAssignmentExpression();M=this.finalize(this.startNode(P),new m.AssignmentPattern(j,K))}else this.match(":")?(this.expect(":"),M=this.parsePatternWithDefault(a,o)):(a.push(P),v=!0,M=j)}else x=this.match("["),N=this.parseObjectPropertyKey(),this.expect(":"),M=this.parsePatternWithDefault(a,o);return this.finalize(d,new m.Property("init",N,x,M,k,v))},l.prototype.parseObjectPattern=function(a,o){var d=this.createNode(),x=[];for(this.expect("{");!this.match("}");)x.push(this.parsePropertyPattern(a,o)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(d,new m.ObjectPattern(x))},l.prototype.parsePattern=function(a,o){var d;return this.match("[")?d=this.parseArrayPattern(a,o):this.match("{")?d=this.parseObjectPattern(a,o):(this.matchKeyword("let")&&(o==="const"||o==="let")&&this.tolerateUnexpectedToken(this.lookahead,c.Messages.LetInLexicalBinding),a.push(this.lookahead),d=this.parseVariableIdentifier(o)),d},l.prototype.parsePatternWithDefault=function(a,o){var d=this.lookahead,x=this.parsePattern(a,o);if(this.match("=")){this.nextToken();var v=this.context.allowYield;this.context.allowYield=!0;var k=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=v,x=this.finalize(this.startNode(d),new m.AssignmentPattern(x,k))}return x},l.prototype.parseVariableIdentifier=function(a){var o=this.createNode(),d=this.nextToken();return d.type===4&&d.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(d,c.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(d):d.type!==3?this.context.strict&&d.type===4&&this.scanner.isStrictModeReservedWord(d.value)?this.tolerateUnexpectedToken(d,c.Messages.StrictReservedWord):(this.context.strict||d.value!=="let"||a!=="var")&&this.throwUnexpectedToken(d):(this.context.isModule||this.context.await)&&d.type===3&&d.value==="await"&&this.tolerateUnexpectedToken(d),this.finalize(o,new m.Identifier(d.value))},l.prototype.parseVariableDeclaration=function(a){var o=this.createNode(),d=[],x=this.parsePattern(d,"var");this.context.strict&&x.type===B.Syntax.Identifier&&this.scanner.isRestrictedWord(x.name)&&this.tolerateError(c.Messages.StrictVarName);var v=null;return this.match("=")?(this.nextToken(),v=this.isolateCoverGrammar(this.parseAssignmentExpression)):x.type!==B.Syntax.Identifier&&!a.inFor&&this.expect("="),this.finalize(o,new m.VariableDeclarator(x,v))},l.prototype.parseVariableDeclarationList=function(a){var o={inFor:a.inFor},d=[];for(d.push(this.parseVariableDeclaration(o));this.match(",");)this.nextToken(),d.push(this.parseVariableDeclaration(o));return d},l.prototype.parseVariableStatement=function(){var a=this.createNode();this.expectKeyword("var");var o=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(a,new m.VariableDeclaration(o,"var"))},l.prototype.parseEmptyStatement=function(){var a=this.createNode();return this.expect(";"),this.finalize(a,new m.EmptyStatement)},l.prototype.parseExpressionStatement=function(){var a=this.createNode(),o=this.parseExpression();return this.consumeSemicolon(),this.finalize(a,new m.ExpressionStatement(o))},l.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(c.Messages.StrictFunction),this.parseStatement()},l.prototype.parseIfStatement=function(){var a=this.createNode(),o,d=null;this.expectKeyword("if"),this.expect("(");var x=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),o=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),o=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),d=this.parseIfClause())),this.finalize(a,new m.IfStatement(x,o,d))},l.prototype.parseDoWhileStatement=function(){var a=this.createNode();this.expectKeyword("do");var o=this.context.inIteration;this.context.inIteration=!0;var d=this.parseStatement();this.context.inIteration=o,this.expectKeyword("while"),this.expect("(");var x=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(a,new m.DoWhileStatement(d,x))},l.prototype.parseWhileStatement=function(){var a=this.createNode(),o;this.expectKeyword("while"),this.expect("(");var d=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),o=this.finalize(this.createNode(),new m.EmptyStatement);else{this.expect(")");var x=this.context.inIteration;this.context.inIteration=!0,o=this.parseStatement(),this.context.inIteration=x}return this.finalize(a,new m.WhileStatement(d,o))},l.prototype.parseForStatement=function(){var a=null,o=null,d=null,x=!0,v,k,N=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){a=this.createNode(),this.nextToken();var M=this.context.allowIn;this.context.allowIn=!1;var P=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=M,P.length===1&&this.matchKeyword("in")){var j=P[0];j.init&&(j.id.type===B.Syntax.ArrayPattern||j.id.type===B.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(c.Messages.ForInOfLoopInitializer,"for-in"),a=this.finalize(a,new m.VariableDeclaration(P,"var")),this.nextToken(),v=a,k=this.parseExpression(),a=null}else P.length===1&&P[0].init===null&&this.matchContextualKeyword("of")?(a=this.finalize(a,new m.VariableDeclaration(P,"var")),this.nextToken(),v=a,k=this.parseAssignmentExpression(),a=null,x=!1):(a=this.finalize(a,new m.VariableDeclaration(P,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){a=this.createNode();var K=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")a=this.finalize(a,new m.Identifier(K)),this.nextToken(),v=a,k=this.parseExpression(),a=null;else{var M=this.context.allowIn;this.context.allowIn=!1;var P=this.parseBindingList(K,{inFor:!0});this.context.allowIn=M,P.length===1&&P[0].init===null&&this.matchKeyword("in")?(a=this.finalize(a,new m.VariableDeclaration(P,K)),this.nextToken(),v=a,k=this.parseExpression(),a=null):P.length===1&&P[0].init===null&&this.matchContextualKeyword("of")?(a=this.finalize(a,new m.VariableDeclaration(P,K)),this.nextToken(),v=a,k=this.parseAssignmentExpression(),a=null,x=!1):(this.consumeSemicolon(),a=this.finalize(a,new m.VariableDeclaration(P,K)))}}else{var W=this.lookahead,M=this.context.allowIn;if(this.context.allowIn=!1,a=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=M,this.matchKeyword("in"))(!this.context.isAssignmentTarget||a.type===B.Syntax.AssignmentExpression)&&this.tolerateError(c.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(a),v=a,k=this.parseExpression(),a=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||a.type===B.Syntax.AssignmentExpression)&&this.tolerateError(c.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(a),v=a,k=this.parseAssignmentExpression(),a=null,x=!1;else{if(this.match(",")){for(var ae=[a];this.match(",");)this.nextToken(),ae.push(this.isolateCoverGrammar(this.parseAssignmentExpression));a=this.finalize(this.startNode(W),new m.SequenceExpression(ae))}this.expect(";")}}typeof v>"u"&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(d=this.parseExpression()));var he;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),he=this.finalize(this.createNode(),new m.EmptyStatement);else{this.expect(")");var R=this.context.inIteration;this.context.inIteration=!0,he=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=R}return typeof v>"u"?this.finalize(N,new m.ForStatement(a,o,d,he)):x?this.finalize(N,new m.ForInStatement(v,k,he)):this.finalize(N,new m.ForOfStatement(v,k,he))},l.prototype.parseContinueStatement=function(){var a=this.createNode();this.expectKeyword("continue");var o=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var d=this.parseVariableIdentifier();o=d;var x="$"+d.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,x)||this.throwError(c.Messages.UnknownLabel,d.name)}return this.consumeSemicolon(),o===null&&!this.context.inIteration&&this.throwError(c.Messages.IllegalContinue),this.finalize(a,new m.ContinueStatement(o))},l.prototype.parseBreakStatement=function(){var a=this.createNode();this.expectKeyword("break");var o=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var d=this.parseVariableIdentifier(),x="$"+d.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,x)||this.throwError(c.Messages.UnknownLabel,d.name),o=d}return this.consumeSemicolon(),o===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(c.Messages.IllegalBreak),this.finalize(a,new m.BreakStatement(o))},l.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(c.Messages.IllegalReturn);var a=this.createNode();this.expectKeyword("return");var o=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,d=o?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(a,new m.ReturnStatement(d))},l.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(c.Messages.StrictModeWith);var a=this.createNode(),o;this.expectKeyword("with"),this.expect("(");var d=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),o=this.finalize(this.createNode(),new m.EmptyStatement)):(this.expect(")"),o=this.parseStatement()),this.finalize(a,new m.WithStatement(d,o))},l.prototype.parseSwitchCase=function(){var a=this.createNode(),o;this.matchKeyword("default")?(this.nextToken(),o=null):(this.expectKeyword("case"),o=this.parseExpression()),this.expect(":");for(var d=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)d.push(this.parseStatementListItem());return this.finalize(a,new m.SwitchCase(o,d))},l.prototype.parseSwitchStatement=function(){var a=this.createNode();this.expectKeyword("switch"),this.expect("(");var o=this.parseExpression();this.expect(")");var d=this.context.inSwitch;this.context.inSwitch=!0;var x=[],v=!1;for(this.expect("{");!this.match("}");){var k=this.parseSwitchCase();k.test===null&&(v&&this.throwError(c.Messages.MultipleDefaultsInSwitch),v=!0),x.push(k)}return this.expect("}"),this.context.inSwitch=d,this.finalize(a,new m.SwitchStatement(o,x))},l.prototype.parseLabelledStatement=function(){var a=this.createNode(),o=this.parseExpression(),d;if(o.type===B.Syntax.Identifier&&this.match(":")){this.nextToken();var x=o,v="$"+x.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,v)&&this.throwError(c.Messages.Redeclaration,"Label",x.name),this.context.labelSet[v]=!0;var k=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),k=this.parseClassDeclaration();else if(this.matchKeyword("function")){var N=this.lookahead,M=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(N,c.Messages.StrictFunction):M.generator&&this.tolerateUnexpectedToken(N,c.Messages.GeneratorInLegacyContext),k=M}else k=this.parseStatement();delete this.context.labelSet[v],d=new m.LabeledStatement(x,k)}else this.consumeSemicolon(),d=new m.ExpressionStatement(o);return this.finalize(a,d)},l.prototype.parseThrowStatement=function(){var a=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(c.Messages.NewlineAfterThrow);var o=this.parseExpression();return this.consumeSemicolon(),this.finalize(a,new m.ThrowStatement(o))},l.prototype.parseCatchClause=function(){var a=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var o=[],d=this.parsePattern(o),x={},v=0;v<o.length;v++){var k="$"+o[v].value;Object.prototype.hasOwnProperty.call(x,k)&&this.tolerateError(c.Messages.DuplicateBinding,o[v].value),x[k]=!0}this.context.strict&&d.type===B.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&this.tolerateError(c.Messages.StrictCatchVariable),this.expect(")");var N=this.parseBlock();return this.finalize(a,new m.CatchClause(d,N))},l.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},l.prototype.parseTryStatement=function(){var a=this.createNode();this.expectKeyword("try");var o=this.parseBlock(),d=this.matchKeyword("catch")?this.parseCatchClause():null,x=this.matchKeyword("finally")?this.parseFinallyClause():null;return!d&&!x&&this.throwError(c.Messages.NoCatchOrFinally),this.finalize(a,new m.TryStatement(o,d,x))},l.prototype.parseDebuggerStatement=function(){var a=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(a,new m.DebuggerStatement)},l.prototype.parseStatement=function(){var a;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:a=this.parseExpressionStatement();break;case 7:var o=this.lookahead.value;o==="{"?a=this.parseBlock():o==="("?a=this.parseExpressionStatement():o===";"?a=this.parseEmptyStatement():a=this.parseExpressionStatement();break;case 3:a=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":a=this.parseBreakStatement();break;case"continue":a=this.parseContinueStatement();break;case"debugger":a=this.parseDebuggerStatement();break;case"do":a=this.parseDoWhileStatement();break;case"for":a=this.parseForStatement();break;case"function":a=this.parseFunctionDeclaration();break;case"if":a=this.parseIfStatement();break;case"return":a=this.parseReturnStatement();break;case"switch":a=this.parseSwitchStatement();break;case"throw":a=this.parseThrowStatement();break;case"try":a=this.parseTryStatement();break;case"var":a=this.parseVariableStatement();break;case"while":a=this.parseWhileStatement();break;case"with":a=this.parseWithStatement();break;default:a=this.parseExpressionStatement();break}break;default:a=this.throwUnexpectedToken(this.lookahead)}return a},l.prototype.parseFunctionSourceElements=function(){var a=this.createNode();this.expect("{");var o=this.parseDirectivePrologues(),d=this.context.labelSet,x=this.context.inIteration,v=this.context.inSwitch,k=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)o.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=d,this.context.inIteration=x,this.context.inSwitch=v,this.context.inFunctionBody=k,this.finalize(a,new m.BlockStatement(o))},l.prototype.validateParam=function(a,o,d){var x="$"+d;this.context.strict?(this.scanner.isRestrictedWord(d)&&(a.stricted=o,a.message=c.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(a.paramSet,x)&&(a.stricted=o,a.message=c.Messages.StrictParamDupe)):a.firstRestricted||(this.scanner.isRestrictedWord(d)?(a.firstRestricted=o,a.message=c.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(d)?(a.firstRestricted=o,a.message=c.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,x)&&(a.stricted=o,a.message=c.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(a.paramSet,x,{value:!0,enumerable:!0,writable:!0,configurable:!0}):a.paramSet[x]=!0},l.prototype.parseRestElement=function(a){var o=this.createNode();this.expect("...");var d=this.parsePattern(a);return this.match("=")&&this.throwError(c.Messages.DefaultRestParameter),this.match(")")||this.throwError(c.Messages.ParameterAfterRestParameter),this.finalize(o,new m.RestElement(d))},l.prototype.parseFormalParameter=function(a){for(var o=[],d=this.match("...")?this.parseRestElement(o):this.parsePatternWithDefault(o),x=0;x<o.length;x++)this.validateParam(a,o[x],o[x].value);a.simple=a.simple&&d instanceof m.Identifier,a.params.push(d)},l.prototype.parseFormalParameters=function(a){var o;if(o={simple:!0,params:[],firstRestricted:a},this.expect("("),!this.match(")"))for(o.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(o),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:o.simple,params:o.params,stricted:o.stricted,firstRestricted:o.firstRestricted,message:o.message}},l.prototype.matchAsyncFunction=function(){var a=this.matchContextualKeyword("async");if(a){var o=this.scanner.saveState();this.scanner.scanComments();var d=this.scanner.lex();this.scanner.restoreState(o),a=o.lineNumber===d.lineNumber&&d.type===4&&d.value==="function"}return a},l.prototype.parseFunctionDeclaration=function(a){var o=this.createNode(),d=this.matchContextualKeyword("async");d&&this.nextToken(),this.expectKeyword("function");var x=d?!1:this.match("*");x&&this.nextToken();var v,k=null,N=null;if(!a||!this.match("(")){var M=this.lookahead;k=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(M.value)&&this.tolerateUnexpectedToken(M,c.Messages.StrictFunctionName):this.scanner.isRestrictedWord(M.value)?(N=M,v=c.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(M.value)&&(N=M,v=c.Messages.StrictReservedWord)}var P=this.context.await,j=this.context.allowYield;this.context.await=d,this.context.allowYield=!x;var K=this.parseFormalParameters(N),W=K.params,ae=K.stricted;N=K.firstRestricted,K.message&&(v=K.message);var he=this.context.strict,R=this.context.allowStrictDirective;this.context.allowStrictDirective=K.simple;var z=this.parseFunctionSourceElements();return this.context.strict&&N&&this.throwUnexpectedToken(N,v),this.context.strict&&ae&&this.tolerateUnexpectedToken(ae,v),this.context.strict=he,this.context.allowStrictDirective=R,this.context.await=P,this.context.allowYield=j,d?this.finalize(o,new m.AsyncFunctionDeclaration(k,W,z)):this.finalize(o,new m.FunctionDeclaration(k,W,z,x))},l.prototype.parseFunctionExpression=function(){var a=this.createNode(),o=this.matchContextualKeyword("async");o&&this.nextToken(),this.expectKeyword("function");var d=o?!1:this.match("*");d&&this.nextToken();var x,v=null,k,N=this.context.await,M=this.context.allowYield;if(this.context.await=o,this.context.allowYield=!d,!this.match("(")){var P=this.lookahead;v=!this.context.strict&&!d&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(P.value)&&this.tolerateUnexpectedToken(P,c.Messages.StrictFunctionName):this.scanner.isRestrictedWord(P.value)?(k=P,x=c.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(P.value)&&(k=P,x=c.Messages.StrictReservedWord)}var j=this.parseFormalParameters(k),K=j.params,W=j.stricted;k=j.firstRestricted,j.message&&(x=j.message);var ae=this.context.strict,he=this.context.allowStrictDirective;this.context.allowStrictDirective=j.simple;var R=this.parseFunctionSourceElements();return this.context.strict&&k&&this.throwUnexpectedToken(k,x),this.context.strict&&W&&this.tolerateUnexpectedToken(W,x),this.context.strict=ae,this.context.allowStrictDirective=he,this.context.await=N,this.context.allowYield=M,o?this.finalize(a,new m.AsyncFunctionExpression(v,K,R)):this.finalize(a,new m.FunctionExpression(v,K,R,d))},l.prototype.parseDirective=function(){var a=this.lookahead,o=this.createNode(),d=this.parseExpression(),x=d.type===B.Syntax.Literal?this.getTokenRaw(a).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(o,x?new m.Directive(d,x):new m.ExpressionStatement(d))},l.prototype.parseDirectivePrologues=function(){for(var a=null,o=[];;){var d=this.lookahead;if(d.type!==8)break;var x=this.parseDirective();o.push(x);var v=x.directive;if(typeof v!="string")break;v==="use strict"?(this.context.strict=!0,a&&this.tolerateUnexpectedToken(a,c.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(d,c.Messages.IllegalLanguageModeDirective)):!a&&d.octal&&(a=d)}return o},l.prototype.qualifiedPropertyName=function(a){switch(a.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return a.value==="["}return!1},l.prototype.parseGetterMethod=function(){var a=this.createNode(),o=!1,d=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();x.params.length>0&&this.tolerateError(c.Messages.BadGetterArity);var v=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(a,new m.FunctionExpression(null,x.params,v,o))},l.prototype.parseSetterMethod=function(){var a=this.createNode(),o=!1,d=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();x.params.length!==1?this.tolerateError(c.Messages.BadSetterArity):x.params[0]instanceof m.RestElement&&this.tolerateError(c.Messages.BadSetterRestParameter);var v=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(a,new m.FunctionExpression(null,x.params,v,o))},l.prototype.parseGeneratorMethod=function(){var a=this.createNode(),o=!0,d=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();this.context.allowYield=!1;var v=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(a,new m.FunctionExpression(null,x.params,v,o))},l.prototype.isStartOfExpression=function(){var a=!0,o=this.lookahead.value;switch(this.lookahead.type){case 7:a=o==="["||o==="("||o==="{"||o==="+"||o==="-"||o==="!"||o==="~"||o==="++"||o==="--"||o==="/"||o==="/=";break;case 4:a=o==="class"||o==="delete"||o==="function"||o==="let"||o==="new"||o==="super"||o==="this"||o==="typeof"||o==="void"||o==="yield";break}return a},l.prototype.parseYieldExpression=function(){var a=this.createNode();this.expectKeyword("yield");var o=null,d=!1;if(!this.hasLineTerminator){var x=this.context.allowYield;this.context.allowYield=!1,d=this.match("*"),d?(this.nextToken(),o=this.parseAssignmentExpression()):this.isStartOfExpression()&&(o=this.parseAssignmentExpression()),this.context.allowYield=x}return this.finalize(a,new m.YieldExpression(o,d))},l.prototype.parseClassElement=function(a){var o=this.lookahead,d=this.createNode(),x="",v=null,k=null,N=!1,M=!1,P=!1,j=!1;if(this.match("*"))this.nextToken();else{N=this.match("["),v=this.parseObjectPropertyKey();var K=v;if(K.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(o=this.lookahead,P=!0,N=this.match("["),this.match("*")?this.nextToken():v=this.parseObjectPropertyKey()),o.type===3&&!this.hasLineTerminator&&o.value==="async"){var W=this.lookahead.value;W!==":"&&W!=="("&&W!=="*"&&(j=!0,o=this.lookahead,v=this.parseObjectPropertyKey(),o.type===3&&o.value==="constructor"&&this.tolerateUnexpectedToken(o,c.Messages.ConstructorIsAsync))}}var ae=this.qualifiedPropertyName(this.lookahead);return o.type===3?o.value==="get"&&ae?(x="get",N=this.match("["),v=this.parseObjectPropertyKey(),this.context.allowYield=!1,k=this.parseGetterMethod()):o.value==="set"&&ae&&(x="set",N=this.match("["),v=this.parseObjectPropertyKey(),k=this.parseSetterMethod()):o.type===7&&o.value==="*"&&ae&&(x="init",N=this.match("["),v=this.parseObjectPropertyKey(),k=this.parseGeneratorMethod(),M=!0),!x&&v&&this.match("(")&&(x="init",k=j?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),M=!0),x||this.throwUnexpectedToken(this.lookahead),x==="init"&&(x="method"),N||(P&&this.isPropertyKey(v,"prototype")&&this.throwUnexpectedToken(o,c.Messages.StaticPrototype),!P&&this.isPropertyKey(v,"constructor")&&((x!=="method"||!M||k&&k.generator)&&this.throwUnexpectedToken(o,c.Messages.ConstructorSpecialMethod),a.value?this.throwUnexpectedToken(o,c.Messages.DuplicateConstructor):a.value=!0,x="constructor")),this.finalize(d,new m.MethodDefinition(v,N,k,x,P))},l.prototype.parseClassElementList=function(){var a=[],o={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():a.push(this.parseClassElement(o));return this.expect("}"),a},l.prototype.parseClassBody=function(){var a=this.createNode(),o=this.parseClassElementList();return this.finalize(a,new m.ClassBody(o))},l.prototype.parseClassDeclaration=function(a){var o=this.createNode(),d=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var x=a&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),v=null;this.matchKeyword("extends")&&(this.nextToken(),v=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var k=this.parseClassBody();return this.context.strict=d,this.finalize(o,new m.ClassDeclaration(x,v,k))},l.prototype.parseClassExpression=function(){var a=this.createNode(),o=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var d=this.lookahead.type===3?this.parseVariableIdentifier():null,x=null;this.matchKeyword("extends")&&(this.nextToken(),x=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var v=this.parseClassBody();return this.context.strict=o,this.finalize(a,new m.ClassExpression(d,x,v))},l.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var a=this.createNode(),o=this.parseDirectivePrologues();this.lookahead.type!==2;)o.push(this.parseStatementListItem());return this.finalize(a,new m.Module(o))},l.prototype.parseScript=function(){for(var a=this.createNode(),o=this.parseDirectivePrologues();this.lookahead.type!==2;)o.push(this.parseStatementListItem());return this.finalize(a,new m.Script(o))},l.prototype.parseModuleSpecifier=function(){var a=this.createNode();this.lookahead.type!==8&&this.throwError(c.Messages.InvalidModuleSpecifier);var o=this.nextToken(),d=this.getTokenRaw(o);return this.finalize(a,new m.Literal(o.value,d))},l.prototype.parseImportSpecifier=function(){var a=this.createNode(),o,d;return this.lookahead.type===3?(o=this.parseVariableIdentifier(),d=o,this.matchContextualKeyword("as")&&(this.nextToken(),d=this.parseVariableIdentifier())):(o=this.parseIdentifierName(),d=o,this.matchContextualKeyword("as")?(this.nextToken(),d=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(a,new m.ImportSpecifier(d,o))},l.prototype.parseNamedImports=function(){this.expect("{");for(var a=[];!this.match("}");)a.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),a},l.prototype.parseImportDefaultSpecifier=function(){var a=this.createNode(),o=this.parseIdentifierName();return this.finalize(a,new m.ImportDefaultSpecifier(o))},l.prototype.parseImportNamespaceSpecifier=function(){var a=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(c.Messages.NoAsAfterImportNamespace),this.nextToken();var o=this.parseIdentifierName();return this.finalize(a,new m.ImportNamespaceSpecifier(o))},l.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(c.Messages.IllegalImportDeclaration);var a=this.createNode();this.expectKeyword("import");var o,d=[];if(this.lookahead.type===8)o=this.parseModuleSpecifier();else{if(this.match("{")?d=d.concat(this.parseNamedImports()):this.match("*")?d.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(d.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?d.push(this.parseImportNamespaceSpecifier()):this.match("{")?d=d.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var x=this.lookahead.value?c.Messages.UnexpectedToken:c.Messages.MissingFromClause;this.throwError(x,this.lookahead.value)}this.nextToken(),o=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(a,new m.ImportDeclaration(d,o))},l.prototype.parseExportSpecifier=function(){var a=this.createNode(),o=this.parseIdentifierName(),d=o;return this.matchContextualKeyword("as")&&(this.nextToken(),d=this.parseIdentifierName()),this.finalize(a,new m.ExportSpecifier(o,d))},l.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(c.Messages.IllegalExportDeclaration);var a=this.createNode();this.expectKeyword("export");var o;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var d=this.parseFunctionDeclaration(!0);o=this.finalize(a,new m.ExportDefaultDeclaration(d))}else if(this.matchKeyword("class")){var d=this.parseClassDeclaration(!0);o=this.finalize(a,new m.ExportDefaultDeclaration(d))}else if(this.matchContextualKeyword("async")){var d=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();o=this.finalize(a,new m.ExportDefaultDeclaration(d))}else{this.matchContextualKeyword("from")&&this.throwError(c.Messages.UnexpectedToken,this.lookahead.value);var d=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),o=this.finalize(a,new m.ExportDefaultDeclaration(d))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var x=this.lookahead.value?c.Messages.UnexpectedToken:c.Messages.MissingFromClause;this.throwError(x,this.lookahead.value)}this.nextToken();var v=this.parseModuleSpecifier();this.consumeSemicolon(),o=this.finalize(a,new m.ExportAllDeclaration(v))}else if(this.lookahead.type===4){var d=void 0;switch(this.lookahead.value){case"let":case"const":d=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":d=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}o=this.finalize(a,new m.ExportNamedDeclaration(d,[],null))}else if(this.matchAsyncFunction()){var d=this.parseFunctionDeclaration();o=this.finalize(a,new m.ExportNamedDeclaration(d,[],null))}else{var k=[],N=null,M=!1;for(this.expect("{");!this.match("}");)M=M||this.matchKeyword("default"),k.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),N=this.parseModuleSpecifier(),this.consumeSemicolon();else if(M){var x=this.lookahead.value?c.Messages.UnexpectedToken:c.Messages.MissingFromClause;this.throwError(x,this.lookahead.value)}else this.consumeSemicolon();o=this.finalize(a,new m.ExportNamedDeclaration(null,k,N))}return o},l}();n.Parser=E},function(r,n){Object.defineProperty(n,"__esModule",{value:!0});function i(s,f){if(!s)throw new Error("ASSERT: "+f)}n.assert=i},function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){this.errors=[],this.tolerant=!1}return s.prototype.recordError=function(f){this.errors.push(f)},s.prototype.tolerate=function(f){if(this.tolerant)this.recordError(f);else throw f},s.prototype.constructError=function(f,c){var m=new Error(f);try{throw m}catch(A){Object.create&&Object.defineProperty&&(m=Object.create(A),Object.defineProperty(m,"column",{value:c}))}return m},s.prototype.createError=function(f,c,m,A){var B="Line "+c+": "+A,D=this.constructError(B,m);return D.index=f,D.lineNumber=c,D.description=A,D},s.prototype.throwError=function(f,c,m,A){throw this.createError(f,c,m,A)},s.prototype.tolerateError=function(f,c,m,A){var B=this.createError(f,c,m,A);if(this.tolerant)this.recordError(B);else throw B},s}();n.ErrorHandler=i},function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(9),f=i(4),c=i(11);function m(D){return"0123456789abcdef".indexOf(D.toLowerCase())}function A(D){return"01234567".indexOf(D)}var B=function(){function D(g,E){this.source=g,this.errorHandler=E,this.trackComment=!1,this.isModule=!1,this.length=g.length,this.index=0,this.lineNumber=g.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return D.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},D.prototype.restoreState=function(g){this.index=g.index,this.lineNumber=g.lineNumber,this.lineStart=g.lineStart},D.prototype.eof=function(){return this.index>=this.length},D.prototype.throwUnexpectedToken=function(g){return g===void 0&&(g=c.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,g)},D.prototype.tolerateUnexpectedToken=function(g){g===void 0&&(g=c.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,g)},D.prototype.skipSingleLineComment=function(g){var E=[],l,a;for(this.trackComment&&(E=[],l=this.index-g,a={start:{line:this.lineNumber,column:this.index-this.lineStart-g},end:{}});!this.eof();){var o=this.source.charCodeAt(this.index);if(++this.index,f.Character.isLineTerminator(o)){if(this.trackComment){a.end={line:this.lineNumber,column:this.index-this.lineStart-1};var d={multiLine:!1,slice:[l+g,this.index-1],range:[l,this.index-1],loc:a};E.push(d)}return o===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,E}}if(this.trackComment){a.end={line:this.lineNumber,column:this.index-this.lineStart};var d={multiLine:!1,slice:[l+g,this.index],range:[l,this.index],loc:a};E.push(d)}return E},D.prototype.skipMultiLineComment=function(){var g=[],E,l;for(this.trackComment&&(g=[],E=this.index-2,l={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var a=this.source.charCodeAt(this.index);if(f.Character.isLineTerminator(a))a===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(a===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){l.end={line:this.lineNumber,column:this.index-this.lineStart};var o={multiLine:!0,slice:[E+2,this.index-2],range:[E,this.index],loc:l};g.push(o)}return g}++this.index}else++this.index}if(this.trackComment){l.end={line:this.lineNumber,column:this.index-this.lineStart};var o={multiLine:!0,slice:[E+2,this.index],range:[E,this.index],loc:l};g.push(o)}return this.tolerateUnexpectedToken(),g},D.prototype.scanComments=function(){var g;this.trackComment&&(g=[]);for(var E=this.index===0;!this.eof();){var l=this.source.charCodeAt(this.index);if(f.Character.isWhiteSpace(l))++this.index;else if(f.Character.isLineTerminator(l))++this.index,l===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,E=!0;else if(l===47)if(l=this.source.charCodeAt(this.index+1),l===47){this.index+=2;var a=this.skipSingleLineComment(2);this.trackComment&&(g=g.concat(a)),E=!0}else if(l===42){this.index+=2;var a=this.skipMultiLineComment();this.trackComment&&(g=g.concat(a))}else break;else if(E&&l===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var a=this.skipSingleLineComment(3);this.trackComment&&(g=g.concat(a))}else break;else if(l===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var a=this.skipSingleLineComment(4);this.trackComment&&(g=g.concat(a))}else break;else break}return g},D.prototype.isFutureReservedWord=function(g){switch(g){case"enum":case"export":case"import":case"super":return!0;default:return!1}},D.prototype.isStrictModeReservedWord=function(g){switch(g){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},D.prototype.isRestrictedWord=function(g){return g==="eval"||g==="arguments"},D.prototype.isKeyword=function(g){switch(g.length){case 2:return g==="if"||g==="in"||g==="do";case 3:return g==="var"||g==="for"||g==="new"||g==="try"||g==="let";case 4:return g==="this"||g==="else"||g==="case"||g==="void"||g==="with"||g==="enum";case 5:return g==="while"||g==="break"||g==="catch"||g==="throw"||g==="const"||g==="yield"||g==="class"||g==="super";case 6:return g==="return"||g==="typeof"||g==="delete"||g==="switch"||g==="export"||g==="import";case 7:return g==="default"||g==="finally"||g==="extends";case 8:return g==="function"||g==="continue"||g==="debugger";case 10:return g==="instanceof";default:return!1}},D.prototype.codePointAt=function(g){var E=this.source.charCodeAt(g);if(E>=55296&&E<=56319){var l=this.source.charCodeAt(g+1);if(l>=56320&&l<=57343){var a=E;E=(a-55296)*1024+l-56320+65536}}return E},D.prototype.scanHexEscape=function(g){for(var E=g==="u"?4:2,l=0,a=0;a<E;++a)if(!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index)))l=l*16+m(this.source[this.index++]);else return null;return String.fromCharCode(l)},D.prototype.scanUnicodeCodePointEscape=function(){var g=this.source[this.index],E=0;for(g==="}"&&this.throwUnexpectedToken();!this.eof()&&(g=this.source[this.index++],!!f.Character.isHexDigit(g.charCodeAt(0)));)E=E*16+m(g);return(E>1114111||g!=="}")&&this.throwUnexpectedToken(),f.Character.fromCodePoint(E)},D.prototype.getIdentifier=function(){for(var g=this.index++;!this.eof();){var E=this.source.charCodeAt(this.index);if(E===92)return this.index=g,this.getComplexIdentifier();if(E>=55296&&E<57343)return this.index=g,this.getComplexIdentifier();if(f.Character.isIdentifierPart(E))++this.index;else break}return this.source.slice(g,this.index)},D.prototype.getComplexIdentifier=function(){var g=this.codePointAt(this.index),E=f.Character.fromCodePoint(g);this.index+=E.length;var l;for(g===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,l=this.scanUnicodeCodePointEscape()):(l=this.scanHexEscape("u"),(l===null||l==="\\"||!f.Character.isIdentifierStart(l.charCodeAt(0)))&&this.throwUnexpectedToken()),E=l);!this.eof()&&(g=this.codePointAt(this.index),!!f.Character.isIdentifierPart(g));)l=f.Character.fromCodePoint(g),E+=l,this.index+=l.length,g===92&&(E=E.substr(0,E.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,l=this.scanUnicodeCodePointEscape()):(l=this.scanHexEscape("u"),(l===null||l==="\\"||!f.Character.isIdentifierPart(l.charCodeAt(0)))&&this.throwUnexpectedToken()),E+=l);return E},D.prototype.octalToDecimal=function(g){var E=g!=="0",l=A(g);return!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(E=!0,l=l*8+A(this.source[this.index++]),"0123".indexOf(g)>=0&&!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(l=l*8+A(this.source[this.index++]))),{code:l,octal:E}},D.prototype.scanIdentifier=function(){var g,E=this.index,l=this.source.charCodeAt(E)===92?this.getComplexIdentifier():this.getIdentifier();if(l.length===1?g=3:this.isKeyword(l)?g=4:l==="null"?g=5:l==="true"||l==="false"?g=1:g=3,g!==3&&E+l.length!==this.index){var a=this.index;this.index=E,this.tolerateUnexpectedToken(c.Messages.InvalidEscapedReservedWord),this.index=a}return{type:g,value:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:E,end:this.index}},D.prototype.scanPunctuator=function(){var g=this.index,E=this.source[this.index];switch(E){case"(":case"{":E==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,E="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:E=this.source.substr(this.index,4),E===">>>="?this.index+=4:(E=E.substr(0,3),E==="==="||E==="!=="||E===">>>"||E==="<<="||E===">>="||E==="**="?this.index+=3:(E=E.substr(0,2),E==="&&"||E==="||"||E==="=="||E==="!="||E==="+="||E==="-="||E==="*="||E==="/="||E==="++"||E==="--"||E==="<<"||E===">>"||E==="&="||E==="|="||E==="^="||E==="%="||E==="<="||E===">="||E==="=>"||E==="**"?this.index+=2:(E=this.source[this.index],"<>=!+-*%&|^/".indexOf(E)>=0&&++this.index)))}return this.index===g&&this.throwUnexpectedToken(),{type:7,value:E,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},D.prototype.scanHexLiteral=function(g){for(var E="";!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index));)E+=this.source[this.index++];return E.length===0&&this.throwUnexpectedToken(),f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+E,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},D.prototype.scanBinaryLiteral=function(g){for(var E="",l;!this.eof()&&(l=this.source[this.index],!(l!=="0"&&l!=="1"));)E+=this.source[this.index++];return E.length===0&&this.throwUnexpectedToken(),this.eof()||(l=this.source.charCodeAt(this.index),(f.Character.isIdentifierStart(l)||f.Character.isDecimalDigit(l))&&this.throwUnexpectedToken()),{type:6,value:parseInt(E,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},D.prototype.scanOctalLiteral=function(g,E){var l="",a=!1;for(f.Character.isOctalDigit(g.charCodeAt(0))?(a=!0,l="0"+this.source[this.index++]):++this.index;!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];return!a&&l.length===0&&this.throwUnexpectedToken(),(f.Character.isIdentifierStart(this.source.charCodeAt(this.index))||f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(l,8),octal:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:E,end:this.index}},D.prototype.isImplicitOctalLiteral=function(){for(var g=this.index+1;g<this.length;++g){var E=this.source[g];if(E==="8"||E==="9")return!1;if(!f.Character.isOctalDigit(E.charCodeAt(0)))return!0}return!0},D.prototype.scanNumericLiteral=function(){var g=this.index,E=this.source[g];s.assert(f.Character.isDecimalDigit(E.charCodeAt(0))||E===".","Numeric literal must start with a decimal digit or a decimal point");var l="";if(E!=="."){if(l=this.source[this.index++],E=this.source[this.index],l==="0"){if(E==="x"||E==="X")return++this.index,this.scanHexLiteral(g);if(E==="b"||E==="B")return++this.index,this.scanBinaryLiteral(g);if(E==="o"||E==="O")return this.scanOctalLiteral(E,g);if(E&&f.Character.isOctalDigit(E.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(E,g)}for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];E=this.source[this.index]}if(E==="."){for(l+=this.source[this.index++];f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];E=this.source[this.index]}if(E==="e"||E==="E")if(l+=this.source[this.index++],E=this.source[this.index],(E==="+"||E==="-")&&(l+=this.source[this.index++]),f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)l+=this.source[this.index++];else this.throwUnexpectedToken();return f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(l),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},D.prototype.scanStringLiteral=function(){var g=this.index,E=this.source[g];s.assert(E==="'"||E==='"',"String literal must starts with a quote"),++this.index;for(var l=!1,a="";!this.eof();){var o=this.source[this.index++];if(o===E){E="";break}else if(o==="\\")if(o=this.source[this.index++],!o||!f.Character.isLineTerminator(o.charCodeAt(0)))switch(o){case"u":if(this.source[this.index]==="{")++this.index,a+=this.scanUnicodeCodePointEscape();else{var d=this.scanHexEscape(o);d===null&&this.throwUnexpectedToken(),a+=d}break;case"x":var x=this.scanHexEscape(o);x===null&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),a+=x;break;case"n":a+=`
`;break;case"r":a+="\r";break;case"t":a+="	";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;case"8":case"9":a+=o,this.tolerateUnexpectedToken();break;default:if(o&&f.Character.isOctalDigit(o.charCodeAt(0))){var v=this.octalToDecimal(o);l=v.octal||l,a+=String.fromCharCode(v.code)}else a+=o;break}else++this.lineNumber,o==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(f.Character.isLineTerminator(o.charCodeAt(0)))break;a+=o}}return E!==""&&(this.index=g,this.throwUnexpectedToken()),{type:8,value:a,octal:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},D.prototype.scanTemplate=function(){var g="",E=!1,l=this.index,a=this.source[l]==="`",o=!1,d=2;for(++this.index;!this.eof();){var x=this.source[this.index++];if(x==="`"){d=1,o=!0,E=!0;break}else if(x==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,E=!0;break}g+=x}else if(x==="\\")if(x=this.source[this.index++],f.Character.isLineTerminator(x.charCodeAt(0)))++this.lineNumber,x==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(x){case"n":g+=`
`;break;case"r":g+="\r";break;case"t":g+="	";break;case"u":if(this.source[this.index]==="{")++this.index,g+=this.scanUnicodeCodePointEscape();else{var v=this.index,k=this.scanHexEscape(x);k!==null?g+=k:(this.index=v,g+=x)}break;case"x":var N=this.scanHexEscape(x);N===null&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),g+=N;break;case"b":g+="\b";break;case"f":g+="\f";break;case"v":g+="\v";break;default:x==="0"?(f.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral),g+="\0"):f.Character.isOctalDigit(x.charCodeAt(0))?this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral):g+=x;break}else f.Character.isLineTerminator(x.charCodeAt(0))?(++this.lineNumber,x==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,g+=`
`):g+=x}return E||this.throwUnexpectedToken(),a||this.curlyStack.pop(),{type:10,value:this.source.slice(l+1,this.index-d),cooked:g,head:a,tail:o,lineNumber:this.lineNumber,lineStart:this.lineStart,start:l,end:this.index}},D.prototype.testRegExp=function(g,E){var l="",a=g,o=this;E.indexOf("u")>=0&&(a=a.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(d,x,v){var k=parseInt(x||v,16);return k>1114111&&o.throwUnexpectedToken(c.Messages.InvalidRegExp),k<=65535?String.fromCharCode(k):l}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l));try{RegExp(a)}catch{this.throwUnexpectedToken(c.Messages.InvalidRegExp)}try{return new RegExp(g,E)}catch{return null}},D.prototype.scanRegExpBody=function(){var g=this.source[this.index];s.assert(g==="/","Regular expression literal must start with a slash");for(var E=this.source[this.index++],l=!1,a=!1;!this.eof();)if(g=this.source[this.index++],E+=g,g==="\\")g=this.source[this.index++],f.Character.isLineTerminator(g.charCodeAt(0))&&this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),E+=g;else if(f.Character.isLineTerminator(g.charCodeAt(0)))this.throwUnexpectedToken(c.Messages.UnterminatedRegExp);else if(l)g==="]"&&(l=!1);else if(g==="/"){a=!0;break}else g==="["&&(l=!0);return a||this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),E.substr(1,E.length-2)},D.prototype.scanRegExpFlags=function(){for(var g="",E="";!this.eof();){var l=this.source[this.index];if(!f.Character.isIdentifierPart(l.charCodeAt(0)))break;if(++this.index,l==="\\"&&!this.eof())if(l=this.source[this.index],l==="u"){++this.index;var a=this.index,o=this.scanHexEscape("u");if(o!==null)for(E+=o,g+="\\u";a<this.index;++a)g+=this.source[a];else this.index=a,E+="u",g+="\\u";this.tolerateUnexpectedToken()}else g+="\\",this.tolerateUnexpectedToken();else E+=l,g+=l}return E},D.prototype.scanRegExp=function(){var g=this.index,E=this.scanRegExpBody(),l=this.scanRegExpFlags(),a=this.testRegExp(E,l);return{type:9,value:"",pattern:E,flags:l,regex:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},D.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var g=this.source.charCodeAt(this.index);return f.Character.isIdentifierStart(g)?this.scanIdentifier():g===40||g===41||g===59?this.scanPunctuator():g===39||g===34?this.scanStringLiteral():g===46?f.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():f.Character.isDecimalDigit(g)?this.scanNumericLiteral():g===96||g===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():g>=55296&&g<57343&&f.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},D}();n.Scanner=B},function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenName={},n.TokenName[1]="Boolean",n.TokenName[2]="<end>",n.TokenName[3]="Identifier",n.TokenName[4]="Keyword",n.TokenName[5]="Null",n.TokenName[6]="Numeric",n.TokenName[7]="Punctuator",n.TokenName[8]="String",n.TokenName[9]="RegularExpression",n.TokenName[10]="Template"},function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0});var s=i(10),f=i(12),c=i(13),m=function(){function B(){this.values=[],this.curly=this.paren=-1}return B.prototype.beforeFunctionExpression=function(D){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(D)>=0},B.prototype.isRegexStart=function(){var D=this.values[this.values.length-1],g=D!==null;switch(D){case"this":case"]":g=!1;break;case")":var E=this.values[this.paren-1];g=E==="if"||E==="while"||E==="for"||E==="with";break;case"}":if(g=!1,this.values[this.curly-3]==="function"){var l=this.values[this.curly-4];g=l?!this.beforeFunctionExpression(l):!1}else if(this.values[this.curly-4]==="function"){var l=this.values[this.curly-5];g=l?!this.beforeFunctionExpression(l):!0}break}return g},B.prototype.push=function(D){D.type===7||D.type===4?(D.value==="{"?this.curly=this.values.length:D.value==="("&&(this.paren=this.values.length),this.values.push(D.value)):this.values.push(null)},B}(),A=function(){function B(D,g){this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=g?typeof g.tolerant=="boolean"&&g.tolerant:!1,this.scanner=new f.Scanner(D,this.errorHandler),this.scanner.trackComment=g?typeof g.comment=="boolean"&&g.comment:!1,this.trackRange=g?typeof g.range=="boolean"&&g.range:!1,this.trackLoc=g?typeof g.loc=="boolean"&&g.loc:!1,this.buffer=[],this.reader=new m}return B.prototype.errors=function(){return this.errorHandler.errors},B.prototype.getNextToken=function(){if(this.buffer.length===0){var D=this.scanner.scanComments();if(this.scanner.trackComment)for(var g=0;g<D.length;++g){var E=D[g],l=this.scanner.source.slice(E.slice[0],E.slice[1]),a={type:E.multiLine?"BlockComment":"LineComment",value:l};this.trackRange&&(a.range=E.range),this.trackLoc&&(a.loc=E.loc),this.buffer.push(a)}if(!this.scanner.eof()){var o=void 0;this.trackLoc&&(o={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var d=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),x=d?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(x);var v={type:c.TokenName[x.type],value:this.scanner.source.slice(x.start,x.end)};if(this.trackRange&&(v.range=[x.start,x.end]),this.trackLoc&&(o.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},v.loc=o),x.type===9){var k=x.pattern,N=x.flags;v.regex={pattern:k,flags:N}}this.buffer.push(v)}}return this.buffer.shift()},B}();n.Tokenizer=A}])})})(xa);var Mc=xa.exports,ga={},fn={};fn.byteLength=$c;fn.toByteArray=Vc;fn.fromByteArray=Xc;var $t=[],xt=[],Pc=typeof Uint8Array<"u"?Uint8Array:Array,Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Cr=0,zc=Bi.length;Cr<zc;++Cr)$t[Cr]=Bi[Cr],xt[Bi.charCodeAt(Cr)]=Cr;xt[45]=62;xt[95]=63;function wa(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function $c(t){var e=wa(t),r=e[0],n=e[1];return(r+n)*3/4-n}function qc(t,e,r){return(e+r)*3/4-r}function Vc(t){var e,r=wa(t),n=r[0],i=r[1],s=new Pc(qc(t,n,i)),f=0,c=i>0?n-4:n,m;for(m=0;m<c;m+=4)e=xt[t.charCodeAt(m)]<<18|xt[t.charCodeAt(m+1)]<<12|xt[t.charCodeAt(m+2)]<<6|xt[t.charCodeAt(m+3)],s[f++]=e>>16&255,s[f++]=e>>8&255,s[f++]=e&255;return i===2&&(e=xt[t.charCodeAt(m)]<<2|xt[t.charCodeAt(m+1)]>>4,s[f++]=e&255),i===1&&(e=xt[t.charCodeAt(m)]<<10|xt[t.charCodeAt(m+1)]<<4|xt[t.charCodeAt(m+2)]>>2,s[f++]=e>>8&255,s[f++]=e&255),s}function Hc(t){return $t[t>>18&63]+$t[t>>12&63]+$t[t>>6&63]+$t[t&63]}function Gc(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Hc(n));return i.join("")}function Xc(t){for(var e,r=t.length,n=r%3,i=[],s=16383,f=0,c=r-n;f<c;f+=s)i.push(Gc(t,f,f+s>c?c:f+s));return n===1?(e=t[r-1],i.push($t[e>>2]+$t[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push($t[e>>10]+$t[e>>4&63]+$t[e<<2&63]+"=")),i.join("")}var dn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */dn.read=function(t,e,r,n,i){var s,f,c=i*8-n-1,m=(1<<c)-1,A=m>>1,B=-7,D=r?i-1:0,g=r?-1:1,E=t[e+D];for(D+=g,s=E&(1<<-B)-1,E>>=-B,B+=c;B>0;s=s*256+t[e+D],D+=g,B-=8);for(f=s&(1<<-B)-1,s>>=-B,B+=n;B>0;f=f*256+t[e+D],D+=g,B-=8);if(s===0)s=1-A;else{if(s===m)return f?NaN:(E?-1:1)*(1/0);f=f+Math.pow(2,n),s=s-A}return(E?-1:1)*f*Math.pow(2,s-n)};dn.write=function(t,e,r,n,i,s){var f,c,m,A=s*8-i-1,B=(1<<A)-1,D=B>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:s-1,l=n?1:-1,a=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,f=B):(f=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-f))<1&&(f--,m*=2),f+D>=1?e+=g/m:e+=g*Math.pow(2,1-D),e*m>=2&&(f++,m/=2),f+D>=B?(c=0,f=B):f+D>=1?(c=(e*m-1)*Math.pow(2,i),f=f+D):(c=e*Math.pow(2,D-1)*Math.pow(2,i),f=0));i>=8;t[r+E]=c&255,E+=l,c/=256,i-=8);for(f=f<<i|c,A+=i;A>0;t[r+E]=f&255,E+=l,f/=256,A-=8);t[r+E-l]|=a*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=fn,r=dn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const b=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(b,p),b.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function f(b){if(b>i)throw new RangeError('The value "'+b+'" is invalid for option "size"');const p=new Uint8Array(b);return Object.setPrototypeOf(p,c.prototype),p}function c(b,p,y){if(typeof b=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(b)}return m(b,p,y)}c.poolSize=8192;function m(b,p,y){if(typeof b=="string")return g(b,p);if(ArrayBuffer.isView(b))return l(b);if(b==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(J(b,ArrayBuffer)||b&&J(b.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(b,SharedArrayBuffer)||b&&J(b.buffer,SharedArrayBuffer)))return a(b,p,y);if(typeof b=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=b.valueOf&&b.valueOf();if(I!=null&&I!==b)return c.from(I,p,y);const V=o(b);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof b[Symbol.toPrimitive]=="function")return c.from(b[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b)}c.from=function(b,p,y){return m(b,p,y)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function A(b){if(typeof b!="number")throw new TypeError('"size" argument must be of type number');if(b<0)throw new RangeError('The value "'+b+'" is invalid for option "size"')}function B(b,p,y){return A(b),b<=0?f(b):p!==void 0?typeof y=="string"?f(b).fill(p,y):f(b).fill(p):f(b)}c.alloc=function(b,p,y){return B(b,p,y)};function D(b){return A(b),f(b<0?0:d(b)|0)}c.allocUnsafe=function(b){return D(b)},c.allocUnsafeSlow=function(b){return D(b)};function g(b,p){if((typeof p!="string"||p==="")&&(p="utf8"),!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const y=v(b,p)|0;let I=f(y);const V=I.write(b,p);return V!==y&&(I=I.slice(0,V)),I}function E(b){const p=b.length<0?0:d(b.length)|0,y=f(p);for(let I=0;I<p;I+=1)y[I]=b[I]&255;return y}function l(b){if(J(b,Uint8Array)){const p=new Uint8Array(b);return a(p.buffer,p.byteOffset,p.byteLength)}return E(b)}function a(b,p,y){if(p<0||b.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');let I;return p===void 0&&y===void 0?I=new Uint8Array(b):y===void 0?I=new Uint8Array(b,p):I=new Uint8Array(b,p,y),Object.setPrototypeOf(I,c.prototype),I}function o(b){if(c.isBuffer(b)){const p=d(b.length)|0,y=f(p);return y.length===0||b.copy(y,0,0,p),y}if(b.length!==void 0)return typeof b.length!="number"||ue(b.length)?f(0):E(b);if(b.type==="Buffer"&&Array.isArray(b.data))return E(b.data)}function d(b){if(b>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return b|0}function x(b){return+b!=b&&(b=0),c.alloc(+b)}c.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==c.prototype},c.compare=function(p,y){if(J(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),J(y,Uint8Array)&&(y=c.from(y,y.offset,y.byteLength)),!c.isBuffer(p)||!c.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===y)return 0;let I=p.length,V=y.length;for(let Q=0,Z=Math.min(I,V);Q<Z;++Q)if(p[Q]!==y[Q]){I=p[Q],V=y[Q];break}return I<V?-1:V<I?1:0},c.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(p,y){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return c.alloc(0);let I;if(y===void 0)for(y=0,I=0;I<p.length;++I)y+=p[I].length;const V=c.allocUnsafe(y);let Q=0;for(I=0;I<p.length;++I){let Z=p[I];if(J(Z,Uint8Array))Q+Z.length>V.length?(c.isBuffer(Z)||(Z=c.from(Z)),Z.copy(V,Q)):Uint8Array.prototype.set.call(V,Z,Q);else if(c.isBuffer(Z))Z.copy(V,Q);else throw new TypeError('"list" argument must be an Array of Buffers');Q+=Z.length}return V};function v(b,p){if(c.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||J(b,ArrayBuffer))return b.byteLength;if(typeof b!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof b);const y=b.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&y===0)return 0;let V=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return u(b).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return C(b).length;default:if(V)return I?-1:u(b).length;p=(""+p).toLowerCase(),V=!0}}c.byteLength=v;function k(b,p,y){let I=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(b||(b="utf8");;)switch(b){case"hex":return se(this,p,y);case"utf8":case"utf-8":return z(this,p,y);case"ascii":return L(this,p,y);case"latin1":case"binary":return re(this,p,y);case"base64":return R(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,p,y);default:if(I)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase(),I=!0}}c.prototype._isBuffer=!0;function N(b,p,y){const I=b[p];b[p]=b[y],b[y]=I}c.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<p;y+=2)N(this,y,y+1);return this},c.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<p;y+=4)N(this,y,y+3),N(this,y+1,y+2);return this},c.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<p;y+=8)N(this,y,y+7),N(this,y+1,y+6),N(this,y+2,y+5),N(this,y+3,y+4);return this},c.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?z(this,0,p):k.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(p){if(!c.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:c.compare(this,p)===0},c.prototype.inspect=function(){let p="";const y=t.INSPECT_MAX_BYTES;return p=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(p+=" ... "),"<Buffer "+p+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(p,y,I,V,Q){if(J(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(y===void 0&&(y=0),I===void 0&&(I=p?p.length:0),V===void 0&&(V=0),Q===void 0&&(Q=this.length),y<0||I>p.length||V<0||Q>this.length)throw new RangeError("out of range index");if(V>=Q&&y>=I)return 0;if(V>=Q)return-1;if(y>=I)return 1;if(y>>>=0,I>>>=0,V>>>=0,Q>>>=0,this===p)return 0;let Z=Q-V,Se=I-y;const De=Math.min(Z,Se),_e=this.slice(V,Q),ve=p.slice(y,I);for(let Ue=0;Ue<De;++Ue)if(_e[Ue]!==ve[Ue]){Z=_e[Ue],Se=ve[Ue];break}return Z<Se?-1:Se<Z?1:0};function M(b,p,y,I,V){if(b.length===0)return-1;if(typeof y=="string"?(I=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ue(y)&&(y=V?0:b.length-1),y<0&&(y=b.length+y),y>=b.length){if(V)return-1;y=b.length-1}else if(y<0)if(V)y=0;else return-1;if(typeof p=="string"&&(p=c.from(p,I)),c.isBuffer(p))return p.length===0?-1:P(b,p,y,I,V);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(b,p,y):Uint8Array.prototype.lastIndexOf.call(b,p,y):P(b,[p],y,I,V);throw new TypeError("val must be string, number or Buffer")}function P(b,p,y,I,V){let Q=1,Z=b.length,Se=p.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(b.length<2||p.length<2)return-1;Q=2,Z/=2,Se/=2,y/=2}function De(ve,Ue){return Q===1?ve[Ue]:ve.readUInt16BE(Ue*Q)}let _e;if(V){let ve=-1;for(_e=y;_e<Z;_e++)if(De(b,_e)===De(p,ve===-1?0:_e-ve)){if(ve===-1&&(ve=_e),_e-ve+1===Se)return ve*Q}else ve!==-1&&(_e-=_e-ve),ve=-1}else for(y+Se>Z&&(y=Z-Se),_e=y;_e>=0;_e--){let ve=!0;for(let Ue=0;Ue<Se;Ue++)if(De(b,_e+Ue)!==De(p,Ue)){ve=!1;break}if(ve)return _e}return-1}c.prototype.includes=function(p,y,I){return this.indexOf(p,y,I)!==-1},c.prototype.indexOf=function(p,y,I){return M(this,p,y,I,!0)},c.prototype.lastIndexOf=function(p,y,I){return M(this,p,y,I,!1)};function j(b,p,y,I){y=Number(y)||0;const V=b.length-y;I?(I=Number(I),I>V&&(I=V)):I=V;const Q=p.length;I>Q/2&&(I=Q/2);let Z;for(Z=0;Z<I;++Z){const Se=parseInt(p.substr(Z*2,2),16);if(ue(Se))return Z;b[y+Z]=Se}return Z}function K(b,p,y,I){return O(u(p,b.length-y),b,y,I)}function W(b,p,y,I){return O(h(p),b,y,I)}function ae(b,p,y,I){return O(C(p),b,y,I)}function he(b,p,y,I){return O(S(p,b.length-y),b,y,I)}c.prototype.write=function(p,y,I,V){if(y===void 0)V="utf8",I=this.length,y=0;else if(I===void 0&&typeof y=="string")V=y,I=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(I)?(I=I>>>0,V===void 0&&(V="utf8")):(V=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Q=this.length-y;if((I===void 0||I>Q)&&(I=Q),p.length>0&&(I<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");let Z=!1;for(;;)switch(V){case"hex":return j(this,p,y,I);case"utf8":case"utf-8":return K(this,p,y,I);case"ascii":case"latin1":case"binary":return W(this,p,y,I);case"base64":return ae(this,p,y,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,p,y,I);default:if(Z)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),Z=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(b,p,y){return p===0&&y===b.length?e.fromByteArray(b):e.fromByteArray(b.slice(p,y))}function z(b,p,y){y=Math.min(b.length,y);const I=[];let V=p;for(;V<y;){const Q=b[V];let Z=null,Se=Q>239?4:Q>223?3:Q>191?2:1;if(V+Se<=y){let De,_e,ve,Ue;switch(Se){case 1:Q<128&&(Z=Q);break;case 2:De=b[V+1],(De&192)===128&&(Ue=(Q&31)<<6|De&63,Ue>127&&(Z=Ue));break;case 3:De=b[V+1],_e=b[V+2],(De&192)===128&&(_e&192)===128&&(Ue=(Q&15)<<12|(De&63)<<6|_e&63,Ue>2047&&(Ue<55296||Ue>57343)&&(Z=Ue));break;case 4:De=b[V+1],_e=b[V+2],ve=b[V+3],(De&192)===128&&(_e&192)===128&&(ve&192)===128&&(Ue=(Q&15)<<18|(De&63)<<12|(_e&63)<<6|ve&63,Ue>65535&&Ue<1114112&&(Z=Ue))}}Z===null?(Z=65533,Se=1):Z>65535&&(Z-=65536,I.push(Z>>>10&1023|55296),Z=56320|Z&1023),I.push(Z),V+=Se}return Y(I)}const X=4096;function Y(b){const p=b.length;if(p<=X)return String.fromCharCode.apply(String,b);let y="",I=0;for(;I<p;)y+=String.fromCharCode.apply(String,b.slice(I,I+=X));return y}function L(b,p,y){let I="";y=Math.min(b.length,y);for(let V=p;V<y;++V)I+=String.fromCharCode(b[V]&127);return I}function re(b,p,y){let I="";y=Math.min(b.length,y);for(let V=p;V<y;++V)I+=String.fromCharCode(b[V]);return I}function se(b,p,y){const I=b.length;(!p||p<0)&&(p=0),(!y||y<0||y>I)&&(y=I);let V="";for(let Q=p;Q<y;++Q)V+=ge[b[Q]];return V}function me(b,p,y){const I=b.slice(p,y);let V="";for(let Q=0;Q<I.length-1;Q+=2)V+=String.fromCharCode(I[Q]+I[Q+1]*256);return V}c.prototype.slice=function(p,y){const I=this.length;p=~~p,y=y===void 0?I:~~y,p<0?(p+=I,p<0&&(p=0)):p>I&&(p=I),y<0?(y+=I,y<0&&(y=0)):y>I&&(y=I),y<p&&(y=p);const V=this.subarray(p,y);return Object.setPrototypeOf(V,c.prototype),V};function oe(b,p,y){if(b%1!==0||b<0)throw new RangeError("offset is not uint");if(b+p>y)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(p,y,I){p=p>>>0,y=y>>>0,I||oe(p,y,this.length);let V=this[p],Q=1,Z=0;for(;++Z<y&&(Q*=256);)V+=this[p+Z]*Q;return V},c.prototype.readUintBE=c.prototype.readUIntBE=function(p,y,I){p=p>>>0,y=y>>>0,I||oe(p,y,this.length);let V=this[p+--y],Q=1;for(;y>0&&(Q*=256);)V+=this[p+--y]*Q;return V},c.prototype.readUint8=c.prototype.readUInt8=function(p,y){return p=p>>>0,y||oe(p,1,this.length),this[p]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(p,y){return p=p>>>0,y||oe(p,2,this.length),this[p]|this[p+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(p,y){return p=p>>>0,y||oe(p,2,this.length),this[p]<<8|this[p+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(p,y){return p=p>>>0,y||oe(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(p,y){return p=p>>>0,y||oe(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},c.prototype.readBigUInt64LE=we(function(p){p=p>>>0,H(p,"offset");const y=this[p],I=this[p+7];(y===void 0||I===void 0)&&q(p,this.length-8);const V=y+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,Q=this[++p]+this[++p]*2**8+this[++p]*2**16+I*2**24;return BigInt(V)+(BigInt(Q)<<BigInt(32))}),c.prototype.readBigUInt64BE=we(function(p){p=p>>>0,H(p,"offset");const y=this[p],I=this[p+7];(y===void 0||I===void 0)&&q(p,this.length-8);const V=y*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],Q=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+I;return(BigInt(V)<<BigInt(32))+BigInt(Q)}),c.prototype.readIntLE=function(p,y,I){p=p>>>0,y=y>>>0,I||oe(p,y,this.length);let V=this[p],Q=1,Z=0;for(;++Z<y&&(Q*=256);)V+=this[p+Z]*Q;return Q*=128,V>=Q&&(V-=Math.pow(2,8*y)),V},c.prototype.readIntBE=function(p,y,I){p=p>>>0,y=y>>>0,I||oe(p,y,this.length);let V=y,Q=1,Z=this[p+--V];for(;V>0&&(Q*=256);)Z+=this[p+--V]*Q;return Q*=128,Z>=Q&&(Z-=Math.pow(2,8*y)),Z},c.prototype.readInt8=function(p,y){return p=p>>>0,y||oe(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},c.prototype.readInt16LE=function(p,y){p=p>>>0,y||oe(p,2,this.length);const I=this[p]|this[p+1]<<8;return I&32768?I|4294901760:I},c.prototype.readInt16BE=function(p,y){p=p>>>0,y||oe(p,2,this.length);const I=this[p+1]|this[p]<<8;return I&32768?I|4294901760:I},c.prototype.readInt32LE=function(p,y){return p=p>>>0,y||oe(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},c.prototype.readInt32BE=function(p,y){return p=p>>>0,y||oe(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},c.prototype.readBigInt64LE=we(function(p){p=p>>>0,H(p,"offset");const y=this[p],I=this[p+7];(y===void 0||I===void 0)&&q(p,this.length-8);const V=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(I<<24);return(BigInt(V)<<BigInt(32))+BigInt(y+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),c.prototype.readBigInt64BE=we(function(p){p=p>>>0,H(p,"offset");const y=this[p],I=this[p+7];(y===void 0||I===void 0)&&q(p,this.length-8);const V=(y<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(V)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+I)}),c.prototype.readFloatLE=function(p,y){return p=p>>>0,y||oe(p,4,this.length),r.read(this,p,!0,23,4)},c.prototype.readFloatBE=function(p,y){return p=p>>>0,y||oe(p,4,this.length),r.read(this,p,!1,23,4)},c.prototype.readDoubleLE=function(p,y){return p=p>>>0,y||oe(p,8,this.length),r.read(this,p,!0,52,8)},c.prototype.readDoubleBE=function(p,y){return p=p>>>0,y||oe(p,8,this.length),r.read(this,p,!1,52,8)};function le(b,p,y,I,V,Q){if(!c.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>V||p<Q)throw new RangeError('"value" argument is out of bounds');if(y+I>b.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(p,y,I,V){if(p=+p,y=y>>>0,I=I>>>0,!V){const Se=Math.pow(2,8*I)-1;le(this,p,y,I,Se,0)}let Q=1,Z=0;for(this[y]=p&255;++Z<I&&(Q*=256);)this[y+Z]=p/Q&255;return y+I},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(p,y,I,V){if(p=+p,y=y>>>0,I=I>>>0,!V){const Se=Math.pow(2,8*I)-1;le(this,p,y,I,Se,0)}let Q=I-1,Z=1;for(this[y+Q]=p&255;--Q>=0&&(Z*=256);)this[y+Q]=p/Z&255;return y+I},c.prototype.writeUint8=c.prototype.writeUInt8=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,1,255,0),this[y]=p&255,y+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,2,65535,0),this[y]=p&255,this[y+1]=p>>>8,y+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,2,65535,0),this[y]=p>>>8,this[y+1]=p&255,y+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,4,4294967295,0),this[y+3]=p>>>24,this[y+2]=p>>>16,this[y+1]=p>>>8,this[y]=p&255,y+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,4,4294967295,0),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4};function ne(b,p,y,I,V){U(p,I,V,b,y,7);let Q=Number(p&BigInt(4294967295));b[y++]=Q,Q=Q>>8,b[y++]=Q,Q=Q>>8,b[y++]=Q,Q=Q>>8,b[y++]=Q;let Z=Number(p>>BigInt(32)&BigInt(4294967295));return b[y++]=Z,Z=Z>>8,b[y++]=Z,Z=Z>>8,b[y++]=Z,Z=Z>>8,b[y++]=Z,y}function _(b,p,y,I,V){U(p,I,V,b,y,7);let Q=Number(p&BigInt(4294967295));b[y+7]=Q,Q=Q>>8,b[y+6]=Q,Q=Q>>8,b[y+5]=Q,Q=Q>>8,b[y+4]=Q;let Z=Number(p>>BigInt(32)&BigInt(4294967295));return b[y+3]=Z,Z=Z>>8,b[y+2]=Z,Z=Z>>8,b[y+1]=Z,Z=Z>>8,b[y]=Z,y+8}c.prototype.writeBigUInt64LE=we(function(p,y=0){return ne(this,p,y,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=we(function(p,y=0){return _(this,p,y,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(p,y,I,V){if(p=+p,y=y>>>0,!V){const De=Math.pow(2,8*I-1);le(this,p,y,I,De-1,-De)}let Q=0,Z=1,Se=0;for(this[y]=p&255;++Q<I&&(Z*=256);)p<0&&Se===0&&this[y+Q-1]!==0&&(Se=1),this[y+Q]=(p/Z>>0)-Se&255;return y+I},c.prototype.writeIntBE=function(p,y,I,V){if(p=+p,y=y>>>0,!V){const De=Math.pow(2,8*I-1);le(this,p,y,I,De-1,-De)}let Q=I-1,Z=1,Se=0;for(this[y+Q]=p&255;--Q>=0&&(Z*=256);)p<0&&Se===0&&this[y+Q+1]!==0&&(Se=1),this[y+Q]=(p/Z>>0)-Se&255;return y+I},c.prototype.writeInt8=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,1,127,-128),p<0&&(p=255+p+1),this[y]=p&255,y+1},c.prototype.writeInt16LE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,2,32767,-32768),this[y]=p&255,this[y+1]=p>>>8,y+2},c.prototype.writeInt16BE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,2,32767,-32768),this[y]=p>>>8,this[y+1]=p&255,y+2},c.prototype.writeInt32LE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,4,2147483647,-2147483648),this[y]=p&255,this[y+1]=p>>>8,this[y+2]=p>>>16,this[y+3]=p>>>24,y+4},c.prototype.writeInt32BE=function(p,y,I){return p=+p,y=y>>>0,I||le(this,p,y,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4},c.prototype.writeBigInt64LE=we(function(p,y=0){return ne(this,p,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=we(function(p,y=0){return _(this,p,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(b,p,y,I,V,Q){if(y+I>b.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function pe(b,p,y,I,V){return p=+p,y=y>>>0,V||ce(b,p,y,4),r.write(b,p,y,I,23,4),y+4}c.prototype.writeFloatLE=function(p,y,I){return pe(this,p,y,!0,I)},c.prototype.writeFloatBE=function(p,y,I){return pe(this,p,y,!1,I)};function ye(b,p,y,I,V){return p=+p,y=y>>>0,V||ce(b,p,y,8),r.write(b,p,y,I,52,8),y+8}c.prototype.writeDoubleLE=function(p,y,I){return ye(this,p,y,!0,I)},c.prototype.writeDoubleBE=function(p,y,I){return ye(this,p,y,!1,I)},c.prototype.copy=function(p,y,I,V){if(!c.isBuffer(p))throw new TypeError("argument should be a Buffer");if(I||(I=0),!V&&V!==0&&(V=this.length),y>=p.length&&(y=p.length),y||(y=0),V>0&&V<I&&(V=I),V===I||p.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),p.length-y<V-I&&(V=p.length-y+I);const Q=V-I;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,I,V):Uint8Array.prototype.set.call(p,this.subarray(I,V),y),Q},c.prototype.fill=function(p,y,I,V){if(typeof p=="string"){if(typeof y=="string"?(V=y,y=0,I=this.length):typeof I=="string"&&(V=I,I=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!c.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(p.length===1){const Z=p.charCodeAt(0);(V==="utf8"&&Z<128||V==="latin1")&&(p=Z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(y<0||this.length<y||this.length<I)throw new RangeError("Out of range index");if(I<=y)return this;y=y>>>0,I=I===void 0?this.length:I>>>0,p||(p=0);let Q;if(typeof p=="number")for(Q=y;Q<I;++Q)this[Q]=p;else{const Z=c.isBuffer(p)?p:c.from(p,V),Se=Z.length;if(Se===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(Q=0;Q<I-y;++Q)this[Q+y]=Z[Q%Se]}return this};const ie={};function de(b,p,y){ie[b]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${b}]`,this.stack,delete this.name}get code(){return b}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${b}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(b){return b?`${b} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(b,p){return`The "${b}" argument must be of type number. Received type ${typeof p}`},TypeError),de("ERR_OUT_OF_RANGE",function(b,p,y){let I=`The value of "${b}" is out of range.`,V=y;return Number.isInteger(y)&&Math.abs(y)>2**32?V=F(String(y)):typeof y=="bigint"&&(V=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(V=F(V)),V+="n"),I+=` It must be ${p}. Received ${V}`,I},RangeError);function F(b){let p="",y=b.length;const I=b[0]==="-"?1:0;for(;y>=I+4;y-=3)p=`_${b.slice(y-3,y)}${p}`;return`${b.slice(0,y)}${p}`}function T(b,p,y){H(p,"offset"),(b[p]===void 0||b[p+y]===void 0)&&q(p,b.length-(y+1))}function U(b,p,y,I,V,Q){if(b>y||b<p){const Z=typeof p=="bigint"?"n":"";let Se;throw p===0||p===BigInt(0)?Se=`>= 0${Z} and < 2${Z} ** ${(Q+1)*8}${Z}`:Se=`>= -(2${Z} ** ${(Q+1)*8-1}${Z}) and < 2 ** ${(Q+1)*8-1}${Z}`,new ie.ERR_OUT_OF_RANGE("value",Se,b)}T(I,V,Q)}function H(b,p){if(typeof b!="number")throw new ie.ERR_INVALID_ARG_TYPE(p,"number",b)}function q(b,p,y){throw Math.floor(b)!==b?(H(b,y),new ie.ERR_OUT_OF_RANGE("offset","an integer",b)):p<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${p}`,b)}const G=/[^+/0-9A-Za-z-_]/g;function w(b){if(b=b.split("=")[0],b=b.trim().replace(G,""),b.length<2)return"";for(;b.length%4!==0;)b=b+"=";return b}function u(b,p){p=p||1/0;let y;const I=b.length;let V=null;const Q=[];for(let Z=0;Z<I;++Z){if(y=b.charCodeAt(Z),y>55295&&y<57344){if(!V){if(y>56319){(p-=3)>-1&&Q.push(239,191,189);continue}else if(Z+1===I){(p-=3)>-1&&Q.push(239,191,189);continue}V=y;continue}if(y<56320){(p-=3)>-1&&Q.push(239,191,189),V=y;continue}y=(V-55296<<10|y-56320)+65536}else V&&(p-=3)>-1&&Q.push(239,191,189);if(V=null,y<128){if((p-=1)<0)break;Q.push(y)}else if(y<2048){if((p-=2)<0)break;Q.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;Q.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;Q.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return Q}function h(b){const p=[];for(let y=0;y<b.length;++y)p.push(b.charCodeAt(y)&255);return p}function S(b,p){let y,I,V;const Q=[];for(let Z=0;Z<b.length&&!((p-=2)<0);++Z)y=b.charCodeAt(Z),I=y>>8,V=y%256,Q.push(V),Q.push(I);return Q}function C(b){return e.toByteArray(w(b))}function O(b,p,y,I){let V;for(V=0;V<I&&!(V+y>=p.length||V>=b.length);++V)p[V+y]=b[V];return V}function J(b,p){return b instanceof p||b!=null&&b.constructor!=null&&b.constructor.name!=null&&b.constructor.name===p.name}function ue(b){return b!==b}const ge=function(){const b="0123456789abcdef",p=new Array(256);for(let y=0;y<16;++y){const I=y*16;for(let V=0;V<16;++V)p[I+V]=b[y]+b[V]}return p}();function we(b){return typeof BigInt>"u"?Be:b}function Be(){throw new Error("BigInt not supported")}})(ga);var Vi;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(Vi||(Vi={}));const jc="modulepreload",Kc=function(t){return"/"+t},Ds={},Lc=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),c=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));i=Promise.allSettled(r.map(m=>{if(m=Kc(m),m in Ds)return;Ds[m]=!0;const A=m.endsWith(".css"),B=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${B}`))return;const D=document.createElement("link");if(D.rel=A?"stylesheet":jc,A||(D.as="script"),D.crossOrigin="",D.href=m,c&&D.setAttribute("nonce",c),document.head.appendChild(D),A)return new Promise((g,E)=>{D.addEventListener("load",g),D.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(f){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=f,window.dispatchEvent(c),!c.defaultPrevented)throw f}return i.then(f=>{for(const c of f||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},ii="abcdefghijklmnopqrstuvwxyz234567",Vr=Object.create(null);for(let t=0;t<ii.length;t++)Vr[ii[t]]=t;Vr[0]=Vr.o;Vr[1]=Vr.i;function Jc(t){let e=0,r=0,n="";function i(s){return e<0?r|=s>>-e:r=s<<e&248,e>3?(e-=8,1):(e<4&&(n+=ii[r>>3],e+=5),0)}for(let s=0;s<t.length;)s+=i(t[s]);return n+(e<0?ii[r>>3]:"")}function Wc(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function s(f){let c=Vr[f.toLowerCase()];if(c===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);c<<=3,r|=c>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=c<<5-e&255:r=0)}for(const f of t)s(f);return n.slice(0,i)}const Yc=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Zc(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const s=(e[n]^r)&255;r=Yc[s]^r>>>8}return(r^-1)>>>0}function Qc(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ea(t,...e){if(!Qc(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Fs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eu(t,e){Ea(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Tr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _i(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function It(t,e){return t<<32-e|t>>>e}function tu(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ba(t){return typeof t=="string"&&(t=tu(t)),Ea(t),t}class ru{clone(){return this._cloneInto()}}function os(t){const e=n=>t().update(ba(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function va(t=32){if(Tr&&typeof Tr.getRandomValues=="function")return Tr.getRandomValues(new Uint8Array(t));if(Tr&&typeof Tr.randomBytes=="function")return Tr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function nu(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),f=Number(r>>i&s),c=Number(r&s),m=n?4:0,A=n?0:4;t.setUint32(e+m,f,n),t.setUint32(e+A,c,n)}function iu(t,e,r){return t&e^~t&r}function su(t,e,r){return t&e^t&r^e&r}class Aa extends ru{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_i(this.buffer)}update(e){Fs(this);const{view:r,buffer:n,blockLen:i}=this;e=ba(e);const s=e.length;for(let f=0;f<s;){const c=Math.min(i-this.pos,s-f);if(c===i){const m=_i(e);for(;i<=s-f;f+=i)this.process(m,f);continue}n.set(e.subarray(f,f+c),this.pos),this.pos+=c,f+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fs(this),eu(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:f}=this;r[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>i-f&&(this.process(n,0),f=0);for(let D=f;D<i;D++)r[D]=0;nu(n,i-8,BigInt(this.length*8),s),this.process(n,0);const c=_i(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=m/4,B=this.get();if(A>B.length)throw new Error("_sha2: outputLen bigger than state");for(let D=0;D<A;D++)c.setUint32(4*D,B[D],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:f,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=f,i%r&&e.buffer.set(n),e}}const au=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qt=new Uint32Array(64);class Sa extends Aa{constructor(){super(64,32,8,!1),this.A=Zt[0]|0,this.B=Zt[1]|0,this.C=Zt[2]|0,this.D=Zt[3]|0,this.E=Zt[4]|0,this.F=Zt[5]|0,this.G=Zt[6]|0,this.H=Zt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:f,G:c,H:m}=this;return[e,r,n,i,s,f,c,m]}set(e,r,n,i,s,f,c,m){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=f|0,this.G=c|0,this.H=m|0}process(e,r){for(let D=0;D<16;D++,r+=4)Qt[D]=e.getUint32(r,!1);for(let D=16;D<64;D++){const g=Qt[D-15],E=Qt[D-2],l=It(g,7)^It(g,18)^g>>>3,a=It(E,17)^It(E,19)^E>>>10;Qt[D]=a+Qt[D-7]+l+Qt[D-16]|0}let{A:n,B:i,C:s,D:f,E:c,F:m,G:A,H:B}=this;for(let D=0;D<64;D++){const g=It(c,6)^It(c,11)^It(c,25),E=B+g+iu(c,m,A)+au[D]+Qt[D]|0,a=(It(n,2)^It(n,13)^It(n,22))+su(n,i,s)|0;B=A,A=m,m=c,c=f+E|0,f=s,s=i,i=n,n=E+a|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,f=f+this.D|0,c=c+this.E|0,m=m+this.F|0,A=A+this.G|0,B=B+this.H|0,this.set(n,i,s,f,c,m,A,B)}roundClean(){Qt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class ou extends Sa{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const cs=os(()=>new Sa),cu=os(()=>new ou);function uu(t){return cu.create().update(new Uint8Array(t)).digest()}const An="__principal__",lu=2,Cs=4,hu="aaaaa-aa",fu=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},du=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let Ce=class Mn{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([Cs]))}static managementCanister(){return this.fromHex(hu)}static selfAuthenticating(e){const r=uu(e);return new this(new Uint8Array([...r,lu]))}static from(e){if(typeof e=="string")return Mn.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new Mn(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new Mn(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(fu(e))}static fromText(e){let r=e;if(e.includes(An)){const f=JSON.parse(e);An in f&&(r=f[An])}const n=r.toLowerCase().replace(/-/g,"");let i=Wc(n);i=i.slice(4,i.length);const s=new this(i);if(s.toText()!==r)throw new Error(`Principal "${s.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return s}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Cs}toUint8Array(){return this._arr}toHex(){return du(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,Zc(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),s=new Uint8Array([...n,...i]),c=Jc(s).match(/.{1,5}/g);if(!c)throw new Error;return c.join("-")}toString(){return this.toText()}toJSON(){return{[An]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function Vt(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function tt(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const pu=new RegExp(/^[0-9a-fA-F]+$/);function si(t){if(!pu.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function Ba(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function pi(t,e){return Ba(t,e)===0}function Pn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function _a(t){return t instanceof Uint8Array?Pn(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Pn(new Uint8Array(t)):"buffer"in t?_a(t.buffer):Pn(new Uint8Array(t))}class He extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=He.prototype,Object.setPrototypeOf(this,He.prototype)}}function Re(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class jr{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=ai(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return ai(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function Di(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function ai(t){return t instanceof Uint8Array?Di(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Di(new Uint8Array(t)):"buffer"in t?ai(t.buffer):Di(new Uint8Array(t))}function mu(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function qt(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return mu(t)}function Da(){throw new Error("unexpected end of buffer")}function Sr(t,e){return t.byteLength<e&&Da(),t.read(e)}function Br(t){const e=t.readUint8();return e===void 0&&Da(),e}function Ge(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new jr(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Qe(t){let e=BigInt(1),r=BigInt(0),n;do n=Br(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function We(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new jr(new ArrayBuffer(r),0);for(;;){const s=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&s&64||!e&&t===BigInt(0)&&!(s&64)){n.write(new Uint8Array([s]));break}else n.write(new Uint8Array([s|128]))}function i(s){const f=s%BigInt(128);return Number(e?BigInt(128)-f-BigInt(1):f)}return n.buffer}function nr(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Qe(t);break}const n=new Uint8Array(Sr(t,r+1));let i=BigInt(0);for(let s=n.byteLength-1;s>=0;s--)i=i*BigInt(128)+BigInt(128-(n[s]&127)-1);return-i-BigInt(1)}function yu(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Fa(t,e)}function Fa(t,e){t=BigInt(t);const r=new jr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),s=BigInt(0),f=Number(t%i);for(r.write(new Uint8Array([f]));++n<e;)t<0&&s===BigInt(0)&&f!==0&&(s=BigInt(1)),f=Number((t/i-s)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function Ca(t,e){let r=BigInt(Br(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const s=BigInt(Br(t));r=r+n*s}return r}function xu(t,e){let r=Ca(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function Hi(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const zn="DIDL",Ts=400;function cn(t,e,r){return t.map((n,i)=>r(n,e[i]))}class gu{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=Ge(this._typs.length),r=Re(...this._typs);return Re(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return We(this._idx.get(e)||0)}}class wu{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((s,f)=>[`_${f}_`,s]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class mi{display(){return this.name}valueToString(e){return je(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class bt extends mi{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class hr extends mi{checkType(e){if(e instanceof fr){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class Ta extends bt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return We(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Na extends mi{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof fr?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class ka extends bt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return We(-2)}decodeValue(e,r){switch(this.checkType(r),Br(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Ia extends bt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return We(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class oi extends bt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return We(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Ua extends bt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=Ge(r.byteLength);return Re(n,r)}encodeType(){return We(-15)}decodeValue(e,r){this.checkType(r);const n=Qe(e),i=Sr(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class Ra extends bt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){return We(e)}encodeType(){return We(-4)}decodeValue(e,r){return this.checkType(r),nr(e)}get name(){return"int"}valueToString(e){return e.toString()}}class Oa extends bt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){return Ge(e)}encodeType(){return We(-3)}decodeValue(e,r){return this.checkType(r),Qe(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class us extends bt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return We(e)}decodeValue(e,r){this.checkType(r);const n=Sr(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class _r extends bt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=Hi(this._bits-1)*BigInt(-1),n=Hi(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const s=BigInt(e);i=s>=r&&s<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){return Fa(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return We(-9-e)}decodeValue(e,r){this.checkType(r);const n=xu(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class cr extends bt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=Hi(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){return yu(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return We(-5-e)}decodeValue(e,r){this.checkType(r);const n=Ca(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class yi extends hr{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof cr&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof cr?this._type._bits:this._type instanceof _r?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(s){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${s.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=Ge(e.length);if(this._blobOptimization)return Re(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Re(r,new Uint8Array(e.buffer));const n=new jr(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const s=this._type.encodeValue(i);n.write(new Uint8Array(s))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=We(-19),n=this._type.encodeType(e);e.add(this,Re(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof yi))throw new Error("Not a vector type");const i=Number(Qe(e));if(this._type instanceof cr){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof _r){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const s=[];for(let f=0;f<i;f++)s.push(this._type.decodeValue(e,n._type));return s}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class Hr extends hr{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${je(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Re(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=We(-18),n=this._type.encodeType(e);e.add(this,Re(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof Hr))throw new Error("Not an option type");switch(Br(e)){case 0:return[];case 1:return[this._type.decodeValue(e,n._type)];default:throw new Error("Not an option value")}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class pn extends hr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>qt(r[0])-qt(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=cn(this._fields,r,([,i],s)=>i.encodeValue(s));return Re(...n)}_buildTypeTableImpl(e){this._fields.forEach(([s,f])=>f.buildTypeTable(e));const r=We(-20),n=Ge(this._fields.length),i=this._fields.map(([s,f])=>Re(Ge(qt(s)),f.encodeType(e)));e.add(this,Re(r,n,Re(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof pn))throw new Error("Not a record type");const i={};let s=0,f=0;for(;f<n._fields.length;){const[c,m]=n._fields[f];if(s>=this._fields.length){m.decodeValue(e,m),f++;continue}const[A,B]=this._fields[s],D=qt(this._fields[s][0]),g=qt(c);if(D===g)i[A]=B.decodeValue(e,m),s++,f++;else if(g>D)if(B instanceof Hr||B instanceof oi)i[A]=[],s++;else throw new Error("Cannot find required field "+A);else m.decodeValue(e,m),f++}for(const[c,m]of this._fields.slice(s))if(m instanceof Hr||m instanceof oi)i[c]=[];else throw new Error("Cannot find required field "+c);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${cn(this._fields,r,([i,s],f)=>i+"="+s.valueToString(f)).join("; ")}}`}}class xi extends pn{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=cn(this._components,e,(n,i)=>n.encodeValue(i));return Re(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof xi))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[s,f]of n._components.entries())s>=this._components.length?f.decodeValue(e,f):i.push(this._components[s].decodeValue(e,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${cn(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class gi extends hr{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>qt(r[0])-qt(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const s=Ge(r),f=i.encodeValue(e[n]);return Re(s,f)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,s])=>{s.buildTypeTable(e)});const r=We(-21),n=Ge(this._fields.length),i=this._fields.map(([s,f])=>Re(Ge(qt(s)),f.encodeType(e)));e.add(this,Re(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof gi))throw new Error("Not a variant type");const i=Number(Qe(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[s,f]=n._fields[i];for(const[c,m]of this._fields)if(qt(s)===qt(c)){const A=m.decodeValue(e,f);return{[c]:A}}throw new Error("Cannot find field hash "+s)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class fr extends hr{constructor(){super(...arguments),this._id=fr._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}fr._counter=0;function ls(t){if(Br(t)!==1)throw new Error("Cannot decode principal");const r=Number(Qe(t));return Ce.fromUint8Array(new Uint8Array(Sr(t,r)))}class Ma extends bt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=Ge(r.byteLength);return Re(new Uint8Array([1]),n,r)}encodeType(){return We(-24)}decodeValue(e,r){return this.checkType(r),ls(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class hs extends hr{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=Ge(n.byteLength),s=Re(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),c=Ge(f.byteLength);return Re(new Uint8Array([1]),s,c,f)}_buildTypeTableImpl(e){this.argTypes.forEach(A=>A.buildTypeTable(e)),this.retTypes.forEach(A=>A.buildTypeTable(e));const r=We(-22),n=Ge(this.argTypes.length),i=Re(...this.argTypes.map(A=>A.encodeType(e))),s=Ge(this.retTypes.length),f=Re(...this.retTypes.map(A=>A.encodeType(e))),c=Ge(this.annotations.length),m=Re(...this.annotations.map(A=>this.encodeAnnotation(A)));e.add(this,Re(r,n,i,s,f,c,m))}decodeValue(e){if(Br(e)!==1)throw new Error("Cannot decode function reference");const n=ls(e),i=Number(Qe(e)),s=Sr(e,i),c=new TextDecoder("utf8",{fatal:!0}).decode(s);return[n,c]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e})  (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Pa extends hr{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${je(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=Ge(r.length);return Re(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([s,f])=>f.buildTypeTable(e));const r=We(-23),n=Ge(this._fields.length),i=this._fields.map(([s,f])=>{const c=new TextEncoder().encode(s),m=Ge(c.length);return Re(m,c,f.encodeType(e))});e.add(this,Re(r,n,...i))}decodeValue(e){return ls(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function je(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>Ts?e.substring(0,Ts-3)+"...":e}function Gi(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new gu;t.forEach(m=>m.buildTypeTable(r));const n=new TextEncoder().encode(zn),i=r.encode(),s=Ge(e.length),f=Re(...t.map(m=>m.encodeType(r))),c=Re(...cn(t,e,(m,A)=>{try{m.covariant(A)}catch(B){throw new Error(B.message+`

`)}return m.encodeValue(A)}));return Re(n,i,s,f,c)}function za(t,e){const r=new jr(e);if(e.byteLength<zn.length)throw new Error("Message length smaller than magic number");const n=Sr(r,zn.length),i=new TextDecoder().decode(n);if(i!==zn)throw new Error("Wrong magic number: "+JSON.stringify(i));function s(E){const l=[],a=Number(Qe(E));for(let x=0;x<a;x++){const v=Number(nr(E));switch(v){case-18:case-19:{const k=Number(nr(E));l.push([v,k]);break}case-20:case-21:{const k=[];let N=Number(Qe(E)),M;for(;N--;){const P=Number(Qe(E));if(P>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof M=="number"&&M>=P)throw new Error("field id collision or not sorted");M=P;const j=Number(nr(E));k.push([P,j])}l.push([v,k]);break}case-22:{const k=[];let N=Number(Qe(E));for(;N--;)k.push(Number(nr(E)));const M=[];let P=Number(Qe(E));for(;P--;)M.push(Number(nr(E)));const j=[];let K=Number(Qe(E));for(;K--;)switch(Number(Qe(E))){case 1:{j.push("query");break}case 2:{j.push("oneway");break}case 3:{j.push("composite_query");break}default:throw new Error("unknown annotation")}l.push([v,[k,M,j]]);break}case-23:{let k=Number(Qe(E));const N=[];for(;k--;){const M=Number(Qe(E)),P=new TextDecoder().decode(Sr(E,M)),j=nr(E);N.push([P,j])}l.push([v,N]);break}default:throw new Error("Illegal op_code: "+v)}}const o=[],d=Number(Qe(E));for(let x=0;x<d;x++)o.push(Number(nr(E)));return[l,o]}const[f,c]=s(r);if(c.length<t.length)throw new Error("Wrong number of return values");const m=f.map(E=>uo());function A(E){if(E<-24)throw new Error("future value not supported");if(E<0)switch(E){case-1:return Ha;case-2:return Va;case-3:return ja;case-4:return Xa;case-5:return Qa;case-6:return eo;case-7:return to;case-8:return ro;case-9:return Ja;case-10:return Wa;case-11:return Ya;case-12:return Za;case-13:return Ka;case-14:return La;case-15:return Ga;case-16:return qa;case-17:return $a;case-24:return no;default:throw new Error("Illegal op_code: "+E)}if(E>=f.length)throw new Error("type index out of range");return m[E]}function B(E){switch(E[0]){case-19:{const l=A(E[1]);return so(l)}case-18:{const l=A(E[1]);return ao(l)}case-20:{const l={};for(const[d,x]of E[1]){const v=`_${d}_`;l[v]=A(x)}const a=oo(l),o=a.tryAsTuple();return Array.isArray(o)?io(...o):a}case-21:{const l={};for(const[a,o]of E[1]){const d=`_${a}_`;l[d]=A(o)}return co(l)}case-22:{const[l,a,o]=E[1];return lo(l.map(d=>A(d)),a.map(d=>A(d)),o)}case-23:{const l={},a=E[1];for(const[o,d]of a){let x=A(d);if(x instanceof fr&&(x=x.getType()),!(x instanceof hs))throw new Error("Illegal service definition: services can only contain functions");l[o]=x}return ho(l)}default:throw new Error("Illegal op_code: "+E[0])}}f.forEach((E,l)=>{if(E[0]===-22){const a=B(E);m[l].fill(a)}}),f.forEach((E,l)=>{if(E[0]!==-22){const a=B(E);m[l].fill(a)}});const D=c.map(E=>A(E)),g=t.map((E,l)=>E.decodeValue(r,D[l]));for(let E=t.length;E<D.length;E++)D[E].decodeValue(r,D[E]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return g}const $a=new Ta,qa=new oi,Eu=new Na,Va=new ka,Ha=new Ia,Ga=new Ua,Xa=new Ra,ja=new Oa,Ka=new us(32),La=new us(64),Ja=new _r(8),Wa=new _r(16),Ya=new _r(32),Za=new _r(64),Qa=new cr(8),eo=new cr(16),to=new cr(32),ro=new cr(64),no=new Ma;function io(...t){return new xi(t)}function so(t){return new yi(t)}function ao(t){return new Hr(t)}function oo(t){return new pn(t)}function co(t){return new gi(t)}function uo(){return new fr}function lo(t,e,r=[]){return new hs(t,e,r)}function ho(t){return new Pa(t)}const bu=Object.freeze(Object.defineProperty({__proto__:null,Bool:Va,BoolClass:ka,ConstructType:hr,Empty:$a,EmptyClass:Ta,FixedIntClass:_r,FixedNatClass:cr,Float32:Ka,Float64:La,FloatClass:us,Func:lo,FuncClass:hs,Int:Xa,Int16:Wa,Int32:Ya,Int64:Za,Int8:Ja,IntClass:Ra,Nat:ja,Nat16:eo,Nat32:to,Nat64:ro,Nat8:Qa,NatClass:Oa,Null:Ha,NullClass:Ia,Opt:ao,OptClass:Hr,PrimitiveType:bt,Principal:no,PrincipalClass:Ma,Rec:uo,RecClass:fr,Record:oo,RecordClass:pn,Reserved:qa,ReservedClass:oi,Service:ho,ServiceClass:Pa,Text:Ga,TextClass:Ua,Tuple:io,TupleClass:xi,Type:mi,Unknown:Eu,UnknownClass:Na,Variant:co,VariantClass:gi,Vec:so,VecClass:yi,Visitor:wu,decode:za,encode:Gi},Symbol.toStringTag,{value:"Module"}));var fo={},mn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=fn,r=dn,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var w=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(w,u),w.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function f(w){if(w>i)throw new RangeError('The value "'+w+'" is invalid for option "size"');var u=new Uint8Array(w);return Object.setPrototypeOf(u,c.prototype),u}function c(w,u,h){if(typeof w=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(w)}return m(w,u,h)}c.poolSize=8192;function m(w,u,h){if(typeof w=="string")return g(w,u);if(ArrayBuffer.isView(w))return l(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(H(w,ArrayBuffer)||w&&H(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(w,SharedArrayBuffer)||w&&H(w.buffer,SharedArrayBuffer)))return a(w,u,h);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var S=w.valueOf&&w.valueOf();if(S!=null&&S!==w)return c.from(S,u,h);var C=o(w);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return c.from(w[Symbol.toPrimitive]("string"),u,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}c.from=function(w,u,h){return m(w,u,h)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function A(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function B(w,u,h){return A(w),w<=0?f(w):u!==void 0?typeof h=="string"?f(w).fill(u,h):f(w).fill(u):f(w)}c.alloc=function(w,u,h){return B(w,u,h)};function D(w){return A(w),f(w<0?0:d(w)|0)}c.allocUnsafe=function(w){return D(w)},c.allocUnsafeSlow=function(w){return D(w)};function g(w,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);var h=v(w,u)|0,S=f(h),C=S.write(w,u);return C!==h&&(S=S.slice(0,C)),S}function E(w){for(var u=w.length<0?0:d(w.length)|0,h=f(u),S=0;S<u;S+=1)h[S]=w[S]&255;return h}function l(w){if(H(w,Uint8Array)){var u=new Uint8Array(w);return a(u.buffer,u.byteOffset,u.byteLength)}return E(w)}function a(w,u,h){if(u<0||w.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<u+(h||0))throw new RangeError('"length" is outside of buffer bounds');var S;return u===void 0&&h===void 0?S=new Uint8Array(w):h===void 0?S=new Uint8Array(w,u):S=new Uint8Array(w,u,h),Object.setPrototypeOf(S,c.prototype),S}function o(w){if(c.isBuffer(w)){var u=d(w.length)|0,h=f(u);return h.length===0||w.copy(h,0,0,u),h}if(w.length!==void 0)return typeof w.length!="number"||q(w.length)?f(0):E(w);if(w.type==="Buffer"&&Array.isArray(w.data))return E(w.data)}function d(w){if(w>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return w|0}function x(w){return+w!=w&&(w=0),c.alloc(+w)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,h){if(H(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),H(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(u)||!c.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;for(var S=u.length,C=h.length,O=0,J=Math.min(S,C);O<J;++O)if(u[O]!==h[O]){S=u[O],C=h[O];break}return S<C?-1:C<S?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);var S;if(h===void 0)for(h=0,S=0;S<u.length;++S)h+=u[S].length;var C=c.allocUnsafe(h),O=0;for(S=0;S<u.length;++S){var J=u[S];if(H(J,Uint8Array))O+J.length>C.length?c.from(J).copy(C,O):Uint8Array.prototype.set.call(C,J,O);else if(c.isBuffer(J))J.copy(C,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=J.length}return C};function v(w,u){if(c.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||H(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);var h=w.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&h===0)return 0;for(var C=!1;;)switch(u){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return ie(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return T(w).length;default:if(C)return S?-1:ie(w).length;u=(""+u).toLowerCase(),C=!0}}c.byteLength=v;function k(w,u,h){var S=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,u>>>=0,h<=u))return"";for(w||(w="utf8");;)switch(w){case"hex":return se(this,u,h);case"utf8":case"utf-8":return z(this,u,h);case"ascii":return L(this,u,h);case"latin1":case"binary":return re(this,u,h);case"base64":return R(this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,u,h);default:if(S)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),S=!0}}c.prototype._isBuffer=!0;function N(w,u,h){var S=w[u];w[u]=w[h],w[h]=S}c.prototype.swap16=function(){var u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<u;h+=2)N(this,h,h+1);return this},c.prototype.swap32=function(){var u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<u;h+=4)N(this,h,h+3),N(this,h+1,h+2);return this},c.prototype.swap64=function(){var u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<u;h+=8)N(this,h,h+7),N(this,h+1,h+6),N(this,h+2,h+5),N(this,h+3,h+4);return this},c.prototype.toString=function(){var u=this.length;return u===0?"":arguments.length===0?z(this,0,u):k.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){var u="",h=t.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(u,h,S,C,O){if(H(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),S===void 0&&(S=u?u.length:0),C===void 0&&(C=0),O===void 0&&(O=this.length),h<0||S>u.length||C<0||O>this.length)throw new RangeError("out of range index");if(C>=O&&h>=S)return 0;if(C>=O)return-1;if(h>=S)return 1;if(h>>>=0,S>>>=0,C>>>=0,O>>>=0,this===u)return 0;for(var J=O-C,ue=S-h,ge=Math.min(J,ue),we=this.slice(C,O),Be=u.slice(h,S),b=0;b<ge;++b)if(we[b]!==Be[b]){J=we[b],ue=Be[b];break}return J<ue?-1:ue<J?1:0};function M(w,u,h,S,C){if(w.length===0)return-1;if(typeof h=="string"?(S=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,q(h)&&(h=C?0:w.length-1),h<0&&(h=w.length+h),h>=w.length){if(C)return-1;h=w.length-1}else if(h<0)if(C)h=0;else return-1;if(typeof u=="string"&&(u=c.from(u,S)),c.isBuffer(u))return u.length===0?-1:P(w,u,h,S,C);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(w,u,h):Uint8Array.prototype.lastIndexOf.call(w,u,h):P(w,[u],h,S,C);throw new TypeError("val must be string, number or Buffer")}function P(w,u,h,S,C){var O=1,J=w.length,ue=u.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(w.length<2||u.length<2)return-1;O=2,J/=2,ue/=2,h/=2}function ge(y,I){return O===1?y[I]:y.readUInt16BE(I*O)}var we;if(C){var Be=-1;for(we=h;we<J;we++)if(ge(w,we)===ge(u,Be===-1?0:we-Be)){if(Be===-1&&(Be=we),we-Be+1===ue)return Be*O}else Be!==-1&&(we-=we-Be),Be=-1}else for(h+ue>J&&(h=J-ue),we=h;we>=0;we--){for(var b=!0,p=0;p<ue;p++)if(ge(w,we+p)!==ge(u,p)){b=!1;break}if(b)return we}return-1}c.prototype.includes=function(u,h,S){return this.indexOf(u,h,S)!==-1},c.prototype.indexOf=function(u,h,S){return M(this,u,h,S,!0)},c.prototype.lastIndexOf=function(u,h,S){return M(this,u,h,S,!1)};function j(w,u,h,S){h=Number(h)||0;var C=w.length-h;S?(S=Number(S),S>C&&(S=C)):S=C;var O=u.length;S>O/2&&(S=O/2);for(var J=0;J<S;++J){var ue=parseInt(u.substr(J*2,2),16);if(q(ue))return J;w[h+J]=ue}return J}function K(w,u,h,S){return U(ie(u,w.length-h),w,h,S)}function W(w,u,h,S){return U(de(u),w,h,S)}function ae(w,u,h,S){return U(T(u),w,h,S)}function he(w,u,h,S){return U(F(u,w.length-h),w,h,S)}c.prototype.write=function(u,h,S,C){if(h===void 0)C="utf8",S=this.length,h=0;else if(S===void 0&&typeof h=="string")C=h,S=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(S)?(S=S>>>0,C===void 0&&(C="utf8")):(C=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var O=this.length-h;if((S===void 0||S>O)&&(S=O),u.length>0&&(S<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");C||(C="utf8");for(var J=!1;;)switch(C){case"hex":return j(this,u,h,S);case"utf8":case"utf-8":return K(this,u,h,S);case"ascii":case"latin1":case"binary":return W(this,u,h,S);case"base64":return ae(this,u,h,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,u,h,S);default:if(J)throw new TypeError("Unknown encoding: "+C);C=(""+C).toLowerCase(),J=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(w,u,h){return u===0&&h===w.length?e.fromByteArray(w):e.fromByteArray(w.slice(u,h))}function z(w,u,h){h=Math.min(w.length,h);for(var S=[],C=u;C<h;){var O=w[C],J=null,ue=O>239?4:O>223?3:O>191?2:1;if(C+ue<=h){var ge,we,Be,b;switch(ue){case 1:O<128&&(J=O);break;case 2:ge=w[C+1],(ge&192)===128&&(b=(O&31)<<6|ge&63,b>127&&(J=b));break;case 3:ge=w[C+1],we=w[C+2],(ge&192)===128&&(we&192)===128&&(b=(O&15)<<12|(ge&63)<<6|we&63,b>2047&&(b<55296||b>57343)&&(J=b));break;case 4:ge=w[C+1],we=w[C+2],Be=w[C+3],(ge&192)===128&&(we&192)===128&&(Be&192)===128&&(b=(O&15)<<18|(ge&63)<<12|(we&63)<<6|Be&63,b>65535&&b<1114112&&(J=b))}}J===null?(J=65533,ue=1):J>65535&&(J-=65536,S.push(J>>>10&1023|55296),J=56320|J&1023),S.push(J),C+=ue}return Y(S)}var X=4096;function Y(w){var u=w.length;if(u<=X)return String.fromCharCode.apply(String,w);for(var h="",S=0;S<u;)h+=String.fromCharCode.apply(String,w.slice(S,S+=X));return h}function L(w,u,h){var S="";h=Math.min(w.length,h);for(var C=u;C<h;++C)S+=String.fromCharCode(w[C]&127);return S}function re(w,u,h){var S="";h=Math.min(w.length,h);for(var C=u;C<h;++C)S+=String.fromCharCode(w[C]);return S}function se(w,u,h){var S=w.length;(!u||u<0)&&(u=0),(!h||h<0||h>S)&&(h=S);for(var C="",O=u;O<h;++O)C+=G[w[O]];return C}function me(w,u,h){for(var S=w.slice(u,h),C="",O=0;O<S.length-1;O+=2)C+=String.fromCharCode(S[O]+S[O+1]*256);return C}c.prototype.slice=function(u,h){var S=this.length;u=~~u,h=h===void 0?S:~~h,u<0?(u+=S,u<0&&(u=0)):u>S&&(u=S),h<0?(h+=S,h<0&&(h=0)):h>S&&(h=S),h<u&&(h=u);var C=this.subarray(u,h);return Object.setPrototypeOf(C,c.prototype),C};function oe(w,u,h){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+u>h)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,h,S){u=u>>>0,h=h>>>0,S||oe(u,h,this.length);for(var C=this[u],O=1,J=0;++J<h&&(O*=256);)C+=this[u+J]*O;return C},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,h,S){u=u>>>0,h=h>>>0,S||oe(u,h,this.length);for(var C=this[u+--h],O=1;h>0&&(O*=256);)C+=this[u+--h]*O;return C},c.prototype.readUint8=c.prototype.readUInt8=function(u,h){return u=u>>>0,h||oe(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,h){return u=u>>>0,h||oe(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,h){return u=u>>>0,h||oe(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,h){return u=u>>>0,h||oe(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,h){return u=u>>>0,h||oe(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readIntLE=function(u,h,S){u=u>>>0,h=h>>>0,S||oe(u,h,this.length);for(var C=this[u],O=1,J=0;++J<h&&(O*=256);)C+=this[u+J]*O;return O*=128,C>=O&&(C-=Math.pow(2,8*h)),C},c.prototype.readIntBE=function(u,h,S){u=u>>>0,h=h>>>0,S||oe(u,h,this.length);for(var C=h,O=1,J=this[u+--C];C>0&&(O*=256);)J+=this[u+--C]*O;return O*=128,J>=O&&(J-=Math.pow(2,8*h)),J},c.prototype.readInt8=function(u,h){return u=u>>>0,h||oe(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,h){u=u>>>0,h||oe(u,2,this.length);var S=this[u]|this[u+1]<<8;return S&32768?S|4294901760:S},c.prototype.readInt16BE=function(u,h){u=u>>>0,h||oe(u,2,this.length);var S=this[u+1]|this[u]<<8;return S&32768?S|4294901760:S},c.prototype.readInt32LE=function(u,h){return u=u>>>0,h||oe(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,h){return u=u>>>0,h||oe(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readFloatLE=function(u,h){return u=u>>>0,h||oe(u,4,this.length),r.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,h){return u=u>>>0,h||oe(u,4,this.length),r.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,h){return u=u>>>0,h||oe(u,8,this.length),r.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,h){return u=u>>>0,h||oe(u,8,this.length),r.read(this,u,!1,52,8)};function le(w,u,h,S,C,O){if(!c.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>C||u<O)throw new RangeError('"value" argument is out of bounds');if(h+S>w.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,h,S,C){if(u=+u,h=h>>>0,S=S>>>0,!C){var O=Math.pow(2,8*S)-1;le(this,u,h,S,O,0)}var J=1,ue=0;for(this[h]=u&255;++ue<S&&(J*=256);)this[h+ue]=u/J&255;return h+S},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,h,S,C){if(u=+u,h=h>>>0,S=S>>>0,!C){var O=Math.pow(2,8*S)-1;le(this,u,h,S,O,0)}var J=S-1,ue=1;for(this[h+J]=u&255;--J>=0&&(ue*=256);)this[h+J]=u/ue&255;return h+S},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,1,255,0),this[h]=u&255,h+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,2,65535,0),this[h]=u&255,this[h+1]=u>>>8,h+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=u&255,h+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=u&255,h+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4},c.prototype.writeIntLE=function(u,h,S,C){if(u=+u,h=h>>>0,!C){var O=Math.pow(2,8*S-1);le(this,u,h,S,O-1,-O)}var J=0,ue=1,ge=0;for(this[h]=u&255;++J<S&&(ue*=256);)u<0&&ge===0&&this[h+J-1]!==0&&(ge=1),this[h+J]=(u/ue>>0)-ge&255;return h+S},c.prototype.writeIntBE=function(u,h,S,C){if(u=+u,h=h>>>0,!C){var O=Math.pow(2,8*S-1);le(this,u,h,S,O-1,-O)}var J=S-1,ue=1,ge=0;for(this[h+J]=u&255;--J>=0&&(ue*=256);)u<0&&ge===0&&this[h+J+1]!==0&&(ge=1),this[h+J]=(u/ue>>0)-ge&255;return h+S},c.prototype.writeInt8=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=u&255,h+1},c.prototype.writeInt16LE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,2,32767,-32768),this[h]=u&255,this[h+1]=u>>>8,h+2},c.prototype.writeInt16BE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=u&255,h+2},c.prototype.writeInt32LE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,4,2147483647,-2147483648),this[h]=u&255,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},c.prototype.writeInt32BE=function(u,h,S){return u=+u,h=h>>>0,S||le(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4};function ne(w,u,h,S,C,O){if(h+S>w.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function _(w,u,h,S,C){return u=+u,h=h>>>0,C||ne(w,u,h,4),r.write(w,u,h,S,23,4),h+4}c.prototype.writeFloatLE=function(u,h,S){return _(this,u,h,!0,S)},c.prototype.writeFloatBE=function(u,h,S){return _(this,u,h,!1,S)};function ce(w,u,h,S,C){return u=+u,h=h>>>0,C||ne(w,u,h,8),r.write(w,u,h,S,52,8),h+8}c.prototype.writeDoubleLE=function(u,h,S){return ce(this,u,h,!0,S)},c.prototype.writeDoubleBE=function(u,h,S){return ce(this,u,h,!1,S)},c.prototype.copy=function(u,h,S,C){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(S||(S=0),!C&&C!==0&&(C=this.length),h>=u.length&&(h=u.length),h||(h=0),C>0&&C<S&&(C=S),C===S||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("sourceEnd out of bounds");C>this.length&&(C=this.length),u.length-h<C-S&&(C=u.length-h+S);var O=C-S;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,S,C):Uint8Array.prototype.set.call(u,this.subarray(S,C),h),O},c.prototype.fill=function(u,h,S,C){if(typeof u=="string"){if(typeof h=="string"?(C=h,h=0,S=this.length):typeof S=="string"&&(C=S,S=this.length),C!==void 0&&typeof C!="string")throw new TypeError("encoding must be a string");if(typeof C=="string"&&!c.isEncoding(C))throw new TypeError("Unknown encoding: "+C);if(u.length===1){var O=u.charCodeAt(0);(C==="utf8"&&O<128||C==="latin1")&&(u=O)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(h<0||this.length<h||this.length<S)throw new RangeError("Out of range index");if(S<=h)return this;h=h>>>0,S=S===void 0?this.length:S>>>0,u||(u=0);var J;if(typeof u=="number")for(J=h;J<S;++J)this[J]=u;else{var ue=c.isBuffer(u)?u:c.from(u,C),ge=ue.length;if(ge===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(J=0;J<S-h;++J)this[J+h]=ue[J%ge]}return this};var pe=/[^+/0-9A-Za-z-_]/g;function ye(w){if(w=w.split("=")[0],w=w.trim().replace(pe,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function ie(w,u){u=u||1/0;for(var h,S=w.length,C=null,O=[],J=0;J<S;++J){if(h=w.charCodeAt(J),h>55295&&h<57344){if(!C){if(h>56319){(u-=3)>-1&&O.push(239,191,189);continue}else if(J+1===S){(u-=3)>-1&&O.push(239,191,189);continue}C=h;continue}if(h<56320){(u-=3)>-1&&O.push(239,191,189),C=h;continue}h=(C-55296<<10|h-56320)+65536}else C&&(u-=3)>-1&&O.push(239,191,189);if(C=null,h<128){if((u-=1)<0)break;O.push(h)}else if(h<2048){if((u-=2)<0)break;O.push(h>>6|192,h&63|128)}else if(h<65536){if((u-=3)<0)break;O.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((u-=4)<0)break;O.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return O}function de(w){for(var u=[],h=0;h<w.length;++h)u.push(w.charCodeAt(h)&255);return u}function F(w,u){for(var h,S,C,O=[],J=0;J<w.length&&!((u-=2)<0);++J)h=w.charCodeAt(J),S=h>>8,C=h%256,O.push(C),O.push(S);return O}function T(w){return e.toByteArray(ye(w))}function U(w,u,h,S){for(var C=0;C<S&&!(C+h>=u.length||C>=w.length);++C)u[C+h]=w[C];return C}function H(w,u){return w instanceof u||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===u.name}function q(w){return w!==w}var G=function(){for(var w="0123456789abcdef",u=new Array(256),h=0;h<16;++h)for(var S=h*16,C=0;C<16;++C)u[S+C]=w[h]+w[C];return u}()})(mn);var po={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,f="[BigNumber Error] ",c=f+"Number primitive has more than 15 significant digits: ",m=1e14,A=14,B=9007199254740991,D=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,E=1e9;function l(M){var P,j,K,W=_.prototype={constructor:_,toString:null,valueOf:null},ae=new _(1),he=20,R=4,z=-7,X=21,Y=-1e7,L=1e7,re=!1,se=1,me=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},le="0123456789abcdefghijklmnopqrstuvwxyz",ne=!0;function _(F,T){var U,H,q,G,w,u,h,S,C=this;if(!(C instanceof _))return new _(F,T);if(T==null){if(F&&F._isBigNumber===!0){C.s=F.s,!F.c||F.e>L?C.c=C.e=null:F.e<Y?C.c=[C.e=0]:(C.e=F.e,C.c=F.c.slice());return}if((u=typeof F=="number")&&F*0==0){if(C.s=1/F<0?(F=-F,-1):1,F===~~F){for(G=0,w=F;w>=10;w/=10,G++);G>L?C.c=C.e=null:(C.e=G,C.c=[F]);return}S=String(F)}else{if(!n.test(S=String(F)))return K(C,S,u);C.s=S.charCodeAt(0)==45?(S=S.slice(1),-1):1}(G=S.indexOf("."))>-1&&(S=S.replace(".","")),(w=S.search(/e/i))>0?(G<0&&(G=w),G+=+S.slice(w+1),S=S.substring(0,w)):G<0&&(G=S.length)}else{if(x(T,2,le.length,"Base"),T==10&&ne)return C=new _(F),ie(C,he+C.e+1,R);if(S=String(F),u=typeof F=="number"){if(F*0!=0)return K(C,S,u,T);if(C.s=1/F<0?(S=S.slice(1),-1):1,_.DEBUG&&S.replace(/^0\.0*|\./,"").length>15)throw Error(c+F)}else C.s=S.charCodeAt(0)===45?(S=S.slice(1),-1):1;for(U=le.slice(0,T),G=w=0,h=S.length;w<h;w++)if(U.indexOf(H=S.charAt(w))<0){if(H=="."){if(w>G){G=h;continue}}else if(!q&&(S==S.toUpperCase()&&(S=S.toLowerCase())||S==S.toLowerCase()&&(S=S.toUpperCase()))){q=!0,w=-1,G=0;continue}return K(C,String(F),u,T)}u=!1,S=j(S,T,10,C.s),(G=S.indexOf("."))>-1?S=S.replace(".",""):G=S.length}for(w=0;S.charCodeAt(w)===48;w++);for(h=S.length;S.charCodeAt(--h)===48;);if(S=S.slice(w,++h)){if(h-=w,u&&_.DEBUG&&h>15&&(F>B||F!==s(F)))throw Error(c+C.s*F);if((G=G-w-1)>L)C.c=C.e=null;else if(G<Y)C.c=[C.e=0];else{if(C.e=G,C.c=[],w=(G+1)%A,G<0&&(w+=A),w<h){for(w&&C.c.push(+S.slice(0,w)),h-=A;w<h;)C.c.push(+S.slice(w,w+=A));w=A-(S=S.slice(w)).length}else w-=h;for(;w--;S+="0");C.c.push(+S)}}else C.c=[C.e=0]}_.clone=l,_.ROUND_UP=0,_.ROUND_DOWN=1,_.ROUND_CEIL=2,_.ROUND_FLOOR=3,_.ROUND_HALF_UP=4,_.ROUND_HALF_DOWN=5,_.ROUND_HALF_EVEN=6,_.ROUND_HALF_CEIL=7,_.ROUND_HALF_FLOOR=8,_.EUCLID=9,_.config=_.set=function(F){var T,U;if(F!=null)if(typeof F=="object"){if(F.hasOwnProperty(T="DECIMAL_PLACES")&&(U=F[T],x(U,0,E,T),he=U),F.hasOwnProperty(T="ROUNDING_MODE")&&(U=F[T],x(U,0,8,T),R=U),F.hasOwnProperty(T="EXPONENTIAL_AT")&&(U=F[T],U&&U.pop?(x(U[0],-1e9,0,T),x(U[1],0,E,T),z=U[0],X=U[1]):(x(U,-1e9,E,T),z=-(X=U<0?-U:U))),F.hasOwnProperty(T="RANGE"))if(U=F[T],U&&U.pop)x(U[0],-1e9,-1,T),x(U[1],1,E,T),Y=U[0],L=U[1];else if(x(U,-1e9,E,T),U)Y=-(L=U<0?-U:U);else throw Error(f+T+" cannot be zero: "+U);if(F.hasOwnProperty(T="CRYPTO"))if(U=F[T],U===!!U)if(U)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=U;else throw re=!U,Error(f+"crypto unavailable");else re=U;else throw Error(f+T+" not true or false: "+U);if(F.hasOwnProperty(T="MODULO_MODE")&&(U=F[T],x(U,0,9,T),se=U),F.hasOwnProperty(T="POW_PRECISION")&&(U=F[T],x(U,0,E,T),me=U),F.hasOwnProperty(T="FORMAT"))if(U=F[T],typeof U=="object")oe=U;else throw Error(f+T+" not an object: "+U);if(F.hasOwnProperty(T="ALPHABET"))if(U=F[T],typeof U=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(U))ne=U.slice(0,10)=="0123456789",le=U;else throw Error(f+T+" invalid: "+U)}else throw Error(f+"Object expected: "+F);return{DECIMAL_PLACES:he,ROUNDING_MODE:R,EXPONENTIAL_AT:[z,X],RANGE:[Y,L],CRYPTO:re,MODULO_MODE:se,POW_PRECISION:me,FORMAT:oe,ALPHABET:le}},_.isBigNumber=function(F){if(!F||F._isBigNumber!==!0)return!1;if(!_.DEBUG)return!0;var T,U,H=F.c,q=F.e,G=F.s;e:if({}.toString.call(H)=="[object Array]"){if((G===1||G===-1)&&q>=-1e9&&q<=E&&q===s(q)){if(H[0]===0){if(q===0&&H.length===1)return!0;break e}if(T=(q+1)%A,T<1&&(T+=A),String(H[0]).length==T){for(T=0;T<H.length;T++)if(U=H[T],U<0||U>=m||U!==s(U))break e;if(U!==0)return!0}}}else if(H===null&&q===null&&(G===null||G===1||G===-1))return!0;throw Error(f+"Invalid BigNumber: "+F)},_.maximum=_.max=function(){return pe(arguments,-1)},_.minimum=_.min=function(){return pe(arguments,1)},_.random=function(){var F=9007199254740992,T=Math.random()*F&2097151?function(){return s(Math.random()*F)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(U){var H,q,G,w,u,h=0,S=[],C=new _(ae);if(U==null?U=he:x(U,0,E),w=i(U/A),re)if(crypto.getRandomValues){for(H=crypto.getRandomValues(new Uint32Array(w*=2));h<w;)u=H[h]*131072+(H[h+1]>>>11),u>=9e15?(q=crypto.getRandomValues(new Uint32Array(2)),H[h]=q[0],H[h+1]=q[1]):(S.push(u%1e14),h+=2);h=w/2}else if(crypto.randomBytes){for(H=crypto.randomBytes(w*=7);h<w;)u=(H[h]&31)*281474976710656+H[h+1]*1099511627776+H[h+2]*4294967296+H[h+3]*16777216+(H[h+4]<<16)+(H[h+5]<<8)+H[h+6],u>=9e15?crypto.randomBytes(7).copy(H,h):(S.push(u%1e14),h+=7);h=w/7}else throw re=!1,Error(f+"crypto unavailable");if(!re)for(;h<w;)u=T(),u<9e15&&(S[h++]=u%1e14);for(w=S[--h],U%=A,w&&U&&(u=D[A-U],S[h]=s(w/u)*u);S[h]===0;S.pop(),h--);if(h<0)S=[G=0];else{for(G=-1;S[0]===0;S.splice(0,1),G-=A);for(h=1,u=S[0];u>=10;u/=10,h++);h<A&&(G-=A-h)}return C.e=G,C.c=S,C}}(),_.sum=function(){for(var F=1,T=arguments,U=new _(T[0]);F<T.length;)U=U.plus(T[F++]);return U},j=function(){var F="0123456789";function T(U,H,q,G){for(var w,u=[0],h,S=0,C=U.length;S<C;){for(h=u.length;h--;u[h]*=H);for(u[0]+=G.indexOf(U.charAt(S++)),w=0;w<u.length;w++)u[w]>q-1&&(u[w+1]==null&&(u[w+1]=0),u[w+1]+=u[w]/q|0,u[w]%=q)}return u.reverse()}return function(U,H,q,G,w){var u,h,S,C,O,J,ue,ge,we=U.indexOf("."),Be=he,b=R;for(we>=0&&(C=me,me=0,U=U.replace(".",""),ge=new _(H),J=ge.pow(U.length-we),me=C,ge.c=T(N(o(J.c),J.e,"0"),10,q,F),ge.e=ge.c.length),ue=T(U,H,q,w?(u=le,F):(u=F,le)),S=C=ue.length;ue[--C]==0;ue.pop());if(!ue[0])return u.charAt(0);if(we<0?--S:(J.c=ue,J.e=S,J.s=G,J=P(J,ge,Be,b,q),ue=J.c,O=J.r,S=J.e),h=S+Be+1,we=ue[h],C=q/2,O=O||h<0||ue[h+1]!=null,O=b<4?(we!=null||O)&&(b==0||b==(J.s<0?3:2)):we>C||we==C&&(b==4||O||b==6&&ue[h-1]&1||b==(J.s<0?8:7)),h<1||!ue[0])U=O?N(u.charAt(1),-Be,u.charAt(0)):u.charAt(0);else{if(ue.length=h,O)for(--q;++ue[--h]>q;)ue[h]=0,h||(++S,ue=[1].concat(ue));for(C=ue.length;!ue[--C];);for(we=0,U="";we<=C;U+=u.charAt(ue[we++]));U=N(U,S,u.charAt(0))}return U}}(),P=function(){function F(H,q,G){var w,u,h,S,C=0,O=H.length,J=q%g,ue=q/g|0;for(H=H.slice();O--;)h=H[O]%g,S=H[O]/g|0,w=ue*h+S*J,u=J*h+w%g*g+C,C=(u/G|0)+(w/g|0)+ue*S,H[O]=u%G;return C&&(H=[C].concat(H)),H}function T(H,q,G,w){var u,h;if(G!=w)h=G>w?1:-1;else for(u=h=0;u<G;u++)if(H[u]!=q[u]){h=H[u]>q[u]?1:-1;break}return h}function U(H,q,G,w){for(var u=0;G--;)H[G]-=u,u=H[G]<q[G]?1:0,H[G]=u*w+H[G]-q[G];for(;!H[0]&&H.length>1;H.splice(0,1));}return function(H,q,G,w,u){var h,S,C,O,J,ue,ge,we,Be,b,p,y,I,V,Q,Z,Se,De=H.s==q.s?1:-1,_e=H.c,ve=q.c;if(!_e||!_e[0]||!ve||!ve[0])return new _(!H.s||!q.s||(_e?ve&&_e[0]==ve[0]:!ve)?NaN:_e&&_e[0]==0||!ve?De*0:De/0);for(we=new _(De),Be=we.c=[],S=H.e-q.e,De=G+S+1,u||(u=m,S=a(H.e/A)-a(q.e/A),De=De/A|0),C=0;ve[C]==(_e[C]||0);C++);if(ve[C]>(_e[C]||0)&&S--,De<0)Be.push(1),O=!0;else{for(V=_e.length,Z=ve.length,C=0,De+=2,J=s(u/(ve[0]+1)),J>1&&(ve=F(ve,J,u),_e=F(_e,J,u),Z=ve.length,V=_e.length),I=Z,b=_e.slice(0,Z),p=b.length;p<Z;b[p++]=0);Se=ve.slice(),Se=[0].concat(Se),Q=ve[0],ve[1]>=u/2&&Q++;do{if(J=0,h=T(ve,b,Z,p),h<0){if(y=b[0],Z!=p&&(y=y*u+(b[1]||0)),J=s(y/Q),J>1)for(J>=u&&(J=u-1),ue=F(ve,J,u),ge=ue.length,p=b.length;T(ue,b,ge,p)==1;)J--,U(ue,Z<ge?Se:ve,ge,u),ge=ue.length,h=1;else J==0&&(h=J=1),ue=ve.slice(),ge=ue.length;if(ge<p&&(ue=[0].concat(ue)),U(b,ue,p,u),p=b.length,h==-1)for(;T(ve,b,Z,p)<1;)J++,U(b,Z<p?Se:ve,p,u),p=b.length}else h===0&&(J++,b=[0]);Be[C++]=J,b[0]?b[p++]=_e[I]||0:(b=[_e[I]],p=1)}while((I++<V||b[0]!=null)&&De--);O=b[0]!=null,Be[0]||Be.splice(0,1)}if(u==m){for(C=1,De=Be[0];De>=10;De/=10,C++);ie(we,G+(we.e=C+S*A-1)+1,w,O)}else we.e=S,we.r=+O;return we}}();function ce(F,T,U,H){var q,G,w,u,h;if(U==null?U=R:x(U,0,8),!F.c)return F.toString();if(q=F.c[0],w=F.e,T==null)h=o(F.c),h=H==1||H==2&&(w<=z||w>=X)?k(h,w):N(h,w,"0");else if(F=ie(new _(F),T,U),G=F.e,h=o(F.c),u=h.length,H==1||H==2&&(T<=G||G<=z)){for(;u<T;h+="0",u++);h=k(h,G)}else if(T-=w,h=N(h,G,"0"),G+1>u){if(--T>0)for(h+=".";T--;h+="0");}else if(T+=G-u,T>0)for(G+1==u&&(h+=".");T--;h+="0");return F.s<0&&q?"-"+h:h}function pe(F,T){for(var U,H,q=1,G=new _(F[0]);q<F.length;q++)H=new _(F[q]),(!H.s||(U=d(G,H))===T||U===0&&G.s===T)&&(G=H);return G}function ye(F,T,U){for(var H=1,q=T.length;!T[--q];T.pop());for(q=T[0];q>=10;q/=10,H++);return(U=H+U*A-1)>L?F.c=F.e=null:U<Y?F.c=[F.e=0]:(F.e=U,F.c=T),F}K=function(){var F=/^(-?)0([xbo])(?=\w[\w.]*$)/i,T=/^([^.]+)\.$/,U=/^\.([^.]+)$/,H=/^-?(Infinity|NaN)$/,q=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,w,u,h){var S,C=u?w:w.replace(q,"");if(H.test(C))G.s=isNaN(C)?null:C<0?-1:1;else{if(!u&&(C=C.replace(F,function(O,J,ue){return S=(ue=ue.toLowerCase())=="x"?16:ue=="b"?2:8,!h||h==S?J:O}),h&&(S=h,C=C.replace(T,"$1").replace(U,"0.$1")),w!=C))return new _(C,S);if(_.DEBUG)throw Error(f+"Not a"+(h?" base "+h:"")+" number: "+w);G.s=null}G.c=G.e=null}}();function ie(F,T,U,H){var q,G,w,u,h,S,C,O=F.c,J=D;if(O){e:{for(q=1,u=O[0];u>=10;u/=10,q++);if(G=T-q,G<0)G+=A,w=T,h=O[S=0],C=s(h/J[q-w-1]%10);else if(S=i((G+1)/A),S>=O.length)if(H){for(;O.length<=S;O.push(0));h=C=0,q=1,G%=A,w=G-A+1}else break e;else{for(h=u=O[S],q=1;u>=10;u/=10,q++);G%=A,w=G-A+q,C=w<0?0:s(h/J[q-w-1]%10)}if(H=H||T<0||O[S+1]!=null||(w<0?h:h%J[q-w-1]),H=U<4?(C||H)&&(U==0||U==(F.s<0?3:2)):C>5||C==5&&(U==4||H||U==6&&(G>0?w>0?h/J[q-w]:0:O[S-1])%10&1||U==(F.s<0?8:7)),T<1||!O[0])return O.length=0,H?(T-=F.e+1,O[0]=J[(A-T%A)%A],F.e=-T||0):O[0]=F.e=0,F;if(G==0?(O.length=S,u=1,S--):(O.length=S+1,u=J[A-G],O[S]=w>0?s(h/J[q-w]%J[w])*u:0),H)for(;;)if(S==0){for(G=1,w=O[0];w>=10;w/=10,G++);for(w=O[0]+=u,u=1;w>=10;w/=10,u++);G!=u&&(F.e++,O[0]==m&&(O[0]=1));break}else{if(O[S]+=u,O[S]!=m)break;O[S--]=0,u=1}for(G=O.length;O[--G]===0;O.pop());}F.e>L?F.c=F.e=null:F.e<Y&&(F.c=[F.e=0])}return F}function de(F){var T,U=F.e;return U===null?F.toString():(T=o(F.c),T=U<=z||U>=X?k(T,U):N(T,U,"0"),F.s<0?"-"+T:T)}return W.absoluteValue=W.abs=function(){var F=new _(this);return F.s<0&&(F.s=1),F},W.comparedTo=function(F,T){return d(this,new _(F,T))},W.decimalPlaces=W.dp=function(F,T){var U,H,q,G=this;if(F!=null)return x(F,0,E),T==null?T=R:x(T,0,8),ie(new _(G),F+G.e+1,T);if(!(U=G.c))return null;if(H=((q=U.length-1)-a(this.e/A))*A,q=U[q])for(;q%10==0;q/=10,H--);return H<0&&(H=0),H},W.dividedBy=W.div=function(F,T){return P(this,new _(F,T),he,R)},W.dividedToIntegerBy=W.idiv=function(F,T){return P(this,new _(F,T),0,1)},W.exponentiatedBy=W.pow=function(F,T){var U,H,q,G,w,u,h,S,C,O=this;if(F=new _(F),F.c&&!F.isInteger())throw Error(f+"Exponent not an integer: "+de(F));if(T!=null&&(T=new _(T)),u=F.e>14,!O.c||!O.c[0]||O.c[0]==1&&!O.e&&O.c.length==1||!F.c||!F.c[0])return C=new _(Math.pow(+de(O),u?F.s*(2-v(F)):+de(F))),T?C.mod(T):C;if(h=F.s<0,T){if(T.c?!T.c[0]:!T.s)return new _(NaN);H=!h&&O.isInteger()&&T.isInteger(),H&&(O=O.mod(T))}else{if(F.e>9&&(O.e>0||O.e<-1||(O.e==0?O.c[0]>1||u&&O.c[1]>=24e7:O.c[0]<8e13||u&&O.c[0]<=9999975e7)))return G=O.s<0&&v(F)?-0:0,O.e>-1&&(G=1/G),new _(h?1/G:G);me&&(G=i(me/A+2))}for(u?(U=new _(.5),h&&(F.s=1),S=v(F)):(q=Math.abs(+de(F)),S=q%2),C=new _(ae);;){if(S){if(C=C.times(O),!C.c)break;G?C.c.length>G&&(C.c.length=G):H&&(C=C.mod(T))}if(q){if(q=s(q/2),q===0)break;S=q%2}else if(F=F.times(U),ie(F,F.e+1,1),F.e>14)S=v(F);else{if(q=+de(F),q===0)break;S=q%2}O=O.times(O),G?O.c&&O.c.length>G&&(O.c.length=G):H&&(O=O.mod(T))}return H?C:(h&&(C=ae.div(C)),T?C.mod(T):G?ie(C,me,R,w):C)},W.integerValue=function(F){var T=new _(this);return F==null?F=R:x(F,0,8),ie(T,T.e+1,F)},W.isEqualTo=W.eq=function(F,T){return d(this,new _(F,T))===0},W.isFinite=function(){return!!this.c},W.isGreaterThan=W.gt=function(F,T){return d(this,new _(F,T))>0},W.isGreaterThanOrEqualTo=W.gte=function(F,T){return(T=d(this,new _(F,T)))===1||T===0},W.isInteger=function(){return!!this.c&&a(this.e/A)>this.c.length-2},W.isLessThan=W.lt=function(F,T){return d(this,new _(F,T))<0},W.isLessThanOrEqualTo=W.lte=function(F,T){return(T=d(this,new _(F,T)))===-1||T===0},W.isNaN=function(){return!this.s},W.isNegative=function(){return this.s<0},W.isPositive=function(){return this.s>0},W.isZero=function(){return!!this.c&&this.c[0]==0},W.minus=function(F,T){var U,H,q,G,w=this,u=w.s;if(F=new _(F,T),T=F.s,!u||!T)return new _(NaN);if(u!=T)return F.s=-T,w.plus(F);var h=w.e/A,S=F.e/A,C=w.c,O=F.c;if(!h||!S){if(!C||!O)return C?(F.s=-T,F):new _(O?w:NaN);if(!C[0]||!O[0])return O[0]?(F.s=-T,F):new _(C[0]?w:R==3?-0:0)}if(h=a(h),S=a(S),C=C.slice(),u=h-S){for((G=u<0)?(u=-u,q=C):(S=h,q=O),q.reverse(),T=u;T--;q.push(0));q.reverse()}else for(H=(G=(u=C.length)<(T=O.length))?u:T,u=T=0;T<H;T++)if(C[T]!=O[T]){G=C[T]<O[T];break}if(G&&(q=C,C=O,O=q,F.s=-F.s),T=(H=O.length)-(U=C.length),T>0)for(;T--;C[U++]=0);for(T=m-1;H>u;){if(C[--H]<O[H]){for(U=H;U&&!C[--U];C[U]=T);--C[U],C[H]+=m}C[H]-=O[H]}for(;C[0]==0;C.splice(0,1),--S);return C[0]?ye(F,C,S):(F.s=R==3?-1:1,F.c=[F.e=0],F)},W.modulo=W.mod=function(F,T){var U,H,q=this;return F=new _(F,T),!q.c||!F.s||F.c&&!F.c[0]?new _(NaN):!F.c||q.c&&!q.c[0]?new _(q):(se==9?(H=F.s,F.s=1,U=P(q,F,0,3),F.s=H,U.s*=H):U=P(q,F,0,se),F=q.minus(U.times(F)),!F.c[0]&&se==1&&(F.s=q.s),F)},W.multipliedBy=W.times=function(F,T){var U,H,q,G,w,u,h,S,C,O,J,ue,ge,we,Be,b=this,p=b.c,y=(F=new _(F,T)).c;if(!p||!y||!p[0]||!y[0])return!b.s||!F.s||p&&!p[0]&&!y||y&&!y[0]&&!p?F.c=F.e=F.s=null:(F.s*=b.s,!p||!y?F.c=F.e=null:(F.c=[0],F.e=0)),F;for(H=a(b.e/A)+a(F.e/A),F.s*=b.s,h=p.length,O=y.length,h<O&&(ge=p,p=y,y=ge,q=h,h=O,O=q),q=h+O,ge=[];q--;ge.push(0));for(we=m,Be=g,q=O;--q>=0;){for(U=0,J=y[q]%Be,ue=y[q]/Be|0,w=h,G=q+w;G>q;)S=p[--w]%Be,C=p[w]/Be|0,u=ue*S+C*J,S=J*S+u%Be*Be+ge[G]+U,U=(S/we|0)+(u/Be|0)+ue*C,ge[G--]=S%we;ge[G]=U}return U?++H:ge.splice(0,1),ye(F,ge,H)},W.negated=function(){var F=new _(this);return F.s=-F.s||null,F},W.plus=function(F,T){var U,H=this,q=H.s;if(F=new _(F,T),T=F.s,!q||!T)return new _(NaN);if(q!=T)return F.s=-T,H.minus(F);var G=H.e/A,w=F.e/A,u=H.c,h=F.c;if(!G||!w){if(!u||!h)return new _(q/0);if(!u[0]||!h[0])return h[0]?F:new _(u[0]?H:q*0)}if(G=a(G),w=a(w),u=u.slice(),q=G-w){for(q>0?(w=G,U=h):(q=-q,U=u),U.reverse();q--;U.push(0));U.reverse()}for(q=u.length,T=h.length,q-T<0&&(U=h,h=u,u=U,T=q),q=0;T;)q=(u[--T]=u[T]+h[T]+q)/m|0,u[T]=m===u[T]?0:u[T]%m;return q&&(u=[q].concat(u),++w),ye(F,u,w)},W.precision=W.sd=function(F,T){var U,H,q,G=this;if(F!=null&&F!==!!F)return x(F,1,E),T==null?T=R:x(T,0,8),ie(new _(G),F,T);if(!(U=G.c))return null;if(q=U.length-1,H=q*A+1,q=U[q]){for(;q%10==0;q/=10,H--);for(q=U[0];q>=10;q/=10,H++);}return F&&G.e+1>H&&(H=G.e+1),H},W.shiftedBy=function(F){return x(F,-9007199254740991,B),this.times("1e"+F)},W.squareRoot=W.sqrt=function(){var F,T,U,H,q,G=this,w=G.c,u=G.s,h=G.e,S=he+4,C=new _("0.5");if(u!==1||!w||!w[0])return new _(!u||u<0&&(!w||w[0])?NaN:w?G:1/0);if(u=Math.sqrt(+de(G)),u==0||u==1/0?(T=o(w),(T.length+h)%2==0&&(T+="0"),u=Math.sqrt(+T),h=a((h+1)/2)-(h<0||h%2),u==1/0?T="5e"+h:(T=u.toExponential(),T=T.slice(0,T.indexOf("e")+1)+h),U=new _(T)):U=new _(u+""),U.c[0]){for(h=U.e,u=h+S,u<3&&(u=0);;)if(q=U,U=C.times(q.plus(P(G,q,S,1))),o(q.c).slice(0,u)===(T=o(U.c)).slice(0,u))if(U.e<h&&--u,T=T.slice(u-3,u+1),T=="9999"||!H&&T=="4999"){if(!H&&(ie(q,q.e+he+2,0),q.times(q).eq(G))){U=q;break}S+=4,u+=4,H=1}else{(!+T||!+T.slice(1)&&T.charAt(0)=="5")&&(ie(U,U.e+he+2,1),F=!U.times(U).eq(G));break}}return ie(U,U.e+he+1,R,F)},W.toExponential=function(F,T){return F!=null&&(x(F,0,E),F++),ce(this,F,T,1)},W.toFixed=function(F,T){return F!=null&&(x(F,0,E),F=F+this.e+1),ce(this,F,T)},W.toFormat=function(F,T,U){var H,q=this;if(U==null)F!=null&&T&&typeof T=="object"?(U=T,T=null):F&&typeof F=="object"?(U=F,F=T=null):U=oe;else if(typeof U!="object")throw Error(f+"Argument not an object: "+U);if(H=q.toFixed(F,T),q.c){var G,w=H.split("."),u=+U.groupSize,h=+U.secondaryGroupSize,S=U.groupSeparator||"",C=w[0],O=w[1],J=q.s<0,ue=J?C.slice(1):C,ge=ue.length;if(h&&(G=u,u=h,h=G,ge-=G),u>0&&ge>0){for(G=ge%u||u,C=ue.substr(0,G);G<ge;G+=u)C+=S+ue.substr(G,u);h>0&&(C+=S+ue.slice(G)),J&&(C="-"+C)}H=O?C+(U.decimalSeparator||"")+((h=+U.fractionGroupSize)?O.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(U.fractionGroupSeparator||"")):O):C}return(U.prefix||"")+H+(U.suffix||"")},W.toFraction=function(F){var T,U,H,q,G,w,u,h,S,C,O,J,ue=this,ge=ue.c;if(F!=null&&(u=new _(F),!u.isInteger()&&(u.c||u.s!==1)||u.lt(ae)))throw Error(f+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+de(u));if(!ge)return new _(ue);for(T=new _(ae),S=U=new _(ae),H=h=new _(ae),J=o(ge),G=T.e=J.length-ue.e-1,T.c[0]=D[(w=G%A)<0?A+w:w],F=!F||u.comparedTo(T)>0?G>0?T:S:u,w=L,L=1/0,u=new _(J),h.c[0]=0;C=P(u,T,0,1),q=U.plus(C.times(H)),q.comparedTo(F)!=1;)U=H,H=q,S=h.plus(C.times(q=S)),h=q,T=u.minus(C.times(q=T)),u=q;return q=P(F.minus(U),H,0,1),h=h.plus(q.times(S)),U=U.plus(q.times(H)),h.s=S.s=ue.s,G=G*2,O=P(S,H,G,R).minus(ue).abs().comparedTo(P(h,U,G,R).minus(ue).abs())<1?[S,H]:[h,U],L=w,O},W.toNumber=function(){return+de(this)},W.toPrecision=function(F,T){return F!=null&&x(F,1,E),ce(this,F,T,2)},W.toString=function(F){var T,U=this,H=U.s,q=U.e;return q===null?H?(T="Infinity",H<0&&(T="-"+T)):T="NaN":(F==null?T=q<=z||q>=X?k(o(U.c),q):N(o(U.c),q,"0"):F===10&&ne?(U=ie(new _(U),he+q+1,R),T=N(o(U.c),U.e,"0")):(x(F,2,le.length,"Base"),T=j(N(o(U.c),q,"0"),10,F,H,!0)),H<0&&U.c[0]&&(T="-"+T)),T},W.valueOf=W.toJSON=function(){return de(this)},W._isBigNumber=!0,M!=null&&_.set(M),_}function a(M){var P=M|0;return M>0||M===P?P:P-1}function o(M){for(var P,j,K=1,W=M.length,ae=M[0]+"";K<W;){for(P=M[K++]+"",j=A-P.length;j--;P="0"+P);ae+=P}for(W=ae.length;ae.charCodeAt(--W)===48;);return ae.slice(0,W+1||1)}function d(M,P){var j,K,W=M.c,ae=P.c,he=M.s,R=P.s,z=M.e,X=P.e;if(!he||!R)return null;if(j=W&&!W[0],K=ae&&!ae[0],j||K)return j?K?0:-R:he;if(he!=R)return he;if(j=he<0,K=z==X,!W||!ae)return K?0:!W^j?1:-1;if(!K)return z>X^j?1:-1;for(R=(z=W.length)<(X=ae.length)?z:X,he=0;he<R;he++)if(W[he]!=ae[he])return W[he]>ae[he]^j?1:-1;return z==X?0:z>X^j?1:-1}function x(M,P,j,K){if(M<P||M>j||M!==s(M))throw Error(f+(K||"Argument")+(typeof M=="number"?M<P||M>j?" out of range: ":" not an integer: ":" not a primitive number: ")+String(M))}function v(M){var P=M.c.length-1;return a(M.e/A)==P&&M.c[P]%2!=0}function k(M,P){return(M.length>1?M.charAt(0)+"."+M.slice(1):M)+(P<0?"e":"e+")+P}function N(M,P,j){var K,W;if(P<0){for(W=j+".";++P;W+=j);M=W+M}else if(K=M.length,++P>K){for(W=j,P-=K;--P;W+=j);M+=W}else P<K&&(M=M.slice(0,P)+"."+M.slice(P));return M}r=l(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(Ar)})(po);var wi=po.exports,vu=function(e,r,n){var i=new e.Uint8Array(n),s=r.pushInt,f=r.pushInt32,c=r.pushInt32Neg,m=r.pushInt64,A=r.pushInt64Neg,B=r.pushFloat,D=r.pushFloatSingle,g=r.pushFloatDouble,E=r.pushTrue,l=r.pushFalse,a=r.pushUndefined,o=r.pushNull,d=r.pushInfinity,x=r.pushInfinityNeg,v=r.pushNaN,k=r.pushNaNNeg,N=r.pushArrayStart,M=r.pushArrayStartFixed,P=r.pushArrayStartFixed32,j=r.pushArrayStartFixed64,K=r.pushObjectStart,W=r.pushObjectStartFixed,ae=r.pushObjectStartFixed32,he=r.pushObjectStartFixed64,R=r.pushByteString,z=r.pushByteStringStart,X=r.pushUtf8String,Y=r.pushUtf8StringStart,L=r.pushSimpleUnassigned,re=r.pushTagStart,se=r.pushTagStart4,me=r.pushTagStart8,oe=r.pushTagUnassigned,le=r.pushBreak,ne=e.Math.pow,_=0,ce=0,pe=0;function ye($){for($=$|0,_=0,ce=$;(_|0)<(ce|0)&&(pe=Rc[i[_]&255](i[_]|0)|0,!((pe|0)>0)););return pe|0}function ie($){return $=$|0,((_|0)+($|0)|0)<(ce|0)?0:1}function de($){return $=$|0,i[$|0]<<8|i[$+1|0]|0}function F($){return $=$|0,i[$|0]<<24|i[$+1|0]<<16|i[$+2|0]<<8|i[$+3|0]|0}function T($){return $=$|0,s($|0),_=_+1|0,0}function U($){return $=$|0,ie(1)|0?1:(s(i[_+1|0]|0),_=_+2|0,0)}function H($){return $=$|0,ie(2)|0?1:(s(de(_+1|0)|0),_=_+3|0,0)}function q($){return $=$|0,ie(4)|0?1:(f(de(_+1|0)|0,de(_+3|0)|0),_=_+5|0,0)}function G($){return $=$|0,ie(8)|0?1:(m(de(_+1|0)|0,de(_+3|0)|0,de(_+5|0)|0,de(_+7|0)|0),_=_+9|0,0)}function w($){return $=$|0,s(-1-($-32|0)|0),_=_+1|0,0}function u($){return $=$|0,ie(1)|0?1:(s(-1-(i[_+1|0]|0)|0),_=_+2|0,0)}function h($){$=$|0;var ke=0;return ie(2)|0?1:(ke=de(_+1|0)|0,s(-1-(ke|0)|0),_=_+3|0,0)}function S($){return $=$|0,ie(4)|0?1:(c(de(_+1|0)|0,de(_+3|0)|0),_=_+5|0,0)}function C($){return $=$|0,ie(8)|0?1:(A(de(_+1|0)|0,de(_+3|0)|0,de(_+5|0)|0,de(_+7|0)|0),_=_+9|0,0)}function O($){$=$|0;var ke=0,Ie=0,Te=0;return Te=$-64|0,ie(Te|0)|0?1:(ke=_+1|0,Ie=(_+1|0)+(Te|0)|0,R(ke|0,Ie|0),_=Ie|0,0)}function J($){$=$|0;var ke=0,Ie=0,Te=0;return ie(1)|0||(Te=i[_+1|0]|0,ke=_+2|0,Ie=(_+2|0)+(Te|0)|0,ie(Te+1|0)|0)?1:(R(ke|0,Ie|0),_=Ie|0,0)}function ue($){$=$|0;var ke=0,Ie=0,Te=0;return ie(2)|0||(Te=de(_+1|0)|0,ke=_+3|0,Ie=(_+3|0)+(Te|0)|0,ie(Te+2|0)|0)?1:(R(ke|0,Ie|0),_=Ie|0,0)}function ge($){$=$|0;var ke=0,Ie=0,Te=0;return ie(4)|0||(Te=F(_+1|0)|0,ke=_+5|0,Ie=(_+5|0)+(Te|0)|0,ie(Te+4|0)|0)?1:(R(ke|0,Ie|0),_=Ie|0,0)}function we($){return $=$|0,1}function Be($){return $=$|0,z(),_=_+1|0,0}function b($){$=$|0;var ke=0,Ie=0,Te=0;return Te=$-96|0,ie(Te|0)|0?1:(ke=_+1|0,Ie=(_+1|0)+(Te|0)|0,X(ke|0,Ie|0),_=Ie|0,0)}function p($){$=$|0;var ke=0,Ie=0,Te=0;return ie(1)|0||(Te=i[_+1|0]|0,ke=_+2|0,Ie=(_+2|0)+(Te|0)|0,ie(Te+1|0)|0)?1:(X(ke|0,Ie|0),_=Ie|0,0)}function y($){$=$|0;var ke=0,Ie=0,Te=0;return ie(2)|0||(Te=de(_+1|0)|0,ke=_+3|0,Ie=(_+3|0)+(Te|0)|0,ie(Te+2|0)|0)?1:(X(ke|0,Ie|0),_=Ie|0,0)}function I($){$=$|0;var ke=0,Ie=0,Te=0;return ie(4)|0||(Te=F(_+1|0)|0,ke=_+5|0,Ie=(_+5|0)+(Te|0)|0,ie(Te+4|0)|0)?1:(X(ke|0,Ie|0),_=Ie|0,0)}function V($){return $=$|0,1}function Q($){return $=$|0,Y(),_=_+1|0,0}function Z($){return $=$|0,M($-128|0),_=_+1|0,0}function Se($){return $=$|0,ie(1)|0?1:(M(i[_+1|0]|0),_=_+2|0,0)}function De($){return $=$|0,ie(2)|0?1:(M(de(_+1|0)|0),_=_+3|0,0)}function _e($){return $=$|0,ie(4)|0?1:(P(de(_+1|0)|0,de(_+3|0)|0),_=_+5|0,0)}function ve($){return $=$|0,ie(8)|0?1:(j(de(_+1|0)|0,de(_+3|0)|0,de(_+5|0)|0,de(_+7|0)|0),_=_+9|0,0)}function Ue($){return $=$|0,N(),_=_+1|0,0}function Oe($){$=$|0;var ke=0;return ke=$-160|0,ie(ke|0)|0?1:(W(ke|0),_=_+1|0,0)}function Lr($){return $=$|0,ie(1)|0?1:(W(i[_+1|0]|0),_=_+2|0,0)}function Jr($){return $=$|0,ie(2)|0?1:(W(de(_+1|0)|0),_=_+3|0,0)}function ee($){return $=$|0,ie(4)|0?1:(ae(de(_+1|0)|0,de(_+3|0)|0),_=_+5|0,0)}function te($){return $=$|0,ie(8)|0?1:(he(de(_+1|0)|0,de(_+3|0)|0,de(_+5|0)|0,de(_+7|0)|0),_=_+9|0,0)}function fe($){return $=$|0,K(),_=_+1|0,0}function Ae($){return $=$|0,re($-192|0|0),_=_+1|0,0}function dt($){return $=$|0,re($|0),_=_+1|0,0}function bn($){return $=$|0,re($|0),_=_+1|0,0}function _s($){return $=$|0,re($|0),_=_+1|0,0}function If($){return $=$|0,re($|0),_=_+1|0,0}function Ze($){return $=$|0,re($-192|0|0),_=_+1|0,0}function Uf($){return $=$|0,re($|0),_=_+1|0,0}function Rf($){return $=$|0,re($|0),_=_+1|0,0}function Of($){return $=$|0,re($|0),_=_+1|0,0}function vc($){return $=$|0,ie(1)|0?1:(re(i[_+1|0]|0),_=_+2|0,0)}function Ac($){return $=$|0,ie(2)|0?1:(re(de(_+1|0)|0),_=_+3|0,0)}function Sc($){return $=$|0,ie(4)|0?1:(se(de(_+1|0)|0,de(_+3|0)|0),_=_+5|0,0)}function Bc($){return $=$|0,ie(8)|0?1:(me(de(_+1|0)|0,de(_+3|0)|0,de(_+5|0)|0,de(_+7|0)|0),_=_+9|0,0)}function Ke($){return $=$|0,L(($|0)-224|0),_=_+1|0,0}function _c($){return $=$|0,l(),_=_+1|0,0}function Dc($){return $=$|0,E(),_=_+1|0,0}function Fc($){return $=$|0,o(),_=_+1|0,0}function Cc($){return $=$|0,a(),_=_+1|0,0}function Tc($){return $=$|0,ie(1)|0?1:(L(i[_+1|0]|0),_=_+2|0,0)}function Nc($){$=$|0;var ke=0,Ie=0,Te=1,vn=0,Wr=0,Mf=0;return ie(2)|0?1:(ke=i[_+1|0]|0,Ie=i[_+2|0]|0,(ke|0)&128&&(Te=-1),vn=+(((ke|0)&124)>>2),Wr=+(((ke|0)&3)<<8|Ie),+vn==0?B(+(+Te*5960464477539063e-23*+Wr)):+vn==31?+Te==1?+Wr>0?v():d():+Wr>0?k():x():B(+(+Te*ne(2,+(+vn-25))*+(1024+Wr))),_=_+3|0,0)}function kc($){return $=$|0,ie(4)|0?1:(D(i[_+1|0]|0,i[_+2|0]|0,i[_+3|0]|0,i[_+4|0]|0),_=_+5|0,0)}function Ic($){return $=$|0,ie(8)|0?1:(g(i[_+1|0]|0,i[_+2|0]|0,i[_+3|0]|0,i[_+4|0]|0,i[_+5|0]|0,i[_+6|0]|0,i[_+7|0]|0,i[_+8|0]|0),_=_+9|0,0)}function Pe($){return $=$|0,1}function Uc($){return $=$|0,le(),_=_+1|0,0}var Rc=[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,U,H,q,G,Pe,Pe,Pe,Pe,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,u,h,S,C,Pe,Pe,Pe,Pe,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,J,ue,ge,we,Pe,Pe,Pe,Be,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,p,y,I,V,Pe,Pe,Pe,Q,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Z,Se,De,_e,ve,Pe,Pe,Pe,Ue,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Oe,Lr,Jr,ee,te,Pe,Pe,Pe,fe,Ae,Ae,Ae,Ae,Ae,Ae,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,Ze,vc,Ac,Sc,Bc,Pe,Pe,Pe,Pe,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,Ke,_c,Dc,Fc,Cc,Tc,Nc,kc,Ic,Pe,Pe,Pe,Uc];return{parse:ye}},Ei={},ct={};const fs=wi.BigNumber;ct.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};ct.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};ct.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};ct.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};ct.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};ct.SHIFT32=Math.pow(2,32);ct.SHIFT16=Math.pow(2,16);ct.MAX_SAFE_HIGH=2097151;ct.NEG_ONE=new fs(-1);ct.TEN=new fs(10);ct.TWO=new fs(2);ct.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=mn,r=wi.BigNumber,n=ct,i=n.SHIFT32,s=n.SHIFT16,f=2097151;t.parseHalf=function(A){var B,D,g;return g=A[0]&128?-1:1,B=(A[0]&124)>>2,D=(A[0]&3)<<8|A[1],B?B===31?g*(D?NaN:1/0):g*Math.pow(2,B-25)*(1024+D):g*5960464477539063e-23*D};function c(m){return m<16?"0"+m.toString(16):m.toString(16)}t.arrayBufferToBignumber=function(m){const A=m.byteLength;let B="";for(let D=0;D<A;D++)B+=c(m[D]);return new r(B,16)},t.buildMap=m=>{const A=new Map,B=Object.keys(m),D=B.length;for(let g=0;g<D;g++)A.set(B[g],m[B[g]]);return A},t.buildInt32=(m,A)=>m*s+A,t.buildInt64=(m,A,B,D)=>{const g=t.buildInt32(m,A),E=t.buildInt32(B,D);return g>f?new r(g).times(i).plus(E):g*i+E},t.writeHalf=function(A,B){const D=e.allocUnsafe(4);D.writeFloatBE(B,0);const g=D.readUInt32BE(0);if(g&8191)return!1;var E=g>>16&32768;const l=g>>23&255,a=g&8388607;if(l>=113&&l<=142)E+=(l-112<<10)+(a>>13);else if(l>=103&&l<113){if(a&(1<<126-l)-1)return!1;E+=a+8388608>>126-l}else return!1;return A.writeUInt16BE(E,0),!0},t.keySorter=function(m,A){var B=m[0].byteLength,D=A[0].byteLength;return B>D?1:D>B?-1:m[0].compare(A[0])},t.isNegativeZero=m=>m===0&&1/m<0,t.nextPowerOf2=m=>{let A=0;if(m&&!(m&m-1))return m;for(;m!==0;)m>>=1,A+=1;return 1<<A}})(Ei);const ds=ct,Au=ds.MT,Sn=ds.SIMPLE,Fi=ds.SYMS;let Su=class Xi{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,Au.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Xi}static decode(e,r){switch(r==null&&(r=!0),e){case Sn.FALSE:return!1;case Sn.TRUE:return!0;case Sn.NULL:return r?null:Fi.NULL;case Sn.UNDEFINED:return r?void 0:Fi.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Fi.BREAK;default:return new Xi(e)}}};var mo=Su;let Bu=class ji{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=ji["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(ji,this.value)}catch(i){return r=i,this.err=r,this}}};var yo=Bu;const xo=self.location?self.location.protocol+"//"+self.location.host:"",Ki=self.URL;let _u=class{constructor(e="",r=xo){this.super=new Ki(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Du(t){if(typeof t=="string")return new Ki(t).toString();if(!(t instanceof Ki)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",s=t.host||"",f=t.hostname||"",c=t.search||(t.query?"?"+t.query:""),m=t.hash||"",A=t.pathname||"",B=t.path||A+c;return`${i}${e||r}${s||f+n}${B}${m}`}}var go={URLWithLegacySupport:_u,URLSearchParams:self.URLSearchParams,defaultBase:xo,format:Du};const{URLWithLegacySupport:$f,format:qf}=go,{URLWithLegacySupport:Fu,format:Vf,URLSearchParams:Hf,defaultBase:Gf}=go;var wo={URL:Fu};const{Buffer:Nr}=mn,Ns=dn,Cu=wi.BigNumber,Tu=vu,ut=Ei,Me=ct,Nu=mo,ku=yo,{URL:Iu}=wo;let Li=class Ji{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=ut.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Nr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>ut.arrayBufferToBignumber(r),3:r=>Me.NEG_ONE.minus(ut.arrayBufferToBignumber(r)),4:r=>Me.TEN.pow(r[0]).times(r[1]),5:r=>Me.TWO.pow(r[0]).times(r[1]),32:r=>new Iu(r),35:r=>new RegExp(r)},e.tags),this.parser=Tu(Ar,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Me.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Me.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Me.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Me.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Me.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Me.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Me.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Me.PARENT.ARRAY:case Me.PARENT.BYTE_STRING:case Me.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Me.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Me.PARENT.MAP,n.ref=ut.buildMap(n.ref)));break;case Me.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Me.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Me.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new ku(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Nr.concat(e)}createByteStringFromHeap(e,r){return e===r?Nr.alloc(0):Nr.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return ut.buildInt32(e,r)}createInt64(e,r,n,i){return ut.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return Ns.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,s,f,c,m){return Ns.read([e,r,n,i,s,f,c,m],0,!1,52,8)}createInt32Neg(e,r){return-1-ut.buildInt32(e,r)}createInt64Neg(e,r,n,i){const s=ut.buildInt32(e,r),f=ut.buildInt32(n,i);return s>Me.MAX_SAFE_HIGH?Me.NEG_ONE.minus(new Cu(s).times(Me.SHIFT32).plus(f)):-1-(s*Me.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new Nu(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,s,f,c,m){this._push(this.createFloatDouble(e,r,n,i,s,f,c,m))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Me.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=ut.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const s=ut.buildInt64(e,r,n,i);this._createArrayStartFixed(s)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=ut.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const s=ut.buildInt64(e,r,n,i);this._createObjectStartFixed(s)}pushByteStringStart(){this._parents[this._depth]={type:Me.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Me.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Me.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(ut.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(ut.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Me.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Me.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Nr.from(e,r||"hex")),new Ji({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Nr.from(e,r||"hex")),new Ji({size:e.length}).decodeAll(e)}};Li.decodeFirst=Li.decode;var Eo=Li;const{Buffer:Ci}=mn,Uu=Eo,Ru=Ei;class ps extends Uu{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return Ru.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,s,f,c,m){return`${super.createFloatDouble(e,r,n,i,s,f,c,m)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${Ci.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(ks(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(ks(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${Ci.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=Ci.from(e,r||"hex")),new ps().decodeFirst(e)}}var Ou=ps;function ks(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:Pt}=mn,{URL:Mu}=wo,Wi=wi.BigNumber,Ti=Ei,Ye=ct,vt=Ye.MT,Bn=Ye.NUMBYTES,Is=Ye.SHIFT32,Us=Ye.SYMS,kr=Ye.TAG,Pu=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.TWO,zu=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.FOUR,$u=Ye.MT.SIMPLE_FLOAT<<5|Ye.NUMBYTES.EIGHT,qu=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.TRUE,Vu=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.FALSE,Hu=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.UNDEFINED,Rs=Ye.MT.SIMPLE_FLOAT<<5|Ye.SIMPLE.NULL,Gu=new Wi("0x20000000000000"),Xu=Pt.from("f97e00","hex"),ju=Pt.from("f9fc00","hex"),Ku=Pt.from("f97c00","hex");function Lu(t){return{}.toString.call(t).slice(8,-1)}class ci{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[Mu,this._pushUrl],[Wi,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(Xu)}_pushInfinity(e){const r=e<0?ju:Ku;return this.push(r)}_pushFloat(e){const r=Pt.allocUnsafe(2);if(Ti.writeHalf(r,e)&&Ti.parseHalf(r)===e)return this._pushUInt8(Pu)&&this.push(r);const n=Pt.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(zu)&&this.push(n):this._pushUInt8($u)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|Bn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|Bn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|Bn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|Bn.EIGHT)&&this._pushUInt32BE(Math.floor(e/Is))&&this._pushUInt32BE(e%Is):r===vt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,vt.NEG_INT,e):this._pushInt(e,vt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=Pt.byteLength(e,"utf8");return this._pushInt(r,vt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?qu:Vu)}_pushUndefined(e){return this._pushUInt8(Hu)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,vt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,vt.TAG)}_pushDate(e,r){return e._pushTag(kr.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,vt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(kr.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,vt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(kr.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=kr.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=kr.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=Pt.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(kr.DECIMAL_FRAC)&&e._pushInt(2,vt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new Wi(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(Gu)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,vt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Rs);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var s=Object.keys(e),f=s.length;return this._pushInt(f,vt.MAP)?this._pushRawMap(f,s.map(c=>[c,e[c]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=ci.encode(i[0]),i}).sort(Ti.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=Lu(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,Pt.isBuffer(e)?e:Pt.from(e));case"Null":return this._pushUInt8(Rs);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case Us.NULL:return this._pushObject(null);case Us.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,s=0,f=0;f<i;f++)s+=r[f];var c=Pt.allocUnsafe(s),m=0,A=0;for(f=0;f<i;f++){switch(A=r[f],n[f]){case 0:e[f].copy(c,m);break;case 1:c.writeUInt8(e[f],m,!0);break;case 2:c.writeUInt16BE(e[f],m,!0);break;case 3:c.writeUInt32BE(e[f],m,!0);break;case 4:c.writeDoubleBE(e[f],m,!0);break;case 5:c.write(e[f],m,A,"utf8");break;default:throw new Error("unkown method")}m+=A}var B=c;return this._reset(),B}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new ci;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var Ju=ci;(function(t){t.Diagnose=Ou,t.Decoder=Eo,t.Encoder=Ju,t.Simple=mo,t.Tagged=yo,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(fo);const bo=Oc(fo);function Ct(t){return Pn(cs.create().update(new Uint8Array(t)).digest())}function $n(t){if(t instanceof bo.Tagged)return $n(t.value);if(typeof t=="string")return vo(t);if(typeof t=="number")return Ct(Ge(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return Ct(t);if(Array.isArray(t)){const e=t.map($n);return Ct(Vt(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return Ct(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return $n(t.toHash());if(typeof t=="object")return ui(t);if(typeof t=="bigint")return Ct(Ge(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const vo=t=>{const e=new TextEncoder().encode(t);return Ct(e)};function Os(t){return ui(t)}function ui(t){const n=Object.entries(t).filter(([,f])=>f!==void 0).map(([f,c])=>{const m=vo(f),A=$n(c);return[m,A]}).sort(([f],[c])=>Ba(f,c)),i=Vt(...n.map(f=>Vt(...f)));return Ct(i)}new TextEncoder().encode(`
ic-request`);class Ms{getPrincipal(){return Ce.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var Lt={},Kr={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});const Wu=9007199254740992;function Yt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,s)=>i+s.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function Nt(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(s=>parseInt(s,16)));return new Uint8Array(i).buffer}function bi(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return Nt(t,r,e.toString(16))}}function Ao(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Yt(new Uint8Array(bi(3,t.length)),new Uint8Array(e))}function Yu(t,e){if(t==14277111)return Yt(new Uint8Array([217,217,247]),e);if(t<24)return Yt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),s=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(s).buffer}}ze.tagged=Yu;function yn(t){return new Uint8Array(t).buffer}ze.raw=yn;function ms(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}ze.uSmall=ms;function So(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),Nt(0,24,t)}ze.u8=So;function Bo(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),Nt(0,25,t)}ze.u16=Bo;function _o(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),Nt(0,26,t)}ze.u32=_o;function ys(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Nt(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),Wu),t=t.toString(16),Nt(0,27,t)}ze.u64=ys;function Do(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return ms(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}ze.iSmall=Do;function Fo(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),Nt(1,24,t)}ze.i8=Fo;function Co(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),Nt(1,25,t)}ze.i16=Co;function To(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),Nt(1,26,t)}ze.i32=To;function No(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,s)=>{if(r)return s+i;let f=parseInt(s,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?Nt(1,27,n):ys(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),Nt(1,27,t)}ze.i64=No;function Zu(t){return t>=0?t<24?ms(t):t<=255?So(t):t<=65535?Bo(t):t<=4294967295?_o(t):ys(t):t>=-24?Do(t):t>=-255?Fo(t):t>=-65535?Co(t):t>=-4294967295?To(t):No(t)}ze.number=Zu;function Qu(t){return Yt(bi(2,t.byteLength),t)}ze.bytes=Qu;function el(t){return Ao(t)}ze.string=el;function tl(t){return Yt(bi(4,t.length),...t)}ze.array=tl;function rl(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Yt(bi(5,t.size),...r.map(([n,i])=>Yt(Ao(n),i)))}ze.map=rl;function nl(t){const e=new Float32Array([t]);return Yt(new Uint8Array([250]),new Uint8Array(e.buffer))}ze.singleFloat=nl;function il(t){const e=new Float64Array([t]);return Yt(new Uint8Array([251]),new Uint8Array(e.buffer))}ze.doubleFloat=il;function sl(t){return t?ko():Io()}ze.bool=sl;function ko(){return yn(new Uint8Array([245]))}ze.true_=ko;function Io(){return yn(new Uint8Array([244]))}ze.false_=Io;function al(){return yn(new Uint8Array([246]))}ze.null_=al;function ol(){return yn(new Uint8Array([247]))}ze.undefined_=ol;var cl=Ar&&Ar.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(Kr,"__esModule",{value:!0});const St=cl(ze),ul=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Uo{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return St.undefined_();case"boolean":return St.bool(e);case"number":return Math.floor(e)===e?St.number(e):St.doubleFloat(e);case"string":return St.string(e);case"object":if(e===null)return St.null_();if(Array.isArray(e))return St.array(e.map(r=>this._serializer.serializeValue(r)));if(ul.find(r=>e instanceof r))return St.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return St.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return St.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Kr.JsonDefaultCborEncoder=Uo;class Ro{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Kr.ToCborEncoder=Ro;class Oo{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new Uo(r,e)),r.addEncoder(new Ro),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Kr.CborSerializer=Oo;class ll extends Oo{serialize(e){return St.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Kr.SelfDescribeCborSerializer=ll;(function(t){function e(i){for(var s in i)t.hasOwnProperty(s)||(t[s]=i[s])}var r=Ar&&Ar.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(s[f]=i[f]);return s.default=i,s};Object.defineProperty(t,"__esModule",{value:!0}),e(Kr);const n=r(ze);t.value=n})(Lt);class hl{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return Lt.value.bytes(e.toUint8Array())}}class fl{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return Lt.value.bytes(new Uint8Array(e))}}class dl{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?Lt.value.tagged(2,Lt.value.bytes(si(e.toString(16)))):Lt.value.tagged(3,Lt.value.bytes(si((BigInt("-1")*e).toString(16))))}}const vi=Lt.SelfDescribeCborSerializer.withDefaultEncoders(!0);vi.addEncoder(new hl);vi.addEncoder(new fl);vi.addEncoder(new dl);var Yi;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(Yi||(Yi={}));function Ni(t){return vi.serialize(t)}function Ps(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class pl extends bo.Decoder{createByteString(e){return Vt(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function Jt(t){const e=new Uint8Array(t),r=new pl({size:e.byteLength,tags:{2:n=>Ps(n),3:n=>-Ps(n),[Yi.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${tt(e)}`)}}const _n=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Zi;(function(t){t.Call="call"})(Zi||(Zi={}));function Qi(){const t=new ArrayBuffer(16),e=new DataView(t),r=_n(),n=_n(),i=_n(),s=_n();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,s),t}const zs=BigInt(1e6),ml=60*1e3;class Dn{constructor(e){if(e<90*1e3){const c=BigInt(Date.now()+e)*zs/BigInt(1e9);this._value=c*BigInt(1e9);return}const s=BigInt(Math.floor(Date.now()+e-ml))*zs/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=s}toCBOR(){return Lt.value.u64(this._value.toString(16),16)}toHash(){return Ge(this._value)}}function $s(t=Qi){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function Zr(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class ki extends He{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class yl extends He{constructor(e,r,n,i,s,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=s,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class xl extends He{constructor(e,r,n,i,s,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=s,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class gl extends He{constructor(e,r,n,i,s,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=s,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xs=BigInt(0),gs=BigInt(1),wl=BigInt(2);function Ai(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ur(t){if(!Ai(t))throw new Error("Uint8Array expected")}function nn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const El=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Dr(t){ur(t);let e="";for(let r=0;r<t.length;r++)e+=El[t[r]];return e}function Mo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?xs:BigInt("0x"+t)}const Ht={_0:48,_9:57,A:65,F:70,a:97,f:102};function qs(t){if(t>=Ht._0&&t<=Ht._9)return t-Ht._0;if(t>=Ht.A&&t<=Ht.F)return t-(Ht.A-10);if(t>=Ht.a&&t<=Ht.f)return t-(Ht.a-10)}function Po(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const f=qs(t.charCodeAt(s)),c=qs(t.charCodeAt(s+1));if(f===void 0||c===void 0){const m=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+s)}n[i]=f*16+c}return n}function Dt(t){return Mo(Dr(t))}function sn(t){return ur(t),Mo(Dr(Uint8Array.from(t).reverse()))}function it(t,e){return Po(t.toString(16).padStart(e*2,"0"))}function li(t,e){return it(t,e).reverse()}function ft(t,e,r){let n;if(typeof e=="string")try{n=Po(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ai(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function Le(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];ur(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function ws(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Ii=t=>typeof t=="bigint"&&xs<=t;function zo(t,e,r){return Ii(t)&&Ii(e)&&Ii(r)&&e<=t&&t<r}function ar(t,e,r,n){if(!zo(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function an(t){let e;for(e=0;t>xs;t>>=gs,e+=1);return e}function bl(t,e){return t>>BigInt(e)&gs}const qn=t=>(wl<<BigInt(t-1))-gs,vl={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ai(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xn(t,e,r={}){const n=(i,s,f)=>{const c=vl[s];if(typeof c!="function")throw new Error("invalid validator function");const m=t[i];if(!(f&&m===void 0)&&!c(m,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+m)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Vs=()=>{throw new Error("not implemented")};function un(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rt=BigInt(0),qe=BigInt(1),or=BigInt(2),Al=BigInt(3),es=BigInt(4),Hs=BigInt(5),Gs=BigInt(8);function Ve(t,e){const r=t%e;return r>=rt?r:e+r}function Sl(t,e,r){if(e<rt)throw new Error("invalid exponent, negatives unsupported");if(r<=rt)throw new Error("invalid modulus");if(r===qe)return rt;let n=qe;for(;e>rt;)e&qe&&(n=n*t%r),t=t*t%r,e>>=qe;return n}function Ut(t,e,r){let n=t;for(;e-- >rt;)n*=n,n%=r;return n}function Xs(t,e){if(t===rt)throw new Error("invert: expected non-zero number");if(e<=rt)throw new Error("invert: expected positive modulus, got "+e);let r=Ve(t,e),n=e,i=rt,s=qe;for(;r!==rt;){const c=n/r,m=n%r,A=i-s*c;n=r,r=m,i=s,s=A}if(n!==qe)throw new Error("invert: does not exist");return Ve(i,e)}function Bl(t){const e=(t-qe)/or;let r,n,i;for(r=t-qe,n=0;r%or===rt;r/=or,n++);for(i=or;i<t&&Sl(i,e,t)!==t-qe;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const f=(t+qe)/es;return function(m,A){const B=m.pow(A,f);if(!m.eql(m.sqr(B),A))throw new Error("Cannot find square root");return B}}const s=(r+qe)/or;return function(c,m){if(c.pow(m,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let A=n,B=c.pow(c.mul(c.ONE,i),r),D=c.pow(m,s),g=c.pow(m,r);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let E=1;for(let a=c.sqr(g);E<A&&!c.eql(a,c.ONE);E++)a=c.sqr(a);const l=c.pow(B,qe<<BigInt(A-E-1));B=c.sqr(l),D=c.mul(D,l),g=c.mul(g,B),A=E}return D}}function _l(t){if(t%es===Al){const e=(t+qe)/es;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Gs===Hs){const e=(t-Hs)/Gs;return function(n,i){const s=n.mul(i,or),f=n.pow(s,e),c=n.mul(i,f),m=n.mul(n.mul(c,or),f),A=n.mul(c,n.sub(m,n.ONE));if(!n.eql(n.sqr(A),i))throw new Error("Cannot find square root");return A}}return Bl(t)}const Dl=(t,e)=>(Ve(t,e)&qe)===qe,Fl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $o(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Fl.reduce((n,i)=>(n[i]="function",n),e);return xn(t,r)}function Vn(t,e,r){if(r<rt)throw new Error("invalid exponent, negatives unsupported");if(r===rt)return t.ONE;if(r===qe)return e;let n=t.ONE,i=e;for(;r>rt;)r&qe&&(n=t.mul(n,i)),i=t.sqr(i),r>>=qe;return n}function Hn(t,e){const r=new Array(e.length),n=e.reduce((s,f,c)=>t.is0(f)?s:(r[c]=s,t.mul(s,f)),t.ONE),i=t.inv(n);return e.reduceRight((s,f,c)=>t.is0(f)?s:(r[c]=t.mul(s,r[c]),t.mul(s,f)),i),r}function Cl(t){const e=(t-qe)/or;return(r,n)=>r.pow(n,e)}function qo(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function gn(t,e,r=!1,n={}){if(t<=rt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=qo(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const c=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:qn(i),ZERO:rt,ONE:qe,create:m=>Ve(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return rt<=m&&m<t},is0:m=>m===rt,isOdd:m=>(m&qe)===qe,neg:m=>Ve(-m,t),eql:(m,A)=>m===A,sqr:m=>Ve(m*m,t),add:(m,A)=>Ve(m+A,t),sub:(m,A)=>Ve(m-A,t),mul:(m,A)=>Ve(m*A,t),pow:(m,A)=>Vn(c,m,A),div:(m,A)=>Ve(m*Xs(A,t),t),sqrN:m=>m*m,addN:(m,A)=>m+A,subN:(m,A)=>m-A,mulN:(m,A)=>m*A,inv:m=>Xs(m,t),sqrt:n.sqrt||(m=>(f||(f=_l(t)),f(c,m))),invertBatch:m=>Hn(c,m),cmov:(m,A,B)=>B?A:m,toBytes:m=>r?li(m,s):it(m,s),fromBytes:m=>{if(m.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+m.length);return r?sn(m):Dt(m)}});return Object.freeze(c)}function Vo(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ho(t){const e=Vo(t);return e+Math.ceil(e/2)}function Tl(t,e,r=!1){const n=t.length,i=Vo(e),s=Ho(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const f=r?sn(t):Dt(t),c=Ve(f,e-qe)+qe;return r?li(c,i):it(c,i)}const Nl=Dt;function ir(t,e){if(ln(t),ln(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function kl(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function ln(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Il(t,e,r,n){ur(t),ur(e),ln(r),e.length>255&&(e=n(Le(ws("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=Le(e,ir(e.length,1)),m=ir(0,s),A=ir(r,2),B=new Array(f),D=n(Le(m,t,A,ir(0,1),c));B[0]=n(Le(D,ir(1,1),c));for(let E=1;E<=f;E++){const l=[kl(D,B[E-1]),ir(E+1,1),c];B[E]=n(Le(...l))}return Le(...B).slice(0,r)}function Ul(t,e,r,n,i){if(ur(t),ur(e),ln(r),e.length>255){const s=Math.ceil(2*n/8);e=i.create({dkLen:s}).update(ws("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(ir(r,2)).update(e).update(ir(e.length,1)).digest()}function js(t,e,r){xn(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:f,expand:c,DST:m}=r;ur(t),ln(e);const A=typeof m=="string"?ws(m):m,B=n.toString(2).length,D=Math.ceil((B+i)/8),g=e*s*D;let E;if(c==="xmd")E=Il(t,A,g,f);else if(c==="xof")E=Ul(t,A,g,i,f);else if(c==="_internal_pass")E=t;else throw new Error('expand must be "xmd" or "xof"');const l=new Array(e);for(let a=0;a<e;a++){const o=new Array(s);for(let d=0;d<s;d++){const x=D*(d+a*s),v=E.subarray(x,x+D);o[d]=Ve(Nl(v),n)}l[a]=o}return l}function Go(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,f,c,m]=r.map(A=>A.reduce((B,D)=>t.add(t.mul(B,n),D)));return n=t.div(s,f),i=t.mul(i,t.div(c,m)),{x:n,y:i}}}function Ks(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=js(n,2,{...r,DST:r.DST,...i}),f=t.fromAffine(e(s[0])),c=t.fromAffine(e(s[1])),m=f.add(c).clearCofactor();return m.assertValidity(),m},encodeToCurve(n,i){const s=js(n,1,{...r,DST:r.encodeDST,...i}),f=t.fromAffine(e(s[0])).clearCofactor();return f.assertValidity(),f},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const s of n)if(typeof s!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ls=BigInt(0),Fn=BigInt(1);function Ui(t,e){const r=e.negate();return t?r:e}function Xo(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ri(t,e){Xo(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function Rl(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Ol(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Oi=new WeakMap,jo=new WeakMap;function Mi(t){return jo.get(t)||1}function Ko(t,e){return{constTimeNegate:Ui,hasPrecomputes(r){return Mi(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Ls;)n&Fn&&(i=i.add(s)),s=s.double(),n>>=Fn;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Ri(n,e),f=[];let c=r,m=c;for(let A=0;A<i;A++){m=c,f.push(m);for(let B=1;B<s;B++)m=m.add(c),f.push(m);c=m.double()}return f},wNAF(r,n,i){const{windows:s,windowSize:f}=Ri(r,e);let c=t.ZERO,m=t.BASE;const A=BigInt(2**r-1),B=2**r,D=BigInt(r);for(let g=0;g<s;g++){const E=g*f;let l=Number(i&A);i>>=D,l>f&&(l-=B,i+=Fn);const a=E,o=E+Math.abs(l)-1,d=g%2!==0,x=l<0;l===0?m=m.add(Ui(d,n[a])):c=c.add(Ui(x,n[o]))}return{p:c,f:m}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:f,windowSize:c}=Ri(r,e),m=BigInt(2**r-1),A=2**r,B=BigInt(r);for(let D=0;D<f;D++){const g=D*c;if(i===Ls)break;let E=Number(i&m);if(i>>=B,E>c&&(E-=A,i+=Fn),E===0)continue;let l=n[g+Math.abs(E)-1];E<0&&(l=l.negate()),s=s.add(l)}return s},getPrecomputes(r,n,i){let s=Oi.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Oi.set(n,i(s))),s},wNAFCached(r,n,i){const s=Mi(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const f=Mi(r);return f===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),n,s)},setWindowSize(r,n){Xo(n,e),jo.set(r,n),Oi.delete(r)}}}function Lo(t,e,r,n){if(Rl(r,t),Ol(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=an(BigInt(r.length)),f=s>12?s-3:s>4?s-2:s?2:1,c=(1<<f)-1,m=new Array(c+1).fill(i),A=Math.floor((e.BITS-1)/f)*f;let B=i;for(let D=A;D>=0;D-=f){m.fill(i);for(let E=0;E<n.length;E++){const l=n[E],a=Number(l>>BigInt(D)&BigInt(c));m[a]=m[a].add(r[E])}let g=i;for(let E=m.length-1,l=i;E>0;E--)l=l.add(m[E]),g=g.add(l);if(B=B.add(g),D!==0)for(let E=0;E<f;E++)B=B.double()}return B}function Jo(t){return $o(t.Fp),xn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qo(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ml(t){const e=Jo(t);xn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const wr=BigInt(0),Xe=BigInt(1),er=BigInt(2),hi=BigInt(3),Js=BigInt(4);function Ws(t){const e=Ml(t),{Fp:r}=e,n=gn(e.n,e.nBitLength),i=e.toBytes||((a,o,d)=>{const x=o.toAffine();return Le(Uint8Array.from([4]),r.toBytes(x.x),r.toBytes(x.y))}),s=e.fromBytes||(a=>{const o=a.subarray(1),d=r.fromBytes(o.subarray(0,r.BYTES)),x=r.fromBytes(o.subarray(r.BYTES,2*r.BYTES));return{x:d,y:x}});function f(a){const{a:o,b:d}=e,x=r.sqr(a),v=r.mul(x,a);return r.add(r.add(v,r.mul(a,o)),d)}if(!r.eql(r.sqr(e.Gy),f(e.Gx)))throw new Error("bad generator point: equation left != right");function c(a){return zo(a,Xe,e.n)}function m(a){const{allowedPrivateKeyLengths:o,nByteLength:d,wrapPrivateKey:x,n:v}=e;if(o&&typeof a!="bigint"){if(Ai(a)&&(a=Dr(a)),typeof a!="string"||!o.includes(a.length))throw new Error("invalid private key");a=a.padStart(d*2,"0")}let k;try{k=typeof a=="bigint"?a:Dt(ft("private key",a,d))}catch{throw new Error("invalid private key, expected hex or "+d+" bytes, got "+typeof a)}return x&&(k=Ve(k,v)),ar("private key",k,Xe,v),k}function A(a){if(!(a instanceof g))throw new Error("ProjectivePoint expected")}const B=un((a,o)=>{const{px:d,py:x,pz:v}=a;if(r.eql(v,r.ONE))return{x:d,y:x};const k=a.is0();o==null&&(o=k?r.ONE:r.inv(v));const N=r.mul(d,o),M=r.mul(x,o),P=r.mul(v,o);if(k)return{x:r.ZERO,y:r.ZERO};if(!r.eql(P,r.ONE))throw new Error("invZ was invalid");return{x:N,y:M}}),D=un(a=>{if(a.is0()){if(e.allowInfinityPoint&&!r.is0(a.py))return;throw new Error("bad point: ZERO")}const{x:o,y:d}=a.toAffine();if(!r.isValid(o)||!r.isValid(d))throw new Error("bad point: x or y not FE");const x=r.sqr(d),v=f(o);if(!r.eql(x,v))throw new Error("bad point: equation left != right");if(!a.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(o,d,x){if(this.px=o,this.py=d,this.pz=x,o==null||!r.isValid(o))throw new Error("x required");if(d==null||!r.isValid(d))throw new Error("y required");if(x==null||!r.isValid(x))throw new Error("z required");Object.freeze(this)}static fromAffine(o){const{x:d,y:x}=o||{};if(!o||!r.isValid(d)||!r.isValid(x))throw new Error("invalid affine point");if(o instanceof g)throw new Error("projective point not allowed");const v=k=>r.eql(k,r.ZERO);return v(d)&&v(x)?g.ZERO:new g(d,x,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(o){const d=r.invertBatch(o.map(x=>x.pz));return o.map((x,v)=>x.toAffine(d[v])).map(g.fromAffine)}static fromHex(o){const d=g.fromAffine(s(ft("pointHex",o)));return d.assertValidity(),d}static fromPrivateKey(o){return g.BASE.multiply(m(o))}static msm(o,d){return Lo(g,n,o,d)}_setWindowSize(o){l.setWindowSize(this,o)}assertValidity(){D(this)}hasEvenY(){const{y:o}=this.toAffine();if(r.isOdd)return!r.isOdd(o);throw new Error("Field doesn't support isOdd")}equals(o){A(o);const{px:d,py:x,pz:v}=this,{px:k,py:N,pz:M}=o,P=r.eql(r.mul(d,M),r.mul(k,v)),j=r.eql(r.mul(x,M),r.mul(N,v));return P&&j}negate(){return new g(this.px,r.neg(this.py),this.pz)}double(){const{a:o,b:d}=e,x=r.mul(d,hi),{px:v,py:k,pz:N}=this;let M=r.ZERO,P=r.ZERO,j=r.ZERO,K=r.mul(v,v),W=r.mul(k,k),ae=r.mul(N,N),he=r.mul(v,k);return he=r.add(he,he),j=r.mul(v,N),j=r.add(j,j),M=r.mul(o,j),P=r.mul(x,ae),P=r.add(M,P),M=r.sub(W,P),P=r.add(W,P),P=r.mul(M,P),M=r.mul(he,M),j=r.mul(x,j),ae=r.mul(o,ae),he=r.sub(K,ae),he=r.mul(o,he),he=r.add(he,j),j=r.add(K,K),K=r.add(j,K),K=r.add(K,ae),K=r.mul(K,he),P=r.add(P,K),ae=r.mul(k,N),ae=r.add(ae,ae),K=r.mul(ae,he),M=r.sub(M,K),j=r.mul(ae,W),j=r.add(j,j),j=r.add(j,j),new g(M,P,j)}add(o){A(o);const{px:d,py:x,pz:v}=this,{px:k,py:N,pz:M}=o;let P=r.ZERO,j=r.ZERO,K=r.ZERO;const W=e.a,ae=r.mul(e.b,hi);let he=r.mul(d,k),R=r.mul(x,N),z=r.mul(v,M),X=r.add(d,x),Y=r.add(k,N);X=r.mul(X,Y),Y=r.add(he,R),X=r.sub(X,Y),Y=r.add(d,v);let L=r.add(k,M);return Y=r.mul(Y,L),L=r.add(he,z),Y=r.sub(Y,L),L=r.add(x,v),P=r.add(N,M),L=r.mul(L,P),P=r.add(R,z),L=r.sub(L,P),K=r.mul(W,Y),P=r.mul(ae,z),K=r.add(P,K),P=r.sub(R,K),K=r.add(R,K),j=r.mul(P,K),R=r.add(he,he),R=r.add(R,he),z=r.mul(W,z),Y=r.mul(ae,Y),R=r.add(R,z),z=r.sub(he,z),z=r.mul(W,z),Y=r.add(Y,z),he=r.mul(R,Y),j=r.add(j,he),he=r.mul(L,Y),P=r.mul(X,P),P=r.sub(P,he),he=r.mul(X,R),K=r.mul(L,K),K=r.add(K,he),new g(P,j,K)}subtract(o){return this.add(o.negate())}is0(){return this.equals(g.ZERO)}wNAF(o){return l.wNAFCached(this,o,g.normalizeZ)}multiplyUnsafe(o){const{endo:d,n:x}=e;ar("scalar",o,wr,x);const v=g.ZERO;if(o===wr)return v;if(this.is0()||o===Xe)return this;if(!d||l.hasPrecomputes(this))return l.wNAFCachedUnsafe(this,o,g.normalizeZ);let{k1neg:k,k1:N,k2neg:M,k2:P}=d.splitScalar(o),j=v,K=v,W=this;for(;N>wr||P>wr;)N&Xe&&(j=j.add(W)),P&Xe&&(K=K.add(W)),W=W.double(),N>>=Xe,P>>=Xe;return k&&(j=j.negate()),M&&(K=K.negate()),K=new g(r.mul(K.px,d.beta),K.py,K.pz),j.add(K)}multiply(o){const{endo:d,n:x}=e;ar("scalar",o,Xe,x);let v,k;if(d){const{k1neg:N,k1:M,k2neg:P,k2:j}=d.splitScalar(o);let{p:K,f:W}=this.wNAF(M),{p:ae,f:he}=this.wNAF(j);K=l.constTimeNegate(N,K),ae=l.constTimeNegate(P,ae),ae=new g(r.mul(ae.px,d.beta),ae.py,ae.pz),v=K.add(ae),k=W.add(he)}else{const{p:N,f:M}=this.wNAF(o);v=N,k=M}return g.normalizeZ([v,k])[0]}multiplyAndAddUnsafe(o,d,x){const v=g.BASE,k=(M,P)=>P===wr||P===Xe||!M.equals(v)?M.multiplyUnsafe(P):M.multiply(P),N=k(this,d).add(k(o,x));return N.is0()?void 0:N}toAffine(o){return B(this,o)}isTorsionFree(){const{h:o,isTorsionFree:d}=e;if(o===Xe)return!0;if(d)return d(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:o,clearCofactor:d}=e;return o===Xe?this:d?d(g,this):this.multiplyUnsafe(e.h)}toRawBytes(o=!0){return nn("isCompressed",o),this.assertValidity(),i(g,this,o)}toHex(o=!0){return nn("isCompressed",o),Dr(this.toRawBytes(o))}}g.BASE=new g(e.Gx,e.Gy,r.ONE),g.ZERO=new g(r.ZERO,r.ONE,r.ZERO);const E=e.nBitLength,l=Ko(g,e.endo?Math.ceil(E/2):E);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:m,weierstrassEquation:f,isWithinCurveOrder:c}}function Pl(t,e){const r=t.ORDER;let n=wr;for(let l=r-Xe;l%er===wr;l/=er)n+=Xe;const i=n,s=er<<i-Xe-Xe,f=s*er,c=(r-Xe)/f,m=(c-Xe)/er,A=f-Xe,B=s,D=t.pow(e,c),g=t.pow(e,(c+Xe)/er);let E=(l,a)=>{let o=D,d=t.pow(a,A),x=t.sqr(d);x=t.mul(x,a);let v=t.mul(l,x);v=t.pow(v,m),v=t.mul(v,d),d=t.mul(v,a),x=t.mul(v,l);let k=t.mul(x,d);v=t.pow(k,B);let N=t.eql(v,t.ONE);d=t.mul(x,g),v=t.mul(k,o),x=t.cmov(d,x,N),k=t.cmov(v,k,N);for(let M=i;M>Xe;M--){let P=M-er;P=er<<P-Xe;let j=t.pow(k,P);const K=t.eql(j,t.ONE);d=t.mul(x,o),o=t.mul(o,o),j=t.mul(k,o),x=t.cmov(d,x,K),k=t.cmov(j,k,K)}return{isValid:N,value:x}};if(t.ORDER%Js===hi){const l=(t.ORDER-hi)/Js,a=t.sqrt(t.neg(e));E=(o,d)=>{let x=t.sqr(d);const v=t.mul(o,d);x=t.mul(x,v);let k=t.pow(x,l);k=t.mul(k,v);const N=t.mul(k,a),M=t.mul(t.sqr(k),d),P=t.eql(M,o);let j=t.cmov(N,k,P);return{isValid:P,value:j}}}return E}function Wo(t,e){if($o(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=Pl(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,f,c,m,A,B,D;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),f=t.add(s,t.ONE),f=t.mul(f,e.B),c=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),c=t.mul(c,e.A),s=t.sqr(f),A=t.sqr(c),m=t.mul(A,e.A),s=t.add(s,m),s=t.mul(s,f),A=t.mul(A,c),m=t.mul(A,e.B),s=t.add(s,m),B=t.mul(i,f);const{isValid:g,value:E}=r(s,A);D=t.mul(i,n),D=t.mul(D,E),B=t.cmov(B,f,g),D=t.cmov(D,E,g);const l=t.isOdd(n)===t.isOdd(D);return D=t.cmov(t.neg(D),D,l),B=t.div(B,c),{x:B,y:D}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zl=BigInt(0),Cn=BigInt(1),Ys=BigInt(2),Pr=BigInt(3);function $l(t){const e=[];for(;t>Cn;t>>=Cn)(t&Cn)===zl?e.unshift(0):(t&Pr)===Pr?(e.unshift(-1),t+=Cn):e.unshift(1);return e}function ql(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:s}=t.fields,f=t.params.xNegative,c=t.params.twistType,m=Ws({n:r.ORDER,...t.G1}),A=Object.assign(m,Ks(m.ProjectivePoint,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),B=Ws({n:r.ORDER,...t.G2}),D=Object.assign(B,Ks(B.ProjectivePoint,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let g;if(c==="multiplicative")g=(ne,_,ce,pe,ye,ie)=>s.mul014(pe,ne,n.mul(_,ye),n.mul(ce,ie));else if(c==="divisive")g=(ne,_,ce,pe,ye,ie)=>s.mul034(pe,n.mul(ce,ie),n.mul(_,ye),ne);else throw new Error("bls: unknown twist type");const E=n.div(n.ONE,n.mul(n.ONE,Ys));function l(ne,_,ce,pe){const ye=n.sqr(ce),ie=n.sqr(pe),de=n.mulByB(n.mul(ie,Pr)),F=n.mul(de,Pr),T=n.sub(n.sub(n.sqr(n.add(ce,pe)),ie),ye),U=n.sub(de,ye),H=n.mul(n.sqr(_),Pr),q=n.neg(T);return ne.push([U,H,q]),_=n.mul(n.mul(n.mul(n.sub(ye,F),_),ce),E),ce=n.sub(n.sqr(n.mul(n.add(ye,F),E)),n.mul(n.sqr(de),Pr)),pe=n.mul(ye,T),{Rx:_,Ry:ce,Rz:pe}}function a(ne,_,ce,pe,ye,ie){const de=n.sub(ce,n.mul(ie,pe)),F=n.sub(_,n.mul(ye,pe)),T=n.sub(n.mul(de,ye),n.mul(F,ie)),U=n.neg(de),H=F;ne.push([T,U,H]);const q=n.sqr(F),G=n.mul(q,F),w=n.mul(q,_),u=n.add(n.sub(G,n.mul(w,Ys)),n.mul(n.sqr(de),pe));return _=n.mul(F,u),ce=n.sub(n.mul(n.sub(w,u),de),n.mul(G,ce)),pe=n.mul(pe,G),{Rx:_,Ry:ce,Rz:pe}}const o=$l(t.params.ateLoopSize),d=un(ne=>{const _=ne,{x:ce,y:pe}=_.toAffine(),ye=ce,ie=pe,de=n.neg(pe);let F=ye,T=ie,U=n.ONE;const H=[];for(const q of o){const G=[];({Rx:F,Ry:T,Rz:U}=l(G,F,T,U)),q&&({Rx:F,Ry:T,Rz:U}=a(G,F,T,U,ye,q===-1?de:ie)),H.push(G)}if(t.postPrecompute){const q=H[H.length-1];t.postPrecompute(F,T,U,ye,ie,a.bind(null,q))}return H});function x(ne,_=!1){let ce=s.ONE;if(ne.length){const pe=ne[0][0].length;for(let ye=0;ye<pe;ye++){ce=s.sqr(ce);for(const[ie,de,F]of ne)for(const[T,U,H]of ie[ye])ce=g(T,U,H,ce,de,F)}}return f&&(ce=s.conjugate(ce)),_?s.finalExponentiate(ce):ce}function v(ne,_=!0){const ce=[];A.ProjectivePoint.normalizeZ(ne.map(({g1:pe})=>pe)),D.ProjectivePoint.normalizeZ(ne.map(({g2:pe})=>pe));for(const{g1:pe,g2:ye}of ne){if(pe.equals(A.ProjectivePoint.ZERO)||ye.equals(D.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");pe.assertValidity(),ye.assertValidity();const ie=pe.toAffine();ce.push([d(ye),ie.x,ie.y])}return x(ce,_)}function k(ne,_,ce=!0){return v([{g1:ne,g2:_}],ce)}const N={randomPrivateKey:()=>{const ne=Ho(r.ORDER);return Tl(t.randomBytes(ne),r.ORDER)},calcPairingPrecomputes:d},{ShortSignature:M}=t.G1,{Signature:P}=t.G2;function j(ne){return ne instanceof A.ProjectivePoint?ne:A.ProjectivePoint.fromHex(ne)}function K(ne,_){return ne instanceof A.ProjectivePoint?ne:A.hashToCurve(ft("point",ne),_)}function W(ne){return ne instanceof D.ProjectivePoint?ne:P.fromHex(ne)}function ae(ne,_){return ne instanceof D.ProjectivePoint?ne:D.hashToCurve(ft("point",ne),_)}function he(ne){return A.ProjectivePoint.fromPrivateKey(ne).toRawBytes(!0)}function R(ne){return D.ProjectivePoint.fromPrivateKey(ne).toRawBytes(!0)}function z(ne,_,ce){const pe=ae(ne,ce);pe.assertValidity();const ye=pe.multiply(A.normPrivateKeyToScalar(_));return ne instanceof D.ProjectivePoint?ye:P.toRawBytes(ye)}function X(ne,_,ce){const pe=K(ne,ce);pe.assertValidity();const ye=pe.multiply(A.normPrivateKeyToScalar(_));return ne instanceof A.ProjectivePoint?ye:M.toRawBytes(ye)}function Y(ne,_,ce,pe){const ye=j(ce),ie=ae(_,pe),de=A.ProjectivePoint.BASE,F=W(ne),T=v([{g1:ye.negate(),g2:ie},{g1:de,g2:F}]);return s.eql(T,s.ONE)}function L(ne,_,ce,pe){const ye=W(ce),ie=K(_,pe),de=D.ProjectivePoint.BASE,F=j(ne),T=v([{g1:ie,g2:ye},{g1:F,g2:de.negate()}]);return s.eql(T,s.ONE)}function re(ne){if(!Array.isArray(ne)||ne.length===0)throw new Error("expected non-empty array")}function se(ne){re(ne);const ce=ne.map(j).reduce((pe,ye)=>pe.add(ye),A.ProjectivePoint.ZERO);return ne[0]instanceof A.ProjectivePoint?(ce.assertValidity(),ce):ce.toRawBytes(!0)}function me(ne){re(ne);const ce=ne.map(W).reduce((pe,ye)=>pe.add(ye),D.ProjectivePoint.ZERO);return ne[0]instanceof D.ProjectivePoint?(ce.assertValidity(),ce):P.toRawBytes(ce)}function oe(ne){re(ne);const ce=ne.map(j).reduce((pe,ye)=>pe.add(ye),A.ProjectivePoint.ZERO);return ne[0]instanceof A.ProjectivePoint?(ce.assertValidity(),ce):M.toRawBytes(ce)}function le(ne,_,ce,pe){if(re(_),ce.length!==_.length)throw new Error("amount of public keys and messages should be equal");const ye=W(ne),ie=_.map(U=>ae(U,pe)),de=ce.map(j),F=new Map;for(let U=0;U<de.length;U++){const H=de[U],q=ie[U];let G=F.get(q);G===void 0&&(G=[],F.set(q,G)),G.push(H)}const T=[];try{for(const[U,H]of F){const q=H.reduce((G,w)=>G.add(w));T.push({g1:q,g2:U})}return T.push({g1:A.ProjectivePoint.BASE.negate(),g2:ye}),s.eql(v(T),s.ONE)}catch{return!1}}return A.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:he,getPublicKeyForShortSignatures:R,sign:z,signShortSignature:X,verify:Y,verifyBatch:le,verifyShortSignature:L,aggregatePublicKeys:se,aggregateSignatures:me,aggregateShortSignatures:oe,millerLoopBatch:x,pairing:k,pairingBatch:v,G1:A,G2:D,Signature:P,ShortSignature:M,fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:s},params:{ateLoopSize:t.params.ateLoopSize,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vl=BigInt(0),zr=BigInt(1),jt=BigInt(2),Zs=BigInt(3);function Pi(t,e,r,n,i=1,s){const f=BigInt(s===void 0?n:s),c=r**BigInt(n),m=[];for(let A=0;A<i;A++){const B=BigInt(A+1),D=[];for(let g=0,E=zr;g<n;g++){const l=(B*E-B)/f%c;D.push(t.pow(e,l)),E*=r}m.push(D)}return m}function Hl(t,e,r){const n=e.pow(r,(t.ORDER-zr)/Zs),i=e.pow(r,(t.ORDER-zr)/jt);function s(g,E){const l=e.mul(e.frobeniusMap(g,1),n),a=e.mul(e.frobeniusMap(E,1),i);return[l,a]}const f=e.pow(r,(t.ORDER**jt-zr)/Zs),c=e.pow(r,(t.ORDER**jt-zr)/jt);if(!e.eql(c,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function m(g,E){return[e.mul(g,f),e.neg(E)]}const A=g=>(E,l)=>{const a=l.toAffine(),o=g(a.x,a.y);return E.fromAffine({x:o[0],y:o[1]})},B=A(s),D=A(m);return{psi:s,psi2:m,G2psi:B,G2psi2:D,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:c}}function Gl(t){const{ORDER:e}=t,r=gn(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=Cl(e),s=r.div(r.ONE,jt),f=Pi(r,n,r.ORDER,2)[0],c=({c0:R,c1:z},{c0:X,c1:Y})=>({c0:r.add(R,X),c1:r.add(z,Y)}),m=({c0:R,c1:z},{c0:X,c1:Y})=>({c0:r.sub(R,X),c1:r.sub(z,Y)}),A=({c0:R,c1:z},X)=>{if(typeof X=="bigint")return{c0:r.mul(R,X),c1:r.mul(z,X)};const{c0:Y,c1:L}=X;let re=r.mul(R,Y),se=r.mul(z,L);const me=r.sub(re,se),oe=r.sub(r.mul(r.add(R,z),r.add(Y,L)),r.add(re,se));return{c0:me,c1:oe}},B=({c0:R,c1:z})=>{const X=r.add(R,z),Y=r.sub(R,z),L=r.add(R,R);return{c0:r.mul(X,Y),c1:r.mul(L,z)}},D=R=>{if(R.length!==2)throw new Error("invalid tuple");const z=R.map(X=>r.create(X));return{c0:z[0],c1:z[1]}},g=e*e,E=D(t.FP2_NONRESIDUE),l={ORDER:g,isLE:r.isLE,NONRESIDUE:E,BITS:an(g),BYTES:Math.ceil(an(g)/8),MASK:qn(an(g)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:R=>R,isValid:({c0:R,c1:z})=>typeof R=="bigint"&&typeof z=="bigint",is0:({c0:R,c1:z})=>r.is0(R)&&r.is0(z),eql:({c0:R,c1:z},{c0:X,c1:Y})=>r.eql(R,X)&&r.eql(z,Y),neg:({c0:R,c1:z})=>({c0:r.neg(R),c1:r.neg(z)}),pow:(R,z)=>Vn(l,R,z),invertBatch:R=>Hn(l,R),add:c,sub:m,mul:A,sqr:B,addN:c,subN:m,mulN:A,sqrN:B,div:(R,z)=>l.mul(R,typeof z=="bigint"?r.inv(r.create(z)):l.inv(z)),inv:({c0:R,c1:z})=>{const X=r.inv(r.create(R*R+z*z));return{c0:r.mul(X,r.create(R)),c1:r.mul(X,r.create(-z))}},sqrt:R=>{if(t.Fp2sqrt)return t.Fp2sqrt(R);const{c0:z,c1:X}=R;if(r.is0(X))return r.eql(i(r,z),r.ONE)?l.create({c0:r.sqrt(z),c1:r.ZERO}):l.create({c0:r.ZERO,c1:r.sqrt(r.div(z,n))});const Y=r.sqrt(r.sub(r.sqr(z),r.mul(r.sqr(X),n)));let L=r.mul(r.add(Y,z),s);const re=i(r,L);!r.is0(re)&&!r.eql(re,r.ONE)&&(L=r.sub(L,Y));const se=r.sqrt(L),me=l.create({c0:se,c1:r.div(r.mul(X,s),se)});if(!l.eql(l.sqr(me),R))throw new Error("Cannot find square root");const oe=me,le=l.neg(oe),{re:ne,im:_}=l.reim(oe),{re:ce,im:pe}=l.reim(le);return _>pe||_===pe&&ne>ce?oe:le},isOdd:R=>{const{re:z,im:X}=l.reim(R),Y=z%jt,L=z===Vl,re=X%jt;return BigInt(Y||L&&re)==zr},fromBytes(R){if(R.length!==l.BYTES)throw new Error("fromBytes invalid length="+R.length);return{c0:r.fromBytes(R.subarray(0,r.BYTES)),c1:r.fromBytes(R.subarray(r.BYTES))}},toBytes:({c0:R,c1:z})=>Le(r.toBytes(R),r.toBytes(z)),cmov:({c0:R,c1:z},{c0:X,c1:Y},L)=>({c0:r.cmov(R,X,L),c1:r.cmov(z,Y,L)}),reim:({c0:R,c1:z})=>({re:R,im:z}),mulByNonresidue:({c0:R,c1:z})=>l.mul({c0:R,c1:z},E),mulByB:t.Fp2mulByB,fromBigTuple:D,frobeniusMap:({c0:R,c1:z},X)=>({c0:R,c1:r.mul(z,f[X%2])})},a=({c0:R,c1:z,c2:X},{c0:Y,c1:L,c2:re})=>({c0:l.add(R,Y),c1:l.add(z,L),c2:l.add(X,re)}),o=({c0:R,c1:z,c2:X},{c0:Y,c1:L,c2:re})=>({c0:l.sub(R,Y),c1:l.sub(z,L),c2:l.sub(X,re)}),d=({c0:R,c1:z,c2:X},Y)=>{if(typeof Y=="bigint")return{c0:l.mul(R,Y),c1:l.mul(z,Y),c2:l.mul(X,Y)};const{c0:L,c1:re,c2:se}=Y,me=l.mul(R,L),oe=l.mul(z,re),le=l.mul(X,se);return{c0:l.add(me,l.mulByNonresidue(l.sub(l.mul(l.add(z,X),l.add(re,se)),l.add(oe,le)))),c1:l.add(l.sub(l.mul(l.add(R,z),l.add(L,re)),l.add(me,oe)),l.mulByNonresidue(le)),c2:l.sub(l.add(oe,l.mul(l.add(R,X),l.add(L,se))),l.add(me,le))}},x=({c0:R,c1:z,c2:X})=>{let Y=l.sqr(R),L=l.mul(l.mul(R,z),jt),re=l.mul(l.mul(z,X),jt),se=l.sqr(X);return{c0:l.add(l.mulByNonresidue(re),Y),c1:l.add(l.mulByNonresidue(se),L),c2:l.sub(l.sub(l.add(l.add(L,l.sqr(l.add(l.sub(R,z),X))),re),Y),se)}},[v,k]=Pi(l,E,r.ORDER,6,2,3),N={ORDER:l.ORDER,isLE:l.isLE,BITS:3*l.BITS,BYTES:3*l.BYTES,MASK:qn(3*l.BITS),ZERO:{c0:l.ZERO,c1:l.ZERO,c2:l.ZERO},ONE:{c0:l.ONE,c1:l.ZERO,c2:l.ZERO},create:R=>R,isValid:({c0:R,c1:z,c2:X})=>l.isValid(R)&&l.isValid(z)&&l.isValid(X),is0:({c0:R,c1:z,c2:X})=>l.is0(R)&&l.is0(z)&&l.is0(X),neg:({c0:R,c1:z,c2:X})=>({c0:l.neg(R),c1:l.neg(z),c2:l.neg(X)}),eql:({c0:R,c1:z,c2:X},{c0:Y,c1:L,c2:re})=>l.eql(R,Y)&&l.eql(z,L)&&l.eql(X,re),sqrt:Vs,div:(R,z)=>N.mul(R,typeof z=="bigint"?r.inv(r.create(z)):N.inv(z)),pow:(R,z)=>Vn(N,R,z),invertBatch:R=>Hn(N,R),add:a,sub:o,mul:d,sqr:x,addN:a,subN:o,mulN:d,sqrN:x,inv:({c0:R,c1:z,c2:X})=>{let Y=l.sub(l.sqr(R),l.mulByNonresidue(l.mul(X,z))),L=l.sub(l.mulByNonresidue(l.sqr(X)),l.mul(R,z)),re=l.sub(l.sqr(z),l.mul(R,X)),se=l.inv(l.add(l.mulByNonresidue(l.add(l.mul(X,L),l.mul(z,re))),l.mul(R,Y)));return{c0:l.mul(se,Y),c1:l.mul(se,L),c2:l.mul(se,re)}},fromBytes:R=>{if(R.length!==N.BYTES)throw new Error("fromBytes invalid length="+R.length);return{c0:l.fromBytes(R.subarray(0,l.BYTES)),c1:l.fromBytes(R.subarray(l.BYTES,2*l.BYTES)),c2:l.fromBytes(R.subarray(2*l.BYTES))}},toBytes:({c0:R,c1:z,c2:X})=>Le(l.toBytes(R),l.toBytes(z),l.toBytes(X)),cmov:({c0:R,c1:z,c2:X},{c0:Y,c1:L,c2:re},se)=>({c0:l.cmov(R,Y,se),c1:l.cmov(z,L,se),c2:l.cmov(X,re,se)}),fromBigSix:R=>{if(!Array.isArray(R)||R.length!==6)throw new Error("invalid Fp6 usage");return{c0:l.fromBigTuple(R.slice(0,2)),c1:l.fromBigTuple(R.slice(2,4)),c2:l.fromBigTuple(R.slice(4,6))}},frobeniusMap:({c0:R,c1:z,c2:X},Y)=>({c0:l.frobeniusMap(R,Y),c1:l.mul(l.frobeniusMap(z,Y),v[Y%6]),c2:l.mul(l.frobeniusMap(X,Y),k[Y%6])}),mulByFp2:({c0:R,c1:z,c2:X},Y)=>({c0:l.mul(R,Y),c1:l.mul(z,Y),c2:l.mul(X,Y)}),mulByNonresidue:({c0:R,c1:z,c2:X})=>({c0:l.mulByNonresidue(X),c1:R,c2:z}),mul1:({c0:R,c1:z,c2:X},Y)=>({c0:l.mulByNonresidue(l.mul(X,Y)),c1:l.mul(R,Y),c2:l.mul(z,Y)}),mul01({c0:R,c1:z,c2:X},Y,L){let re=l.mul(R,Y),se=l.mul(z,L);return{c0:l.add(l.mulByNonresidue(l.sub(l.mul(l.add(z,X),L),se)),re),c1:l.sub(l.sub(l.mul(l.add(Y,L),l.add(R,z)),re),se),c2:l.add(l.sub(l.mul(l.add(R,X),Y),re),se)}}},M=Pi(l,E,r.ORDER,12,1,6)[0],P=({c0:R,c1:z},{c0:X,c1:Y})=>({c0:N.add(R,X),c1:N.add(z,Y)}),j=({c0:R,c1:z},{c0:X,c1:Y})=>({c0:N.sub(R,X),c1:N.sub(z,Y)}),K=({c0:R,c1:z},X)=>{if(typeof X=="bigint")return{c0:N.mul(R,X),c1:N.mul(z,X)};let{c0:Y,c1:L}=X,re=N.mul(R,Y),se=N.mul(z,L);return{c0:N.add(re,N.mulByNonresidue(se)),c1:N.sub(N.mul(N.add(R,z),N.add(Y,L)),N.add(re,se))}},W=({c0:R,c1:z})=>{let X=N.mul(R,z);return{c0:N.sub(N.sub(N.mul(N.add(N.mulByNonresidue(z),R),N.add(R,z)),X),N.mulByNonresidue(X)),c1:N.add(X,X)}};function ae(R,z){const X=l.sqr(R),Y=l.sqr(z);return{first:l.add(l.mulByNonresidue(Y),X),second:l.sub(l.sub(l.sqr(l.add(R,z)),X),Y)}}const he={ORDER:l.ORDER,isLE:N.isLE,BITS:2*l.BITS,BYTES:2*l.BYTES,MASK:qn(2*l.BITS),ZERO:{c0:N.ZERO,c1:N.ZERO},ONE:{c0:N.ONE,c1:N.ZERO},create:R=>R,isValid:({c0:R,c1:z})=>N.isValid(R)&&N.isValid(z),is0:({c0:R,c1:z})=>N.is0(R)&&N.is0(z),neg:({c0:R,c1:z})=>({c0:N.neg(R),c1:N.neg(z)}),eql:({c0:R,c1:z},{c0:X,c1:Y})=>N.eql(R,X)&&N.eql(z,Y),sqrt:Vs,inv:({c0:R,c1:z})=>{let X=N.inv(N.sub(N.sqr(R),N.mulByNonresidue(N.sqr(z))));return{c0:N.mul(R,X),c1:N.neg(N.mul(z,X))}},div:(R,z)=>he.mul(R,typeof z=="bigint"?r.inv(r.create(z)):he.inv(z)),pow:(R,z)=>Vn(he,R,z),invertBatch:R=>Hn(he,R),add:P,sub:j,mul:K,sqr:W,addN:P,subN:j,mulN:K,sqrN:W,fromBytes:R=>{if(R.length!==he.BYTES)throw new Error("fromBytes invalid length="+R.length);return{c0:N.fromBytes(R.subarray(0,N.BYTES)),c1:N.fromBytes(R.subarray(N.BYTES))}},toBytes:({c0:R,c1:z})=>Le(N.toBytes(R),N.toBytes(z)),cmov:({c0:R,c1:z},{c0:X,c1:Y},L)=>({c0:N.cmov(R,X,L),c1:N.cmov(z,Y,L)}),fromBigTwelve:R=>({c0:N.fromBigSix(R.slice(0,6)),c1:N.fromBigSix(R.slice(6,12))}),frobeniusMap(R,z){const{c0:X,c1:Y,c2:L}=N.frobeniusMap(R.c1,z),re=M[z%12];return{c0:N.frobeniusMap(R.c0,z),c1:N.create({c0:l.mul(X,re),c1:l.mul(Y,re),c2:l.mul(L,re)})}},mulByFp2:({c0:R,c1:z},X)=>({c0:N.mulByFp2(R,X),c1:N.mulByFp2(z,X)}),conjugate:({c0:R,c1:z})=>({c0:R,c1:N.neg(z)}),mul014:({c0:R,c1:z},X,Y,L)=>{let re=N.mul01(R,X,Y),se=N.mul1(z,L);return{c0:N.add(N.mulByNonresidue(se),re),c1:N.sub(N.sub(N.mul01(N.add(z,R),X,l.add(Y,L)),re),se)}},mul034:({c0:R,c1:z},X,Y,L)=>{const re=N.create({c0:l.mul(R.c0,X),c1:l.mul(R.c1,X),c2:l.mul(R.c2,X)}),se=N.mul01(z,Y,L),me=N.mul01(N.add(R,z),l.add(X,Y),L);return{c0:N.add(N.mulByNonresidue(se),re),c1:N.sub(me,N.add(re,se))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:l,Fp6:N,Fp4Square:ae,Fp12:he}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ht=BigInt(0),fi=BigInt(1),et=BigInt(2),Tn=BigInt(3),on=BigInt(4),sr=BigInt("0xd201000000010000"),Xl=an(sr),{Fp:Ee,Fp2:be,Fp6:ts,Fp4Square:zi,Fp12:Ne}=Gl({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[fi,fi],Fp2mulByB:({c0:t,c1:e})=>{const r=Ee.mul(t,on),n=Ee.mul(e,on);return{c0:Ee.sub(r,n),c1:Ee.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:s,c1:f,c2:c}=e,{first:m,second:A}=zi(r,f),{first:B,second:D}=zi(s,i),{first:g,second:E}=zi(n,c),l=be.mulByNonresidue(E);return{c0:ts.create({c0:be.add(be.mul(be.sub(m,r),et),m),c1:be.add(be.mul(be.sub(B,n),et),B),c2:be.add(be.mul(be.sub(g,i),et),g)}),c1:ts.create({c0:be.add(be.mul(be.add(l,s),et),l),c1:be.add(be.mul(be.add(A,f),et),A),c2:be.add(be.mul(be.add(D,c),et),D)})}},Fp12cyclotomicExp(t,e){let r=Ne.ONE;for(let n=Xl-1;n>=0;n--)r=Ne._cyclotomicSquare(r),bl(e,n)&&(r=Ne.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=sr,r=Ne.div(Ne.frobeniusMap(t,6),t),n=Ne.mul(Ne.frobeniusMap(r,2),r),i=Ne.conjugate(Ne._cyclotomicExp(n,e)),s=Ne.mul(Ne.conjugate(Ne._cyclotomicSquare(n)),i),f=Ne.conjugate(Ne._cyclotomicExp(s,e)),c=Ne.conjugate(Ne._cyclotomicExp(f,e)),m=Ne.mul(Ne.conjugate(Ne._cyclotomicExp(c,e)),Ne._cyclotomicSquare(i)),A=Ne.conjugate(Ne._cyclotomicExp(m,e)),B=Ne.frobeniusMap(Ne.mul(i,c),2),D=Ne.frobeniusMap(Ne.mul(f,n),3),g=Ne.frobeniusMap(Ne.mul(m,Ne.conjugate(n)),1),E=Ne.mul(Ne.mul(A,Ne.conjugate(s)),n);return Ne.mul(Ne.mul(Ne.mul(B,D),g),E)}}),Qs=gn(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),jl=Go(be,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>be.fromBigTuple(e.map(BigInt))))),Kl=Go(Ee,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Ll=Wo(be,{A:be.create({c0:Ee.create(ht),c1:Ee.create(BigInt(240))}),B:be.create({c0:Ee.create(BigInt(1012)),c1:Ee.create(BigInt(1012))}),Z:be.create({c0:Ee.create(BigInt(-2)),c1:Ee.create(BigInt(-1))})}),Jl=Wo(Ee,{A:Ee.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:Ee.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:Ee.create(BigInt(11))}),{G2psi:ea,G2psi2:Wl}=Hl(Ee,be,be.div(be.ONE,be.NONRESIDUE)),$i=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:Ee.ORDER,m:2,k:128,expand:"xmd",hash:cs}),di=hn(Ee.toBytes(ht),{infinity:!0,compressed:!0});function Nn(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function hn(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function ta(t){t.assertValidity();const e=t.equals(gt.G1.ProjectivePoint.ZERO),{x:r,y:n}=t.toAffine();if(e)return di.slice();const i=Ee.ORDER,s=!!(n*et/i);return hn(it(r,Ee.BYTES),{compressed:!0,sort:s})}function ra(t){t.assertValidity();const e=Ee.BYTES;if(t.equals(gt.G2.ProjectivePoint.ZERO))return Le(di,it(ht,e));const{x:r,y:n}=t.toAffine(),{re:i,im:s}=be.reim(r),{re:f,im:c}=be.reim(n),A=!!((c>ht?c*et:f*et)/Ee.ORDER&fi),B=i;return Le(hn(it(s,e),{sort:A,compressed:!0}),it(B,e))}const gt=ql({fields:{Fp:Ee,Fp2:be,Fp6:ts,Fp12:Ne,Fr:Qs},G1:{Fp:Ee,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:Ee.ZERO,b:on,htfDefaults:{...$i,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(Ee.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(sr).negate().multiplyUnsafe(sr).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(sr).add(e),mapToCurve:t=>{const{x:e,y:r}=Jl(Ee.create(t[0]));return Kl(e,r)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=Nn(t);if(i.length===48&&e){const s=Ee.ORDER,f=Dt(i),c=Ee.create(f&Ee.MASK);if(r){if(c!==ht)throw new Error("G1: non-empty compressed point at infinity");return{x:ht,y:ht}}const m=Ee.add(Ee.pow(c,Tn),Ee.create(gt.params.G1b));let A=Ee.sqrt(m);if(!A)throw new Error("invalid compressed G1 point");return A*et/s!==BigInt(n)&&(A=Ee.neg(A)),{x:Ee.create(c),y:Ee.create(A)}}else if(i.length===96&&!e){const s=Dt(i.subarray(0,Ee.BYTES)),f=Dt(i.subarray(Ee.BYTES));if(r){if(s!==ht||f!==ht)throw new Error("G1: non-empty point at infinity");return gt.G1.ProjectivePoint.ZERO.toAffine()}return{x:Ee.create(s),y:Ee.create(f)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(t,e,r)=>{const n=e.equals(t.ZERO),{x:i,y:s}=e.toAffine();if(r){if(n)return di.slice();const f=Ee.ORDER,c=!!(s*et/f);return hn(it(i,Ee.BYTES),{compressed:!0,sort:c})}else return n?Le(new Uint8Array([64]),new Uint8Array(2*Ee.BYTES-1)):Le(it(i,Ee.BYTES),it(s,Ee.BYTES))},ShortSignature:{fromHex(t){const{infinity:e,sort:r,value:n}=Nn(ft("signatureHex",t,48)),i=Ee.ORDER,s=Dt(n);if(e)return gt.G1.ProjectivePoint.ZERO;const f=Ee.create(s&Ee.MASK),c=Ee.add(Ee.pow(f,Tn),Ee.create(gt.params.G1b));let m=Ee.sqrt(c);if(!m)throw new Error("invalid compressed G1 point");const A=BigInt(r);m*et/i!==A&&(m=Ee.neg(m));const B=gt.G1.ProjectivePoint.fromAffine({x:f,y:m});return B.assertValidity(),B},toRawBytes(t){return ta(t)},toHex(t){return Dr(ta(t))}}},G2:{Fp:be,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:be.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:be.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:be.ZERO,b:be.fromBigTuple([on,on]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...$i},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:t=>{const{x:e,y:r}=Ll(be.fromBigTuple(t));return jl(e,r)},isTorsionFree:(t,e)=>e.multiplyUnsafe(sr).negate().equals(ea(t,e)),clearCofactor:(t,e)=>{const r=sr;let n=e.multiplyUnsafe(r).negate(),i=ea(t,e),s=e.double();return s=Wl(t,s),s=s.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),s=s.add(i),s=s.subtract(n),s.subtract(e)},fromBytes:t=>{const{compressed:e,infinity:r,sort:n,value:i}=Nn(t);if(!e&&!r&&n||!e&&r&&n||n&&r&&e)throw new Error("invalid encoding flag: "+(t[0]&224));const s=Ee.BYTES,f=(c,m,A)=>Dt(c.slice(m,A));if(i.length===96&&e){const c=gt.params.G2b,m=Ee.ORDER;if(r){if(i.reduce((a,o)=>a!==0?o+1:o,0)>0)throw new Error("invalid compressed G2 point");return{x:be.ZERO,y:be.ZERO}}const A=f(i,0,s),B=f(i,s,2*s),D=be.create({c0:Ee.create(B),c1:Ee.create(A)}),g=be.add(be.pow(D,Tn),c);let E=be.sqrt(g);const l=E.c1===ht?E.c0*et/m:E.c1*et/m?fi:ht;return E=n&&l>0?E:be.neg(E),{x:D,y:E}}else if(i.length===192&&!e){if(r){if(i.reduce((D,g)=>D!==0?g+1:g,0)>0)throw new Error("invalid uncompressed G2 point");return{x:be.ZERO,y:be.ZERO}}const c=f(i,0,s),m=f(i,s,2*s),A=f(i,2*s,3*s),B=f(i,3*s,4*s);return{x:be.fromBigTuple([m,c]),y:be.fromBigTuple([B,A])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(t,e,r)=>{const{BYTES:n,ORDER:i}=Ee,s=e.equals(t.ZERO),{x:f,y:c}=e.toAffine();if(r){if(s)return Le(di,it(ht,n));const m=!!(c.c1===ht?c.c0*et/i:c.c1*et/i);return Le(hn(it(f.c1,n),{compressed:!0,sort:m}),it(f.c0,n))}else{if(s)return Le(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:m,im:A}=be.reim(f),{re:B,im:D}=be.reim(c);return Le(it(A,n),it(m,n),it(D,n),it(B,n))}},Signature:{fromHex(t){const{infinity:e,sort:r,value:n}=Nn(ft("signatureHex",t)),i=Ee.ORDER,s=n.length/2;if(s!==48&&s!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const f=Dt(n.slice(0,s)),c=Dt(n.slice(s));if(e)return gt.G2.ProjectivePoint.ZERO;const m=Ee.create(f&Ee.MASK),A=Ee.create(c),B=be.create({c0:A,c1:m}),D=be.add(be.pow(B,Tn),gt.params.G2b);let g=be.sqrt(D);if(!g)throw new Error("Failed to find a square root");const{re:E,im:l}=be.reim(g),a=BigInt(r),o=l>ht&&l*et/i!==a,d=l===ht&&E*et/i!==a;(o||d)&&(g=be.neg(g));const x=gt.G2.ProjectivePoint.fromAffine({x:B,y:g});return x.assertValidity(),x},toRawBytes(t){return ra(t)},toHex(t){return Dr(ra(t))}}},params:{ateLoopSize:sr,r:Qs.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:$i,hash:cs,randomBytes:va});function Yl(t,e,r){const n=typeof t=="string"?t:tt(t),i=typeof e=="string"?e:tt(e),s=typeof r=="string"?r:tt(r);return gt.verifyShortSignature(i,s,n)}const Yo=t=>Qe(new jr(t)),Es=t=>{const e=Yo(t);return new Date(Number(e)/1e6)};var Zl=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Ql=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Gn;class zt extends He{constructor(e){super(`Invalid certificate: ${e}`)}}var yt;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(yt||(yt={}));function eh(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class vr{constructor(e,r,n,i,s=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=s,Gn.set(this,!1),Zl(this,Gn,f,"f"),this.cert=Jt(new Uint8Array(e))}static async create(e){const r=vr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=Yl),new vr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return Gr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await Xn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=rh(r),s=Vt(Qr("ic-state-root"),e);let f=!1;const c=Et(this.lookup(["time"]));if(!c)throw new zt("Certificate does not contain a time");if(!Ql(this,Gn,"f")){const A=this._maxAgeInMinutes*60*1e3,B=Date.now(),D=B-A,g=B+3e5,E=Es(c);if(E.getTime()<D)throw new zt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+E.toISOString()+" Current time: "+new Date(B).toISOString());if(E.getTime()>g)throw new zt("Certificate is signed more than 5 minutes in the future. Certificate time: "+E.toISOString()+" Current time: "+new Date(B).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(s))}catch{f=!1}if(!f)throw new zt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await vr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new zt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==Zh&&!Zo({canisterId:this._canisterId,subnetId:Ce.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new zt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${tt(e.subnet_id)}`);const n=Et(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${tt(e.subnet_id)}`);return n}}Gn=new WeakMap;const Yr=si("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),th=96;function rh(t){const e=Yr.byteLength+th;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,Yr.byteLength);if(!pi(r,Yr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${Yr}, but get ${r}`);return t.slice(Yr.byteLength)}function Et(t){if(t.status===Je.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function Xn(t){switch(t[0]){case yt.Empty:return Ct(Qr("ic-hashtree-empty"));case yt.Pruned:return t[1];case yt.Leaf:return Ct(Vt(Qr("ic-hashtree-leaf"),t[1]));case yt.Labeled:return Ct(Vt(Qr("ic-hashtree-labeled"),t[1],await Xn(t[2])));case yt.Fork:return Ct(Vt(Qr("ic-hashtree-fork"),await Xn(t[1]),await Xn(t[2])));default:throw new Error("unreachable")}}function Qr(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Vt(e,r)}var Je;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(Je||(Je={}));var Kt;(function(t){t.Less="less",t.Greater="greater"})(Kt||(Kt={}));function Gr(t,e){if(t.length===0)switch(e[0]){case yt.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:Je.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:Je.Found,value:e[1].buffer}:{status:Je.Found,value:e[1]}}default:return{status:Je.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=jn(r,e);switch(n.status){case Je.Found:return Gr(t.slice(1),n.value);case Kt.Greater:case Kt.Less:return{status:Je.Absent};default:return n}}function rs(t){switch(t[0]){case yt.Empty:return[];case yt.Fork:return rs(t[1]).concat(rs(t[2]));default:return[t]}}function jn(t,e){switch(e[0]){case yt.Labeled:return eh(t,e[1])?{status:Kt.Greater}:pi(t,e[1])?{status:Je.Found,value:e[2]}:{status:Kt.Less};case yt.Fork:const r=jn(t,e[1]);switch(r.status){case Kt.Greater:{const n=jn(t,e[2]);return n.status===Kt.Less?{status:Je.Absent}:n}case Je.Unknown:{let n=jn(t,e[2]);return n.status===Kt.Less?{status:Je.Unknown}:n}default:return r}case yt.Pruned:return{status:Je.Unknown};default:return{status:Je.Absent}}}function Zo(t){const{canisterId:e,subnetId:r,tree:n}=t,i=Gr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==Je.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Jt(i.value).map(m=>[Ce.fromUint8Array(m[0]),Ce.fromUint8Array(m[1])]).some(m=>m[0].ltEq(e)&&m[1].gtEq(e))}class nh{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const Qo=async t=>{const{agent:e,paths:r}=t,n=Ce.from(t.canisterId),i=[...new Set(r)],s=i.map(m=>ns(m,n)),f=new Map,c=i.map((m,A)=>(async()=>{var B;try{const D=await e.readState(n,{paths:[s[A]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const g=await vr.create({certificate:D.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),E=(o,d)=>{if(d==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const x=ec(D.certificate,n,e.rootKey);return{path:d,data:x}}else return{path:d,data:Et(o.lookup(ns(d,n)))}},{path:l,data:a}=E(g,i[A]);if(!a)console.warn(`Expected to find result for path ${l}, but instead found nothing.`),typeof l=="string"?f.set(l,null):f.set(l.key,null);else switch(l){case"time":{f.set(l,Es(a));break}case"controllers":{f.set(l,sh(a));break}case"module_hash":{f.set(l,na(a));break}case"subnet":{f.set(l,a);break}case"candid":{f.set(l,new TextDecoder().decode(a));break}default:if(typeof l!="string"&&"key"in l&&"path"in l)switch(l.decodeStrategy){case"raw":f.set(l.key,a);break;case"leb128":{f.set(l.key,Yo(a));break}case"cbor":{f.set(l.key,tc(a));break}case"hex":{f.set(l.key,na(a));break}case"utf-8":f.set(l.key,ih(a))}}}catch(D){if(!((B=D==null?void 0:D.message)===null||B===void 0)&&B.includes("Invalid certificate"))throw new He(D.message);typeof m!="string"&&"key"in m&&"path"in m?f.set(m.key,null):f.set(m,null),console.group(),console.warn(`Expected to find result for path ${m}, but instead found nothing.`),console.warn(D),console.groupEnd()}})());return await Promise.all(c),f},ec=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Jt(new Uint8Array(t)),i=n.tree;let s=n.delegation,f;if(s&&s.subnet_id?f=Ce.fromUint8Array(new Uint8Array(s.subnet_id)):!s&&typeof r<"u"?(f=Ce.selfAuthenticating(new Uint8Array(r)),s={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=Ce.selfAuthenticating(Ce.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),s={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!Zo({canisterId:e,subnetId:f,tree:i}))throw new Error("Canister not in range");const m=Gr(["subnet",s.subnet_id,"node"],i);if(m.status!==Je.Found)throw new Error("Node not found");if(m.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const A=rs(m.value),B=new Map;return A.forEach(D=>{const g=Ce.from(new Uint8Array(D[1])).toText(),E=Gr(["public_key"],D[2]);if(E.status!==Je.Found)throw new Error("Public key not found");const l=E.value;if(l.byteLength!==44)throw new Error("Invalid public key length");B.set(g,l)}),{subnetId:Ce.fromUint8Array(new Uint8Array(s.subnet_id)).toText(),nodeKeys:B}},ns=(t,e)=>{const r=new TextEncoder,n=s=>new DataView(r.encode(s).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const s=t.path,f=typeof s=="string"?n(s):s;return[n("canister"),i,n("metadata"),f]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},na=t=>tt(t),tc=t=>Jt(t),ih=t=>new TextDecoder().decode(t),sh=t=>tc(t).map(r=>Ce.fromUint8Array(new Uint8Array(r))),ah=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:nh,encodePath:ns,fetchNodeKeys:ec,request:Qo},Symbol.toStringTag,{value:"Module"})),kn=BigInt(2**32-1),is=BigInt(32);function rc(t,e=!1){return e?{h:Number(t&kn),l:Number(t>>is&kn)}:{h:Number(t>>is&kn)|0,l:Number(t&kn)|0}}function oh(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:f}=rc(t[i],e);[r[i],n[i]]=[s,f]}return[r,n]}const ch=(t,e)=>BigInt(t>>>0)<<is|BigInt(e>>>0),uh=(t,e,r)=>t>>>r,lh=(t,e,r)=>t<<32-r|e>>>r,hh=(t,e,r)=>t>>>r|e<<32-r,fh=(t,e,r)=>t<<32-r|e>>>r,dh=(t,e,r)=>t<<64-r|e>>>r-32,ph=(t,e,r)=>t>>>r-32|e<<64-r,mh=(t,e)=>e,yh=(t,e)=>t,xh=(t,e,r)=>t<<r|e>>>32-r,gh=(t,e,r)=>e<<r|t>>>32-r,wh=(t,e,r)=>e<<r-32|t>>>64-r,Eh=(t,e,r)=>t<<r-32|e>>>64-r;function bh(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const vh=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Ah=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Sh=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Bh=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,_h=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Dh=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Fe={fromBig:rc,split:oh,toBig:ch,shrSH:uh,shrSL:lh,rotrSH:hh,rotrSL:fh,rotrBH:dh,rotrBL:ph,rotr32H:mh,rotr32L:yh,rotlSH:xh,rotlSL:gh,rotlBH:wh,rotlBL:Eh,add:bh,add3L:vh,add3H:Ah,add4L:Sh,add4H:Bh,add5H:Dh,add5L:_h},[Fh,Ch]=Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),tr=new Uint32Array(80),rr=new Uint32Array(80);class Th extends Aa{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:f,Dh:c,Dl:m,Eh:A,El:B,Fh:D,Fl:g,Gh:E,Gl:l,Hh:a,Hl:o}=this;return[e,r,n,i,s,f,c,m,A,B,D,g,E,l,a,o]}set(e,r,n,i,s,f,c,m,A,B,D,g,E,l,a,o){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=f|0,this.Dh=c|0,this.Dl=m|0,this.Eh=A|0,this.El=B|0,this.Fh=D|0,this.Fl=g|0,this.Gh=E|0,this.Gl=l|0,this.Hh=a|0,this.Hl=o|0}process(e,r){for(let v=0;v<16;v++,r+=4)tr[v]=e.getUint32(r),rr[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){const k=tr[v-15]|0,N=rr[v-15]|0,M=Fe.rotrSH(k,N,1)^Fe.rotrSH(k,N,8)^Fe.shrSH(k,N,7),P=Fe.rotrSL(k,N,1)^Fe.rotrSL(k,N,8)^Fe.shrSL(k,N,7),j=tr[v-2]|0,K=rr[v-2]|0,W=Fe.rotrSH(j,K,19)^Fe.rotrBH(j,K,61)^Fe.shrSH(j,K,6),ae=Fe.rotrSL(j,K,19)^Fe.rotrBL(j,K,61)^Fe.shrSL(j,K,6),he=Fe.add4L(P,ae,rr[v-7],rr[v-16]),R=Fe.add4H(he,M,W,tr[v-7],tr[v-16]);tr[v]=R|0,rr[v]=he|0}let{Ah:n,Al:i,Bh:s,Bl:f,Ch:c,Cl:m,Dh:A,Dl:B,Eh:D,El:g,Fh:E,Fl:l,Gh:a,Gl:o,Hh:d,Hl:x}=this;for(let v=0;v<80;v++){const k=Fe.rotrSH(D,g,14)^Fe.rotrSH(D,g,18)^Fe.rotrBH(D,g,41),N=Fe.rotrSL(D,g,14)^Fe.rotrSL(D,g,18)^Fe.rotrBL(D,g,41),M=D&E^~D&a,P=g&l^~g&o,j=Fe.add5L(x,N,P,Ch[v],rr[v]),K=Fe.add5H(j,d,k,M,Fh[v],tr[v]),W=j|0,ae=Fe.rotrSH(n,i,28)^Fe.rotrBH(n,i,34)^Fe.rotrBH(n,i,39),he=Fe.rotrSL(n,i,28)^Fe.rotrBL(n,i,34)^Fe.rotrBL(n,i,39),R=n&s^n&c^s&c,z=i&f^i&m^f&m;d=a|0,x=o|0,a=E|0,o=l|0,E=D|0,l=g|0,{h:D,l:g}=Fe.add(A|0,B|0,K|0,W|0),A=c|0,B=m|0,c=s|0,m=f|0,s=n|0,f=i|0;const X=Fe.add3L(W,he,z);n=Fe.add3H(X,K,ae,R),i=X|0}({h:n,l:i}=Fe.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:f}=Fe.add(this.Bh|0,this.Bl|0,s|0,f|0),{h:c,l:m}=Fe.add(this.Ch|0,this.Cl|0,c|0,m|0),{h:A,l:B}=Fe.add(this.Dh|0,this.Dl|0,A|0,B|0),{h:D,l:g}=Fe.add(this.Eh|0,this.El|0,D|0,g|0),{h:E,l}=Fe.add(this.Fh|0,this.Fl|0,E|0,l|0),{h:a,l:o}=Fe.add(this.Gh|0,this.Gl|0,a|0,o|0),{h:d,l:x}=Fe.add(this.Hh|0,this.Hl|0,d|0,x|0),this.set(n,i,s,f,c,m,A,B,D,g,E,l,a,o,d,x)}roundClean(){tr.fill(0),rr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Nh=os(()=>new Th);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const At=BigInt(0),pt=BigInt(1),In=BigInt(2),kh=BigInt(8),Ih={zip215:!0};function Uh(t){const e=Jo(t);return xn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Rh(t){const e=Uh(t),{Fp:r,n,prehash:i,hash:s,randomBytes:f,nByteLength:c,h:m}=e,A=In<<BigInt(c*8)-pt,B=r.create,D=gn(e.n,e.nBitLength),g=e.uvRatio||((Y,L)=>{try{return{isValid:!0,value:r.sqrt(Y*r.inv(L))}}catch{return{isValid:!1,value:At}}}),E=e.adjustScalarBytes||(Y=>Y),l=e.domain||((Y,L,re)=>{if(nn("phflag",re),L.length||re)throw new Error("Contexts/pre-hash are not supported");return Y});function a(Y,L){ar("coordinate "+Y,L,At,A)}function o(Y){if(!(Y instanceof v))throw new Error("ExtendedPoint expected")}const d=un((Y,L)=>{const{ex:re,ey:se,ez:me}=Y,oe=Y.is0();L==null&&(L=oe?kh:r.inv(me));const le=B(re*L),ne=B(se*L),_=B(me*L);if(oe)return{x:At,y:pt};if(_!==pt)throw new Error("invZ was invalid");return{x:le,y:ne}}),x=un(Y=>{const{a:L,d:re}=e;if(Y.is0())throw new Error("bad point: ZERO");const{ex:se,ey:me,ez:oe,et:le}=Y,ne=B(se*se),_=B(me*me),ce=B(oe*oe),pe=B(ce*ce),ye=B(ne*L),ie=B(ce*B(ye+_)),de=B(pe+B(re*B(ne*_)));if(ie!==de)throw new Error("bad point: equation left != right (1)");const F=B(se*me),T=B(oe*le);if(F!==T)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(L,re,se,me){this.ex=L,this.ey=re,this.ez=se,this.et=me,a("x",L),a("y",re),a("z",se),a("t",me),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(L){if(L instanceof v)throw new Error("extended point not allowed");const{x:re,y:se}=L||{};return a("x",re),a("y",se),new v(re,se,pt,B(re*se))}static normalizeZ(L){const re=r.invertBatch(L.map(se=>se.ez));return L.map((se,me)=>se.toAffine(re[me])).map(v.fromAffine)}static msm(L,re){return Lo(v,D,L,re)}_setWindowSize(L){M.setWindowSize(this,L)}assertValidity(){x(this)}equals(L){o(L);const{ex:re,ey:se,ez:me}=this,{ex:oe,ey:le,ez:ne}=L,_=B(re*ne),ce=B(oe*me),pe=B(se*ne),ye=B(le*me);return _===ce&&pe===ye}is0(){return this.equals(v.ZERO)}negate(){return new v(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){const{a:L}=e,{ex:re,ey:se,ez:me}=this,oe=B(re*re),le=B(se*se),ne=B(In*B(me*me)),_=B(L*oe),ce=re+se,pe=B(B(ce*ce)-oe-le),ye=_+le,ie=ye-ne,de=_-le,F=B(pe*ie),T=B(ye*de),U=B(pe*de),H=B(ie*ye);return new v(F,T,H,U)}add(L){o(L);const{a:re,d:se}=e,{ex:me,ey:oe,ez:le,et:ne}=this,{ex:_,ey:ce,ez:pe,et:ye}=L;if(re===BigInt(-1)){const C=B((oe-me)*(ce+_)),O=B((oe+me)*(ce-_)),J=B(O-C);if(J===At)return this.double();const ue=B(le*In*ye),ge=B(ne*In*pe),we=ge+ue,Be=O+C,b=ge-ue,p=B(we*J),y=B(Be*b),I=B(we*b),V=B(J*Be);return new v(p,y,V,I)}const ie=B(me*_),de=B(oe*ce),F=B(ne*se*ye),T=B(le*pe),U=B((me+oe)*(_+ce)-ie-de),H=T-F,q=T+F,G=B(de-re*ie),w=B(U*H),u=B(q*G),h=B(U*G),S=B(H*q);return new v(w,u,S,h)}subtract(L){return this.add(L.negate())}wNAF(L){return M.wNAFCached(this,L,v.normalizeZ)}multiply(L){const re=L;ar("scalar",re,pt,n);const{p:se,f:me}=this.wNAF(re);return v.normalizeZ([se,me])[0]}multiplyUnsafe(L,re=v.ZERO){const se=L;return ar("scalar",se,At,n),se===At?N:this.is0()||se===pt?this:M.wNAFCachedUnsafe(this,se,v.normalizeZ,re)}isSmallOrder(){return this.multiplyUnsafe(m).is0()}isTorsionFree(){return M.unsafeLadder(this,n).is0()}toAffine(L){return d(this,L)}clearCofactor(){const{h:L}=e;return L===pt?this:this.multiplyUnsafe(L)}static fromHex(L,re=!1){const{d:se,a:me}=e,oe=r.BYTES;L=ft("pointHex",L,oe),nn("zip215",re);const le=L.slice(),ne=L[oe-1];le[oe-1]=ne&-129;const _=sn(le),ce=re?A:r.ORDER;ar("pointHex.y",_,At,ce);const pe=B(_*_),ye=B(pe-pt),ie=B(se*pe-me);let{isValid:de,value:F}=g(ye,ie);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const T=(F&pt)===pt,U=(ne&128)!==0;if(!re&&F===At&&U)throw new Error("Point.fromHex: x=0 and x_0=1");return U!==T&&(F=B(-F)),v.fromAffine({x:F,y:_})}static fromPrivateKey(L){return K(L).point}toRawBytes(){const{x:L,y:re}=this.toAffine(),se=li(re,r.BYTES);return se[se.length-1]|=L&pt?128:0,se}toHex(){return Dr(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,pt,B(e.Gx*e.Gy)),v.ZERO=new v(At,pt,pt,At);const{BASE:k,ZERO:N}=v,M=Ko(v,c*8);function P(Y){return Ve(Y,n)}function j(Y){return P(sn(Y))}function K(Y){const L=r.BYTES;Y=ft("private key",Y,L);const re=ft("hashed private key",s(Y),2*L),se=E(re.slice(0,L)),me=re.slice(L,2*L),oe=j(se),le=k.multiply(oe),ne=le.toRawBytes();return{head:se,prefix:me,scalar:oe,point:le,pointBytes:ne}}function W(Y){return K(Y).pointBytes}function ae(Y=new Uint8Array,...L){const re=Le(...L);return j(s(l(re,ft("context",Y),!!i)))}function he(Y,L,re={}){Y=ft("message",Y),i&&(Y=i(Y));const{prefix:se,scalar:me,pointBytes:oe}=K(L),le=ae(re.context,se,Y),ne=k.multiply(le).toRawBytes(),_=ae(re.context,ne,oe,Y),ce=P(le+_*me);ar("signature.s",ce,At,n);const pe=Le(ne,li(ce,r.BYTES));return ft("result",pe,r.BYTES*2)}const R=Ih;function z(Y,L,re,se=R){const{context:me,zip215:oe}=se,le=r.BYTES;Y=ft("signature",Y,2*le),L=ft("message",L),re=ft("publicKey",re,le),oe!==void 0&&nn("zip215",oe),i&&(L=i(L));const ne=sn(Y.slice(le,2*le));let _,ce,pe;try{_=v.fromHex(re,oe),ce=v.fromHex(Y.slice(0,le),oe),pe=k.multiplyUnsafe(ne)}catch{return!1}if(!oe&&_.isSmallOrder())return!1;const ye=ae(me,ce.toRawBytes(),_.toRawBytes(),L);return ce.add(_.multiplyUnsafe(ye)).subtract(pe).clearCofactor().equals(v.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:he,verify:z,ExtendedPoint:v,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>f(r.BYTES),precompute(Y=8,L=v.BASE){return L._setWindowSize(Y),L.multiply(BigInt(3)),L}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ia=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Oh=BigInt(1),sa=BigInt(2);BigInt(3);const Mh=BigInt(5),Ph=BigInt(8);function zh(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=bs,c=t*t%s*t%s,m=Ut(c,sa,s)*c%s,A=Ut(m,Oh,s)*t%s,B=Ut(A,Mh,s)*A%s,D=Ut(B,e,s)*B%s,g=Ut(D,r,s)*D%s,E=Ut(g,n,s)*g%s,l=Ut(E,i,s)*E%s,a=Ut(l,i,s)*E%s,o=Ut(a,e,s)*B%s;return{pow_p_5_8:Ut(o,sa,s)*t%s,b2:c}}function $h(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function qh(t,e){const r=bs,n=Ve(e*e*e,r),i=Ve(n*n*e,r),s=zh(t*i).pow_p_5_8;let f=Ve(t*n*s,r);const c=Ve(e*f*f,r),m=f,A=Ve(f*ia,r),B=c===t,D=c===Ve(-t,r),g=c===Ve(-t*ia,r);return B&&(f=m),(D||g)&&(f=A),Dl(f,r)&&(f=Ve(-f,r)),{isValid:B||D,value:f}}const Vh=gn(bs,void 0,!0),Hh={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Vh,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ph,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Nh,randomBytes:va,adjustScalarBytes:$h,uvRatio:qh},Gh=Rh(Hh);var aa=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},lt=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},at,en,nc,ic;class Xh{constructor(e={}){at.set(this,void 0),en.set(this,void 0),this[nc]=this.entries.bind(this),this[ic]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();aa(this,at,new Map([...r].map(([s,f])=>[s,{value:f,timestamp:i}])),"f"),aa(this,en,n,"f")}prune(){const e=Date.now();for(const[r,n]of lt(this,at,"f").entries())e-n.timestamp>lt(this,en,"f")&&lt(this,at,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return lt(this,at,"f").set(e,n),this}get(e){const r=lt(this,at,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>lt(this,en,"f")){lt(this,at,"f").delete(e);return}return r.value}}clear(){lt(this,at,"f").clear()}entries(){const e=lt(this,at,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=lt(this,at,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return lt(this,at,"f").keys()}forEach(e,r){for(const[n,i]of lt(this,at,"f").entries())e.call(r,i.value,n,this)}has(e){return lt(this,at,"f").has(e)}delete(e){return lt(this,at,"f").delete(e)}get size(){return lt(this,at,"f").size}}at=new WeakMap,en=new WeakMap,nc=Symbol.iterator,ic=Symbol.toStringTag;const oa=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},ca=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},ss=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},jh=(t,e)=>{const r=ss(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const ua=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function Kh(t,e){const r=2+oa(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const s=new Uint8Array(1+oa(n)+n);return s[i++]=48,i+=ca(s,i,n),s.set(e,i),i+=e.byteLength,s[i++]=3,i+=ca(s,i,t.byteLength+1),s[i++]=0,s.set(new Uint8Array(t),i),s}const Lh=(t,e)=>{let r=0;const n=(c,m)=>{if(i[r++]!==c)throw new Error("Expected: "+m)},i=new Uint8Array(t);if(n(48,"sequence"),r+=ss(i,r),!pi(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const s=jh(i,r)-1;r+=ss(i,r),n(0,"0 padding");const f=i.slice(r);if(s!==f.length)throw new Error(`DER payload mismatch: Expected length ${s} actual length ${f.length}`);return f};var la=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ha=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Kn,Ln;class br{constructor(e){if(Kn.set(this,void 0),Ln.set(this,void 0),e.byteLength!==br.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");la(this,Kn,e,"f"),la(this,Ln,br.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new br(e)}static fromDer(e){return new br(this.derDecode(e))}static derEncode(e){return Kh(e,ua).buffer}static derDecode(e){const r=Lh(e,ua);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return ha(this,Kn,"f")}get derKey(){return ha(this,Ln,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}Kn=new WeakMap,Ln=new WeakMap;br.RAW_KEY_LENGTH=32;class Jh{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class Wh extends Jh{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var Rt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},st=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ot,Jn,Wn,Yn,Zn,Qn,ei,ti,Ur;const sc=.5,ac=1.5,oc=500,cc=6e4,uc=9e5,lc=10;class Si{constructor(e=Si.default){Ot.set(this,void 0),Jn.set(this,void 0),Wn.set(this,void 0),Yn.set(this,void 0),Zn.set(this,void 0),Qn.set(this,void 0),ei.set(this,void 0),ti.set(this,void 0),Ur.set(this,0);const{initialInterval:r=oc,randomizationFactor:n=sc,multiplier:i=ac,maxInterval:s=cc,maxElapsedTime:f=uc,maxIterations:c=lc,date:m=Date}=e;Rt(this,Ot,r,"f"),Rt(this,Jn,n,"f"),Rt(this,Wn,i,"f"),Rt(this,Yn,s,"f"),Rt(this,ti,m,"f"),Rt(this,Zn,m.now(),"f"),Rt(this,Qn,f,"f"),Rt(this,ei,c,"f")}get ellapsedTimeInMsec(){return st(this,ti,"f").now()-st(this,Zn,"f")}get currentInterval(){return st(this,Ot,"f")}get count(){return st(this,Ur,"f")}get randomValueFromInterval(){const e=st(this,Jn,"f")*st(this,Ot,"f"),r=st(this,Ot,"f")-e,n=st(this,Ot,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return Rt(this,Ot,Math.min(st(this,Ot,"f")*st(this,Wn,"f"),st(this,Yn,"f")),"f"),Rt(this,Ur,(e=st(this,Ur,"f"),e++,e),"f"),st(this,Ot,"f")}next(){return this.ellapsedTimeInMsec>=st(this,Qn,"f")||st(this,Ur,"f")>=st(this,ei,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Ot=new WeakMap,Jn=new WeakMap,Wn=new WeakMap,Yn=new WeakMap,Zn=new WeakMap,Qn=new WeakMap,ei=new WeakMap,ti=new WeakMap,Ur=new WeakMap;Si.default={initialInterval:oc,randomizationFactor:sc,multiplier:ac,maxInterval:cc,maxElapsedTime:uc,maxIterations:lc,date:Date};var nt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},xe=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ot,dr,qr,Mt,Gt,$r,tn,Rr,Bt,_t,pr,mr,rn,Or,Mr,yr,Er,hc,ri,ni,xr,Xt;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(Xt||(Xt={}));const Un=60*1e3,Yh="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Zh="aaaaa-aa",Qh="ic0.app",ef=".ic0.app",tf="icp0.io",rf=".icp0.io",nf="icp-api.io",sf=".icp-api.io";class qi extends He{constructor(e){super(e),this.message=e}}class Rn extends He{constructor(e){super(e),this.message=e}}function af(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new qi("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new qi("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new qi("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function of(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,s=i==null?void 0:i.hostname;let f;s&&typeof s=="string"&&(n.some(c=>s.endsWith(c))?f=s:f=r.find(c=>s.endsWith(c))),i&&f?e=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class Tt{constructor(e={}){var r,n;ot.add(this),dr.set(this,null),qr.set(this,!1),Mt.set(this,void 0),Gt.set(this,void 0),$r.set(this,void 0),tn.set(this,void 0),Rr.set(this,0),Bt.set(this,void 0),_t.set(this,void 0),pr.set(this,void 0),mr.set(this,void 0),this._isAgent=!0,this.config={},rn.set(this,0),this.log=new Wh,Or.set(this,[]),Mr.set(this,[]),yr.set(this,new Xh({expirationTime:5*60*1e3})),Er.set(this,!0),ni.set(this,(f,c)=>{if(xe(this,Er,"f")===!1)return f;if(!c)throw new zt("Invalid signature from replica signed query: no matching node key found.");const{status:m,signatures:A=[],requestId:B}=f,D=new TextEncoder().encode("\vic-response");for(const g of A){const{timestamp:E,identity:l}=g,a=Ce.fromUint8Array(l).toText();let o;if(m==="replied"){const{reply:N}=f;o=ui({status:m,reply:N,timestamp:BigInt(E),request_id:B})}else if(m==="rejected"){const{reject_code:N,reject_message:M,error_code:P}=f;o=ui({status:m,reject_code:N,reject_message:M,error_code:P,timestamp:BigInt(E),request_id:B})}else throw new Error(`Unknown status: ${m}`);const d=Vt(D,new Uint8Array(o)),x=c==null?void 0:c.nodeKeys.get(a);if(!x)throw new zt("Invalid signature from replica signed query: no matching node key found.");const v=br.fromDer(x).rawKey;if(Gh.verify(g.signature,new Uint8Array(d),new Uint8Array(v)))return f;throw new zt(`Invalid signature from replica ${a} signed query.`)}return f}),this.config=e,nt(this,Gt,e.fetch||af()||fetch.bind(global),"f"),nt(this,$r,e.fetchOptions,"f"),nt(this,tn,e.callOptions,"f"),nt(this,qr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:xe(this,qr,"f")?this.rootKey=null:this.rootKey=si(Yh);const i=of(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&nt(this,Er,e.verifyQuerySignatures,"f"),nt(this,_t,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const s=()=>new Si({maxIterations:xe(this,_t,"f")});if(nt(this,pr,e.backoffStrategy||s,"f"),this.host.hostname.endsWith(ef)?this.host.hostname=Qh:this.host.hostname.endsWith(rf)?this.host.hostname=tf:this.host.hostname.endsWith(sf)&&(this.host.hostname=nf),e.credentials){const{name:f,password:c}=e.credentials;nt(this,Bt,`${f}${c?":"+c:""}`,"f")}if(nt(this,Mt,Promise.resolve(e.identity||new Ms),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new He(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new He(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);nt(this,mr,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",$s(Qi)),e.useQueryNonces&&this.addTransform("query",$s(Qi)),e.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return xe(this,rn,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=Tt.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await Tt.create(e.config):await Tt.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new He("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=xe(this,Mr,"f").findIndex(s=>(s.priority||0)<n);xe(this,Mr,"f").splice(i>=0?i:xe(this,Mr,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=xe(this,Or,"f").findIndex(s=>(s.priority||0)<n);xe(this,Or,"f").splice(i>=0?i:xe(this,Or,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!xe(this,Mt,"f"))throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");return(await xe(this,Mt,"f")).getPrincipal()}async call(e,r,n){var i,s;await xe(this,ot,"m",xr).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,c=await(n!==void 0?await n:await xe(this,Mt,"f"));if(!c)throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");const m=Ce.from(e),A=r.effectiveCanisterId?Ce.from(r.effectiveCanisterId):m,B=c.getPrincipal()||Ce.anonymous();let D=new Dn(xe(this,mr,"f")*Un);Math.abs(xe(this,Rr,"f"))>1e3*30&&(D=new Dn(xe(this,mr,"f")*Un+xe(this,Rr,"f")));const g={request_type:Zi.Call,canister_id:m,method_name:r.methodName,arg:r.arg,sender:B,ingress_expiry:D};let E=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},xe(this,Bt,"f")?{Authorization:"Basic "+btoa(xe(this,Bt,"f"))}:{})},endpoint:"call",body:g});const l=E.body.nonce?a(E.body.nonce):void 0;g.nonce=l;function a(v){return new Uint8Array(v)}E=await c.transformRequest(E);const o=Ni(E.body),d=xe(this,pr,"f").call(this),x=Os(g);try{const v=()=>(this.log.print(`fetching "/api/v3/canister/${A.toText()}/call" with request:`,E),xe(this,Gt,"f").call(this,""+new URL(`/api/v3/canister/${A.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},xe(this,tn,"f")),E.request),{body:o}))),k=()=>(this.log.print(`fetching "/api/v2/canister/${A.toText()}/call" with request:`,E),xe(this,Gt,"f").call(this,""+new URL(`/api/v2/canister/${A.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},xe(this,tn,"f")),E.request),{body:o}))),M=await xe(this,ot,"m",ri).call(this,{request:f?v:k,backoff:d,tries:0}),P=await M.arrayBuffer(),j=M.status===200&&P.byteLength>0?Jt(P):null;if(j&&"certificate"in j){const K=await this.parseTimeFromResponse({certificate:j.certificate});nt(this,rn,K,"f")}return{requestId:x,response:{ok:M.ok,status:M.status,statusText:M.statusText,body:j,headers:Zr(M.headers)},requestDetails:g}}catch(v){if(v.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const k=`Error while making call: ${(s=v.message)!==null&&s!==void 0?s:String(v)}`,N=new yl(k,v,tt(x),tt(E.body.sender_pubkey),tt(E.body.sender_sig),String(E.body.content.ingress_expiry._value));throw this.log.error(k,N),N}}async query(e,r,n){var i,s,f,c;await xe(this,ot,"m",xr).call(this);const m=xe(this,pr,"f").call(this),A=r.effectiveCanisterId?Ce.from(r.effectiveCanisterId):Ce.from(e);this.log.print(`ecid ${A.toString()}`),this.log.print(`canisterId ${e.toString()}`);let B,D;const g=await(n!==void 0?n:xe(this,Mt,"f"));if(!g)throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");const E=Ce.from(e),l=(g==null?void 0:g.getPrincipal())||Ce.anonymous(),a={request_type:"query",canister_id:E,method_name:r.methodName,arg:r.arg,sender:l,ingress_expiry:new Dn(xe(this,mr,"f")*Un)},o=Os(a);B=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},xe(this,Bt,"f")?{Authorization:"Basic "+btoa(xe(this,Bt,"f"))}:{})},endpoint:"read",body:a}),B=await(g==null?void 0:g.transformRequest(B));const d=Ni(B.body),x={canister:E.toText(),ecid:A,transformedRequest:B,body:d,requestId:o,backoff:m,tries:0},v=async()=>({requestDetails:a,query:await xe(this,ot,"m",hc).call(this,x)}),k=async()=>{if(!xe(this,Er,"f"))return;const N=xe(this,yr,"f").get(A.toString());return N||(await this.fetchSubnetKeys(A.toString()),xe(this,yr,"f").get(A.toString()))};try{const[N,M]=await Promise.all([v(),k()]);D=N;const{requestDetails:P,query:j}=D,K=Object.assign(Object.assign({},j),{requestDetails:P});if(this.log.print("Query response:",K),!xe(this,Er,"f"))return K;try{return xe(this,ni,"f").call(this,K,M)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),xe(this,yr,"f").delete(e.toString()),await this.fetchSubnetKeys(A.toString());const ae=xe(this,yr,"f").get(e.toString());if(!ae)throw new zt("Invalid signature from replica signed query: no matching node key found.");return xe(this,ni,"f").call(this,K,ae)}}catch(N){const M=`Error while making call: ${(i=N.message)!==null&&i!==void 0?i:String(N)}`,P=new xl(M,N,String(o),tt((s=B==null?void 0:B.body)===null||s===void 0?void 0:s.sender_pubkey),tt((f=B==null?void 0:B.body)===null||f===void 0?void 0:f.sender_sig),String((c=B==null?void 0:B.body)===null||c===void 0?void 0:c.content.ingress_expiry._value));throw this.log.error(M,P),P}}async createReadStateRequest(e,r){await xe(this,ot,"m",xr).call(this);const n=await(r!==void 0?await r:await xe(this,Mt,"f"));if(!n)throw new Rn("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||Ce.anonymous(),s=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},xe(this,Bt,"f")?{Authorization:"Basic "+btoa(xe(this,Bt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new Dn(xe(this,mr,"f")*Un)}});return n==null?void 0:n.transformRequest(s)}async readState(e,r,n,i){var s,f,c,m;function A(a){for(const o of a.paths){const[d,x]=o,v=new TextEncoder().encode("request_status");if(pi(d,v))return x}}const B=A(r);await xe(this,ot,"m",xr).call(this);const D=typeof e=="string"?Ce.fromText(e):e,g=i??await this.createReadStateRequest(r,n),E=Ni(g.body);this.log.print(`fetching "/api/v2/canister/${D}/read_state" with request:`,g);const l=xe(this,pr,"f").call(this);try{const a=await xe(this,ot,"m",ri).call(this,{request:()=>xe(this,Gt,"f").call(this,""+new URL(`/api/v2/canister/${D.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},xe(this,$r,"f")),g.request),{body:E})),backoff:l,tries:0});if(!a.ok)throw new Error(`Server returned an error:
  Code: ${a.status} (${a.statusText})
  Body: ${await a.text()}
`);const o=Jt(await a.arrayBuffer());this.log.print("Read state response:",o);const d=await this.parseTimeFromResponse(o);return d>0&&(this.log.print("Read state response time:",d),nt(this,rn,d,"f")),o}catch(a){const o=`Caught exception while attempting to read state: ${(s=a.message)!==null&&s!==void 0?s:String(a)}`,d=new gl(o,a,String(B),tt((f=g==null?void 0:g.body)===null||f===void 0?void 0:f.sender_pubkey),tt((c=g==null?void 0:g.body)===null||c===void 0?void 0:c.sender_sig),String((m=g==null?void 0:g.body)===null||m===void 0?void 0:m.content.ingress_expiry._value));throw this.log.error(o,d),d}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=Jt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Gr(["time"],r);if(i.status!==Je.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const s=Es(_a(i.value));return this.log.print("Time from response:",s),this.log.print("Time from response in milliseconds:",Number(s)),Number(s)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await xe(this,ot,"m",xr).call(this);const r=await Lc(()=>Promise.resolve().then(()=>ah),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=Tt.createSync({identity:new Ms,host:this.host.toString(),fetch:xe(this,Gt,"f"),retryTimes:0}),f=(await r.request({canisterId:e??Ce.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(nt(this,Rr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${xe(this,Rr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=xe(this,Bt,"f")?{Authorization:"Basic "+btoa(xe(this,Bt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=xe(this,pr,"f").call(this),n=await xe(this,ot,"m",ri).call(this,{backoff:r,request:()=>xe(this,Gt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},xe(this,$r,"f"))),tries:0});return Jt(await n.arrayBuffer())}async fetchRootKey(){let e;return xe(this,dr,"f")?e=await xe(this,dr,"f"):(nt(this,dr,new Promise((r,n)=>{this.status().then(i=>{const s=i.root_key;this.rootKey=s,r(s)}).catch(n)}),"f"),e=await xe(this,dr,"f")),nt(this,dr,null,"f"),e}invalidateIdentity(){nt(this,Mt,null,"f")}replaceIdentity(e){nt(this,Mt,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await xe(this,ot,"m",xr).call(this);const r=Ce.from(e),i=(await Qo({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return xe(this,yr,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of xe(this,Mr,"f"))r=r.then(i=>n(i).then(s=>s||i));else for(const n of xe(this,Or,"f"))r=r.then(i=>n(i).then(s=>s||i));return r}}dr=new WeakMap,qr=new WeakMap,Mt=new WeakMap,Gt=new WeakMap,$r=new WeakMap,tn=new WeakMap,Rr=new WeakMap,Bt=new WeakMap,_t=new WeakMap,pr=new WeakMap,mr=new WeakMap,rn=new WeakMap,Or=new WeakMap,Mr=new WeakMap,yr=new WeakMap,Er=new WeakMap,ni=new WeakMap,ot=new WeakSet,hc=async function t(e){var r,n;const{ecid:i,transformedRequest:s,body:f,requestId:c,backoff:m,tries:A}=e,B=A===0?0:m.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:A,backoff:m,delay:B}),B===null)throw new He(`Timestamp failed to pass the watermark after retrying the configured ${xe(this,_t,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);B>0&&await new Promise(l=>setTimeout(l,B));let D;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,s);const l=await xe(this,Gt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},xe(this,$r,"f")),s.request),{body:f}));if(l.status===200){const a=Jt(await l.arrayBuffer());D=Object.assign(Object.assign({},a),{httpDetails:{ok:l.ok,status:l.status,statusText:l.statusText,headers:Zr(l.headers)},requestId:c})}else throw new ki(`Gateway returned an error:
  Code: ${l.status} (${l.statusText})
  Body: ${await l.text()}
`,{ok:l.ok,status:l.status,statusText:l.statusText,headers:Zr(l.headers)})}catch(l){if(A<xe(this,_t,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${l}
  Retrying query.`),await xe(this,ot,"m",t).call(this,Object.assign(Object.assign({},e),{tries:A+1}));throw l}const g=(n=(r=D.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!xe(this,Er,"f"))return D;if(!g)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const E=Number(BigInt(g)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:E}),Number(this.waterMark)>E){const l=new He("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",l,{timestamp:g,waterMark:this.waterMark}),A<xe(this,_t,"f"))return await xe(this,ot,"m",t).call(this,Object.assign(Object.assign({},e),{tries:A+1}));throw new He(`Timestamp failed to pass the watermark after retrying the configured ${xe(this,_t,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return D},ri=async function t(e){const{request:r,backoff:n,tries:i}=e,s=i===0?0:n.next();if(s===null)throw new He(`Timestamp failed to pass the watermark after retrying the configured ${xe(this,_t,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);s>0&&await new Promise(A=>setTimeout(A,s));let f;try{f=await r()}catch(A){if(xe(this,_t,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${A}
  Retrying request.`),await xe(this,ot,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw A}if(f.ok)return f;const c=await f.clone().text(),m=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${c}
`;if(f.status===404&&f.url.includes("api/v3"))throw new ki("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:Zr(f.headers)});if(i<xe(this,_t,"f"))return await xe(this,ot,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new ki(m,{ok:f.ok,status:f.status,statusText:f.statusText,headers:Zr(f.headers)})},xr=async function(){if(!this.rootKey)if(this.rootKey===null&&xe(this,qr,"f"))await this.fetchRootKey();else throw new He(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${xe(this,qr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var fa;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(fa||(fa={}));function da(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const cf=5*60*1e3;function fc(){return df(lf(uf(),1e3),ff(1e3,1.2),hf(cf))}function uf(){let t=!0;return async()=>t?(t=!1,!0):!1}function lf(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(s=>setTimeout(s,e))}}function hf(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${tt(n)}
  Request status: ${i}
`)}}function ff(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function df(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function dc(t,e,r,n=fc(),i,s){var f;const c=[new TextEncoder().encode("request_status"),r],m=i??await((f=t.createReadStateRequest)===null||f===void 0?void 0:f.call(t,{paths:[c]})),A=await t.readState(e,{paths:[c]},void 0,m);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const B=await vr.create({certificate:A.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:s}),D=Et(B.lookup([...c,new TextEncoder().encode("status")]));let g;switch(typeof D>"u"?g=Xt.Unknown:g=new TextDecoder().decode(D),g){case Xt.Replied:return{reply:Et(B.lookup([...c,"reply"])),certificate:B};case Xt.Received:case Xt.Unknown:case Xt.Processing:return await n(e,r,g),dc(t,e,r,n,m,s);case Xt.Rejected:{const E=new Uint8Array(Et(B.lookup([...c,"reject_code"])))[0],l=new TextDecoder().decode(Et(B.lookup([...c,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${tt(r)}
  Reject code: ${E}
  Reject text: ${l}
`)}case Xt.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${tt(r)}
`)}throw new Error("unreachable")}const pf=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,s=i,f=t.Nat32,c=t.Record({start_height:f,end_height:t.Opt(f),network:e}),m=t.Vec(t.Nat8),A=t.Record({tip_height:f,block_headers:t.Vec(m)}),B=t.Record({network:e}),D=t.Nat64,g=t.Vec(D),E=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),l=t.Vec(t.Nat8),a=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),o=t.Record({height:t.Nat32,value:i,outpoint:a}),d=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:f,tip_block_hash:l,utxos:t.Vec(o)}),x=t.Record({transaction:t.Vec(t.Nat8),network:e}),v=t.Principal,k=t.Record({canister_id:v,num_requested_changes:t.Opt(t.Nat64)}),N=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),M=t.Vec(t.Nat8),P=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:M}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),j=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:N,details:P}),K=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(j),total_num_changes:t.Nat64}),W=t.Record({canister_id:v}),ae=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),he=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:ae,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),R=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:he,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),z=t.Record({canister_id:v}),X=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(ae),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),Y=t.Record({settings:t.Opt(X),sender_canister_version:t.Opt(t.Nat64)}),L=t.Record({canister_id:v}),re=t.Record({canister_id:v}),se=t.Record({canister_id:v,snapshot_id:M}),me=t.Record({canister_id:v}),oe=t.Variant({secp256k1:t.Null}),le=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt(v),derivation_path:t.Vec(t.Vec(t.Nat8))}),ne=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),_=t.Record({canister_id:v}),ce=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),pe=t.Record({canister_log_records:t.Vec(ce)}),ye=t.Record({value:t.Text,name:t.Text}),ie=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(ye)}),de=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:ie})],[ie],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(ye)}),F=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),T=t.Record({hash:t.Vec(t.Nat8)}),U=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:F,chunk_hashes_list:t.Vec(T),target_canister:v,store_canister:t.Opt(v),sender_canister_version:t.Opt(t.Nat64)}),H=t.Vec(t.Nat8),q=t.Record({arg:t.Vec(t.Nat8),wasm_module:H,mode:F,canister_id:v,sender_canister_version:t.Opt(t.Nat64)}),G=t.Record({canister_id:v}),w=t.Record({id:M,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),u=t.Vec(w),h=t.Record({canister_id:v,sender_canister_version:t.Opt(t.Nat64),snapshot_id:M}),S=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),C=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),O=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(C)})),J=t.Record({settings:t.Opt(X),specified_id:t.Opt(v),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),ue=t.Record({canister_id:v}),ge=t.Record({canister_id:v,amount:t.Nat}),we=t.Vec(t.Nat8),Be=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),b=t.Record({key_id:t.Record({algorithm:Be,name:t.Text}),canister_id:t.Opt(v),derivation_path:t.Vec(t.Vec(t.Nat8))}),p=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),y=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),I=t.Record({signature:t.Vec(t.Nat8)}),V=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),Q=t.Record({aux:t.Opt(V),key_id:t.Record({algorithm:Be,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),Z=t.Record({signature:t.Vec(t.Nat8)}),Se=t.Record({canister_id:v}),De=t.Record({canister_id:v}),_e=t.Record({canister_id:v}),ve=t.Vec(T),Ue=t.Record({subnet_id:t.Principal}),Oe=t.Record({replica_version:t.Text}),Lr=t.Record({replace_snapshot:t.Opt(M),canister_id:v}),Jr=w,ee=t.Record({canister_id:v,sender_canister_version:t.Opt(t.Nat64)}),te=t.Record({canister_id:t.Principal,settings:X,sender_canister_version:t.Opt(t.Nat64)}),fe=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),Ae=T;return t.Service({bitcoin_get_balance:t.Func([n],[s],[]),bitcoin_get_block_headers:t.Func([c],[A],[]),bitcoin_get_current_fee_percentiles:t.Func([B],[g],[]),bitcoin_get_utxos:t.Func([E],[d],[]),bitcoin_send_transaction:t.Func([x],[],[]),canister_info:t.Func([k],[K],[]),canister_status:t.Func([W],[R],[]),clear_chunk_store:t.Func([z],[],[]),create_canister:t.Func([Y],[L],[]),delete_canister:t.Func([re],[],[]),delete_canister_snapshot:t.Func([se],[],[]),deposit_cycles:t.Func([me],[],[]),ecdsa_public_key:t.Func([le],[ne],[]),fetch_canister_logs:t.Func([_],[pe],["query"]),http_request:t.Func([de],[ie],[]),install_chunked_code:t.Func([U],[],[]),install_code:t.Func([q],[],[]),list_canister_snapshots:t.Func([G],[u],[]),load_canister_snapshot:t.Func([h],[],[]),node_metrics_history:t.Func([S],[O],[]),provisional_create_canister_with_cycles:t.Func([J],[ue],[]),provisional_top_up_canister:t.Func([ge],[],[]),raw_rand:t.Func([],[we],[]),schnorr_public_key:t.Func([b],[p],[]),sign_with_ecdsa:t.Func([y],[I],[]),sign_with_schnorr:t.Func([Q],[Z],[]),start_canister:t.Func([Se],[],[]),stop_canister:t.Func([De],[],[]),stored_chunks:t.Func([_e],[ve],[]),subnet_info:t.Func([Ue],[Oe],[]),take_canister_snapshot:t.Func([Lr],[Jr],[]),uninstall_code:t.Func([ee],[],[]),update_settings:t.Func([te],[],[]),upload_chunk:t.Func([fe],[Ae],[])})};class pc extends He{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(s=>`  "${s}": ${JSON.stringify(i[s])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class mf extends pc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=Vi[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class pa extends pc{constructor(e,r,n,i,s,f,c){super(e,r,"update",Object.assign({"Request ID":tt(n)},i.body?Object.assign(Object.assign({},c?{"Error code":c}:{}),{"Reject code":String(s),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=s,this.reject_message=f,this.error_code=c}}const wt=Symbol.for("ic-agent-metadata");class kt{constructor(e){this[wt]=Object.freeze(e)}static agentOf(e){return e[wt].config.agent}static interfaceOf(e){return e[wt].service}static canisterIdOf(e){return Ce.from(e[wt].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],s=[...new Uint8Array(e.module)],f=typeof r.canisterId=="string"?Ce.fromText(r.canisterId):r.canisterId;await ma(r).install_code({mode:n,arg:i,wasm_module:s,canister_id:f,sender_canister_version:[]})}static async createCanister(e,r){function n(s){return[{controllers:s.controllers?[s.controllers]:[],compute_allocation:s.compute_allocation?[s.compute_allocation]:[],freezing_threshold:s.freezing_threshold?[s.freezing_threshold]:[],memory_allocation:s.memory_allocation?[s.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await ma(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:bu});class i extends kt{constructor(f){if(!f.canisterId)throw new He(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const c=typeof f.canisterId=="string"?Ce.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},mc),f),{canisterId:c}),service:n});for(const[m,A]of n._fields)r!=null&&r.httpDetails&&A.annotations.push(as),r!=null&&r.certificate&&A.annotations.push(yc),this[m]=yf(this,m,A,f.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new He(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function Ir(t,e){const r=za(t,ga.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const mc={pollingStrategyFactory:fc},as="http-details",yc="certificate";function yf(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...c)=>{var m,A;f=Object.assign(Object.assign({},f),(A=(m=t[wt].config).queryTransform)===null||A===void 0?void 0:A.call(m,e,c,Object.assign(Object.assign({},t[wt].config),f)));const B=f.agent||t[wt].config.agent||da(),D=Ce.from(f.canisterId||t[wt].config.canisterId),g=Gi(r.argTypes,c),E=await B.query(D,{methodName:e,arg:g,effectiveCanisterId:f.effectiveCanisterId}),l=Object.assign(Object.assign({},E.httpDetails),{requestDetails:E.requestDetails});switch(E.status){case"rejected":throw new mf(D,e,E);case"replied":return r.annotations.includes(as)?{httpDetails:l,result:Ir(r.retTypes,E.reply.arg)}:Ir(r.retTypes,E.reply.arg)}}:i=async(f,...c)=>{var m,A;f=Object.assign(Object.assign({},f),(A=(m=t[wt].config).callTransform)===null||A===void 0?void 0:A.call(m,e,c,Object.assign(Object.assign({},t[wt].config),f)));const B=f.agent||t[wt].config.agent||da(),{canisterId:D,effectiveCanisterId:g,pollingStrategyFactory:E}=Object.assign(Object.assign(Object.assign({},mc),t[wt].config),f),l=Ce.from(D),a=g!==void 0?Ce.from(g):l,o=Gi(r.argTypes,c),{requestId:d,response:x,requestDetails:v}=await B.call(l,{methodName:e,arg:o,effectiveCanisterId:a});let k,N;if(x.body&&x.body.certificate){if(B.rootKey==null)throw new Error("Agent is missing root key");const K=x.body.certificate;N=await vr.create({certificate:ai(K),rootKey:B.rootKey,canisterId:Ce.from(D),blsVerify:n});const W=[new TextEncoder().encode("request_status"),d];switch(new TextDecoder().decode(Et(N.lookup([...W,"status"])))){case"replied":k=Et(N.lookup([...W,"reply"]));break;case"rejected":{const he=new Uint8Array(Et(N.lookup([...W,"reject_code"])))[0],R=new TextDecoder().decode(Et(N.lookup([...W,"reject_message"]))),z=Et(N.lookup([...W,"error_code"])),X=z?new TextDecoder().decode(z):void 0;throw new pa(l,e,d,x,he,R,X)}}}else if(x.body&&"reject_message"in x.body){const{reject_code:K,reject_message:W,error_code:ae}=x.body;throw new pa(l,e,d,x,K,W,ae)}if(x.status===202){const K=E(),W=await dc(B,a,d,K,n);N=W.certificate,k=W.reply}const M=r.annotations.includes(as),P=r.annotations.includes(yc),j=Object.assign(Object.assign({},x),{requestDetails:v});if(k!==void 0)return M&&P?{httpDetails:j,certificate:N,result:Ir(r.retTypes,k)}:P?{certificate:N,result:Ir(r.retTypes,k)}:M?{httpDetails:j,result:Ir(r.retTypes,k)}:Ir(r.retTypes,k);if(r.retTypes.length===0)return M?{httpDetails:x,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const s=(...f)=>i({},...f);return s.withOptions=f=>(...c)=>i(f,...c),s}function ma(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:Ce.from(t.effectiveCanisterId)};const i=n[0];let s=Ce.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(s=Ce.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(s=Ce.from(i.canister_id)),{effectiveCanisterId:s}}return kt.createActor(pf,Object.assign(Object.assign(Object.assign({},t),{canisterId:Ce.fromHex("")}),{callTransform:e,queryTransform:e}))}const wn=({IDL:t})=>{const e=t.Tuple(t.Float64,t.Float64,t.Float64),r=t.Variant({Avatar:t.Null,Entity:t.Null,MobileObject:t.Null,SceneObject:t.Null,InteractiveObject:t.Null}),n=t.Tuple(t.Float64,t.Float64,t.Float64),i=t.Tuple(t.Float64,t.Float64,t.Float64),s=t.Record({originalSize:e,khetType:r,gltfDataRef:t.Tuple(t.Principal,t.Text,t.Nat),code:t.Opt(t.Text),textures:t.Opt(t.Vec(t.Tuple(t.Text,t.Vec(t.Nat8)))),scale:n,animations:t.Opt(t.Vec(t.Text)),position:i,khetId:t.Text});return t.Service({abortKhetUpload:t.Func([t.Text],[],[]),clearAllKhets:t.Func([t.Principal],[],[]),getKhet:t.Func([t.Text],[t.Opt(s)],["query"]),getSceneObjectKhets:t.Func([],[t.Vec(s)],["query"]),storeKhet:t.Func([s,t.Principal,t.Text,t.Nat],[t.Opt(t.Text)],[]),storeKhetChunk:t.Func([t.Text,t.Nat,t.Vec(t.Nat8)],[],[])})},xf="bkyz2-fmaaa-aaaaa-qaaaq-cai",gf=(t,e={})=>{const r=e.agent||new Tt({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),kt.createActor(wn,{agent:r,canisterId:t,...e.actorOptions})};gf(xf);const vs=({IDL:t})=>t.Service({clearBlobs:t.Func([],[],[]),deleteBlob:t.Func([t.Text],[],[]),finalizeBlob:t.Func([t.Text,t.Nat,t.Nat],[t.Opt(t.Text)],[]),getBlobChunk:t.Func([t.Text,t.Nat],[t.Opt(t.Vec(t.Nat8))],["query"]),getBlobSize:t.Func([t.Text],[t.Opt(t.Nat)],["query"]),storeBlobChunk:t.Func([t.Text,t.Nat,t.Vec(t.Nat8)],[],[])}),wf="be2us-64aaa-aaaaa-qaabq-cai",Ef=(t,e={})=>{const r=e.agent||new Tt({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),kt.createActor(vs,{agent:r,canisterId:t,...e.actorOptions})};Ef(wf);function bf(t){switch(t){case"SceneObject":return{SceneObject:null};case"InteractiveObject":return{InteractiveObject:null};case"MobileObject":return{MobileObject:null};case"Entity":return{Entity:null};case"Avatar":return{Avatar:null};default:throw new Error(`Unknown khetType: ${t}`)}}function vf(t,e){try{const r=Mc.parseScript(t);if(r.body.length!==1||r.body[0].type!=="ExpressionStatement")return console.warn(`Khet code must be a single expression: ${t}`),()=>{};const n=r.body[0].expression;if(n.type!=="AssignmentExpression"||!["=","+=","-=","*=","/="].includes(n.operator))return console.warn(`Unsupported operation in Khet code: ${t}`),()=>{};const i=n.left;if(i.type!=="MemberExpression"||i.object.type!=="MemberExpression"||i.object.object.type!=="Identifier"||i.object.object.name!=="object")return console.warn(`Khet code must assign to object.property.axis: ${t}`),()=>{};const s=i.object.property.name,f=i.property.name;if(!["rotation","position","scale"].includes(s)||!["x","y","z"].includes(f))return console.warn(`Invalid property or axis in Khet code: ${t}`),()=>{};const m=n.right;if(m.type!=="Literal"||typeof m.value!="number")return console.warn(`Khet code right-hand side must be a number: ${t}`),()=>{};const A=m.value,B=n.operator;return()=>{switch(B){case"=":e[s][f]=A;break;case"+=":e[s][f]+=A;break;case"-=":e[s][f]-=A;break;case"*=":e[s][f]*=A;break;case"/=":e[s][f]/=A;break}}}catch(r){return console.error(`Error parsing Khet code: ${t}`,r),()=>{}}}async function Af(t,e,r={},n=null){const i=crypto.randomUUID(),s=bf(e),f=new FileReader,c=parseFloat(document.getElementById("pos-x").value)||0,m=parseFloat(document.getElementById("pos-y").value)||0,A=parseFloat(document.getElementById("pos-z").value)||0,B=parseFloat(document.getElementById("scale-x").value)||1,D=parseFloat(document.getElementById("scale-y").value)||1,g=parseFloat(document.getElementById("scale-z").value)||1;return new Promise(E=>{f.onload=()=>{const l=new Uint8Array(f.result);new THREE.GLTFLoader().parse(l.buffer,"",o=>{const d=o.scene,v=new THREE.Box3().setFromObject(d).getSize(new THREE.Vector3),k=o.animations.length>0?o.animations.map(M=>[M.name]):[],N=Object.entries(r).filter(([M,P])=>P instanceof File).map(([M,P])=>new Promise(j=>{const K=new FileReader;K.onload=()=>j([M,new Uint8Array(K.result)]),K.readAsArrayBuffer(P)}));Promise.all(N).then(M=>{E({khetId:i,khetType:s,gltfData:l,gltfDataSize:l.byteLength,position:[c,m,A],originalSize:[v.x,v.y,v.z],scale:[B,D,g],textures:M.length>0?M:[],animations:k,code:n?[n]:[]})})})},f.readAsArrayBuffer(t)})}async function Sf(t,e="be2us-64aaa-aaaaa-qaabq-cai"){const r=new Tt({host:"http://127.0.0.1:4943"});await r.fetchRootKey().catch(A=>console.warn("Unable to fetch root key:",A));const n=kt.createActor(wn,{agent:r,canisterId:"bkyz2-fmaaa-aaaaa-qaaaq-cai"}),i=kt.createActor(vs,{agent:r,canisterId:e}),s=1024*1024,f=t.gltfData,c=Math.ceil(f.byteLength/s),m=crypto.randomUUID();try{for(let D=0;D<c;D++){const g=D*s,E=Math.min(g+s,f.byteLength),l=f.subarray(g,E),a=new Blob([l]);console.log(`Uploading chunk ${D} of ${c-1} for blobId: ${m}, size: ${l.length} bytes`),await i.storeBlobChunk(m,D,new Uint8Array(await a.arrayBuffer()))}const A={khetId:t.khetId,khetType:t.khetType,gltfDataRef:[Ce.fromText(e),m,t.gltfDataSize],position:t.position,originalSize:t.originalSize,scale:t.scale,textures:t.textures,animations:t.animations,code:t.code};console.log(`Storing Khet with khetId: ${t.khetId}, blobId: ${m}`);const B=await n.storeKhet(A,Ce.fromText(e),m,c);if(B&&B.length>0)throw new Error(`Store failed: ${B[0]}`);console.log(`Khet ${t.khetId} uploaded successfully`)}catch(A){throw console.error("Error uploading Khet:",A),await i.deleteBlob(m),A}}async function xc(t,{scene:e,sceneObjects:r,world:n,groundMaterial:i,animationMixers:s,khetState:f,cameraController:c}){const m=new Tt({host:"http://127.0.0.1:4943"});await m.fetchRootKey().catch(D=>console.warn("Unable to fetch root key:",D));const A=kt.createActor(wn,{agent:m,canisterId:"bkyz2-fmaaa-aaaaa-qaaaq-cai"});let B={avatarMesh:null,avatarBody:null};try{const D=await A.getKhet(t);if(D&&D.length>0){const g=D[0],[E,l,a]=g.gltfDataRef,o=kt.createActor(vs,{agent:m,canisterId:E}),d=1024*1024,x=Math.ceil(Number(a)/d);console.log(`Loading Khet ${t} with ${x} chunks, total size: ${a} bytes`);let v=[];for(let P=0;P<x;P++){const j=await o.getBlobChunk(l,P);if(j&&j.length>0)v.push(j[0]);else throw new Error(`Failed to fetch chunk ${P} for blobId: ${l}`)}const k=new Uint8Array(Number(a));let N=0;for(const P of v)k.set(new Uint8Array(P),N),N+=P.length;const M=new THREE.GLTFLoader;await new Promise(P=>{M.parse(k.buffer,"",j=>{const K=j.scene;e.add(K),r.push(K);const W=new THREE.Box3().setFromObject(K),ae=W.getSize(new THREE.Vector3),he=W.getCenter(new THREE.Vector3),R=W.min.y;K.position.set(g.position[0]-he.x,g.position[1]-R,g.position[2]-he.z),console.log(R),K.scale.set(g.scale[0],g.scale[1],g.scale[2]);let z,X;const Y="Avatar"in g.khetType,L="SceneObject"in g.khetType,re=!0;let se;if(Y){const me=ae.y/2;if(z=new CANNON.Sphere(me),X=new CANNON.Body({mass:1,material:new CANNON.Material("avatar")}),X.addShape(z),X.position.set(g.position[0],g.position[1]+me,g.position[2]),K.position.y=X.position.y-me,X.fixedRotation=!0,re){const oe=new THREE.SphereGeometry(me,16,16),le=new THREE.MeshBasicMaterial({color:16711680,wireframe:!0});se=new THREE.Mesh(oe,le),se.position.copy(X.position),e.add(se)}}else if(L){const me=[],oe=[];if(K.traverse(le=>{if(le.isMesh&&le.geometry){const ne=le.geometry.isBufferGeometry?le.geometry:new THREE.BufferGeometry().fromGeometry(le.geometry),_=ne.attributes.position,ce=ne.index,pe=le.matrixWorld;for(let ye=0;ye<_.count;ye++){const ie=new THREE.Vector3().fromBufferAttribute(_,ye).applyMatrix4(pe);me.push(ie.x,ie.y,ie.z)}if(ce)for(let ye=0;ye<ce.count;ye+=3)oe.push(ce.getX(ye),ce.getX(ye+1),ce.getX(ye+2))}}),z=new CANNON.Trimesh(me,oe),X=new CANNON.Body({mass:0}),X.addShape(z),X.position.set(g.position[0],g.position[1],g.position[2]),re){const le=new THREE.BufferGeometry;le.setAttribute("position",new THREE.Float32BufferAttribute(me,3)),le.setIndex(oe);const ne=new THREE.MeshBasicMaterial({color:65280,wireframe:!0});se=new THREE.Mesh(le,ne),se.position.copy(X.position),e.add(se)}}else{const me=new CANNON.Vec3(ae.x/2,ae.y/2,ae.z/2);if(z=new CANNON.Box(me),X=new CANNON.Body({mass:"MobileObject"in g.khetType?1:0,material:new CANNON.Material("khet")}),X.addShape(z),X.position.set(g.position[0],g.position[1]+me.y,g.position[2]),re){const oe=new THREE.BoxGeometry(ae.x,ae.y,ae.z),le=new THREE.MeshBasicMaterial({color:255,wireframe:!0});se=new THREE.Mesh(oe,le),se.position.copy(X.position),e.add(se)}}if(X.linearDamping=.9,X.angularDamping=.9,n.addBody(X),K.position.copy(X.position),K.userData={body:X,debugMesh:se},console.log(`Khet ${t} initial position:`,K.position,"Body position:",X.position),Y){const me=new CANNON.ContactMaterial(i,X.material,{friction:.3,restitution:0});n.addContactMaterial(me),X.isGrounded=!1}if(g.animations&&g.animations.length>0){console.log(`Khet ${t} animations:`,g.animations);const me=new THREE.AnimationMixer(K);g.animations.forEach(([oe])=>{const le=THREE.AnimationClip.findByName(j.animations,oe);le&&me.clipAction(le).play()}),s.push(me)}if(g.textures&&g.textures.length>0&&g.textures.forEach(([me,oe])=>{const ne=new THREE.TextureLoader().load(URL.createObjectURL(new Blob([oe])));K.traverse(_=>{_.isMesh&&_.material&&(_.material.map=ne)})}),g.code&&g.code.length>0){const me=vf(g.code[0],K);f.executors.push(me)}Y&&(console.log(`Setting avatar for Khet ${t}`),B.avatarMesh=K,B.avatarBody=X,B.avatarBody.lastSurfaceHeight=0,B.avatarBody.sizeY=ae.y||1,B.avatarMesh.sizeY=ae.y||1,c.setTarget(B.avatarMesh)),P()})})}else console.log(`No Khet found with ID: ${t}`)}catch(D){console.error("Error loading Khet:",D)}return B}async function Bf({scene:t,sceneObjects:e,world:r,groundMaterial:n,animationMixers:i,khetState:s,cameraController:f}){const c=new Tt({host:"http://127.0.0.1:4943"});await c.fetchRootKey().catch(A=>console.warn("Unable to fetch root key:",A));const m=kt.createActor(wn,{agent:c,canisterId:"bkyz2-fmaaa-aaaaa-qaaaq-cai"});try{const A=await m.getSceneObjectKhets();console.log(`Found ${A.length} SceneObject Khets`);for(const B of A)await xc(B.khetId,{scene:t,sceneObjects:e,world:r,groundMaterial:n,animationMixers:i,khetState:s,cameraController:f});return A.length>0}catch(A){return console.error("Error loading SceneObjects:",A),!1}}async function _f(t="be2us-64aaa-aaaaa-qaabq-cai"){const e=new Tt({host:"http://127.0.0.1:4943"});await e.fetchRootKey().catch(n=>console.warn("Unable to fetch root key:",n));const r=kt.createActor(wn,{agent:e,canisterId:"bkyz2-fmaaa-aaaaa-qaaaq-cai"});try{await r.clearAllKhets(Ce.fromText(t)),console.log("All Khets cleared successfully")}catch(n){console.error("Error clearing Khets:",n)}}document.addEventListener("pointerlockchange",()=>{const t=document.getElementById("menu");if(!document.pointerLockElement){t.style.display="flex",mt.locked=!1,Ft.clear();const e=document.getElementById("close-btn");e.disabled=!0,setTimeout(()=>{e.disabled=!1},1250)}});const Ft=new Set;document.addEventListener("keydown",t=>{const e=t.key.toLowerCase();if(Ft.add(e),e==="escape"){const r=document.getElementById("menu");r.style.display==="flex"||(r.style.display="flex",mt.unlock(),mt.locked=!1,Ft.clear())}});document.addEventListener("keyup",t=>{Ft.delete(t.key.toLowerCase())});document.addEventListener("DOMContentLoaded",()=>{document.getElementById("start-btn").addEventListener("click",()=>{document.getElementById("start-overlay").style.display="none",mt.lock(),mt.locked=!0}),document.getElementById("clear-khets-btn").addEventListener("click",async()=>{await _f(),console.log("Khets cleared from menu")});const r=document.getElementById("main-page");document.getElementById("home-btn").addEventListener("click",()=>{const v=document.getElementById("menu"),k=document.getElementById("start-overlay");v.style.display="none",k.style.display="flex",mt.unlock(),mt.locked=!1,Ft.clear()});const i=document.getElementById("avatar-page");document.getElementById("avatar-btn").addEventListener("click",()=>x(i)),document.getElementById("back-avatar-btn").addEventListener("click",()=>x(r));const c=document.getElementById("settings-page");document.getElementById("settings-btn").addEventListener("click",()=>x(c)),document.getElementById("back-settings-btn").addEventListener("click",()=>x(r)),document.getElementById("close-btn").addEventListener("click",()=>{const v=document.getElementById("menu");v.style.display="none",wc.focus(),mt.lock(),mt.locked=!0});const D=document.getElementById("chat"),g=document.getElementById("friends-list"),E=document.getElementById("map"),l=document.getElementById("toggle-chat"),a=document.getElementById("toggle-friends"),o=document.getElementById("toggle-map");l.addEventListener("change",()=>{D.style.display=l.checked?"block":"none"}),a.addEventListener("change",()=>{g.style.display=a.checked?"block":"none"}),o.addEventListener("change",()=>{E.style.display=o.checked?"block":"none"}),i.querySelectorAll("button[data-avatar]").forEach(v=>{v.addEventListener("click",()=>{const k=v.getAttribute("data-avatar");console.log(`Selected Avatar ${k}`)})});function x(v){r.classList.remove("active"),c.classList.remove("active"),i.classList.remove("active"),v.classList.add("active")}});const Df=[];function gc(){requestAnimationFrame(gc);const e=new THREE.Clock().getDelta();if(lr.step(1/60,e,3),Ss.executors.forEach(r=>r()),gr&&$e&&mt.locked){console.log("Avatar movement active"),console.log(`Avatar position: ${gr.position.toArray()}, Camera position: ${Wt.position.toArray()}`);const r=new THREE.Vector3;Wt.getWorldDirection(r),r.y=0,r.normalize();const n=4,i=Ft.has("shift")?n*2:n,s=r.clone().multiplyScalar(i),f=new THREE.Vector3().crossVectors(r,new THREE.Vector3(0,1,0)).normalize().multiplyScalar(i),c=new CANNON.Vec3(0,$e.velocity.y,0);Ft.has("w")&&c.vadd(new CANNON.Vec3(s.x,0,s.z),c),Ft.has("s")&&c.vadd(new CANNON.Vec3(-s.x,0,-s.z),c),Ft.has("a")&&c.vadd(new CANNON.Vec3(-f.x,0,-f.z),c),Ft.has("d")&&c.vadd(new CANNON.Vec3(f.x,0,f.z),c),$e.velocity.set(c.x,$e.velocity.y,c.z),$e.isGrounded=!1,lr.contacts.forEach(A=>{Xr.forEach(B=>{B.userData&&B.userData.body&&(A.bi===$e&&A.bj===B.userData.body||A.bi===B.userData.body&&A.bj===$e)&&($e.isGrounded=!0)})}),Ft.has(" ")&&$e.canJump&&$e.isGrounded&&($e.velocity.y=5,$e.canJump=!1),$e.isGrounded&&!$e.wasGrounded&&($e.lastLandingTime=performance.now(),$e.canJump=!0),$e.wasGrounded=$e.isGrounded,$e.lastLandingTime&&(performance.now()-$e.lastLandingTime)/1e3>=.5&&!$e.isGrounded&&($e.canJump=!1),$e.quaternion.set(0,0,0,1),gr.position.copy($e.position),gr.position.y-=gr.sizeY/2;const m=new THREE.Quaternion().setFromUnitVectors(new THREE.Vector3(0,0,1),r);gr.quaternion.slerp(m,.1),Bs.update()}Xr.forEach(r=>{r.userData&&r.userData.body&&(r.position.copy(r.userData.body.position),r.quaternion.copy(r.userData.body.quaternion))}),Df.forEach(r=>r.update(e)),En.render(Fr,Wt)}const wc=document.getElementById("canvas"),En=new THREE.WebGLRenderer({canvas:wc});En.setSize(window.innerWidth,window.innerHeight);En.outputEncoding=THREE.sRGBEncoding;const Fr=new THREE.Scene;Fr.background=new THREE.Color(8900331);const Wt=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);Wt.position.set(0,1,2);const mt=new THREE.PointerLockControls(Wt,En.domElement);mt.locked=!1;const Ff=85*Math.PI/180,Cf=-85*Math.PI/180;let On=0,ya=0;mt.domElement.ownerDocument.onmousemove=function(t){if(!mt.isLocked)return;const e=t.movementX||t.mozMovementX||t.webkitMovementX||0,r=t.movementY||t.mozMovementY||t.webkitMovementY||0;ya-=e*.002,On-=r*.002,On=Math.max(Cf,Math.min(Ff,On));const n=new THREE.Euler(On,ya,0,"YXZ");Wt.quaternion.setFromEuler(n)};const lr=new CANNON.World;lr.gravity.set(0,-9.82,0);lr.broadphase=new CANNON.NaiveBroadphase;lr.solver.iterations=10;const As=new CANNON.Material("ground"),Xr=[];let gr,$e;const Ec=[],Ss={executors:[]};class Tf{constructor(e,r){this.camera=e,this.target=r,this.maxDistance=2.5,this.minDistance=.1,this.zoomSpeed=.1,this.scrollFactor=1,this.raycaster=new THREE.Raycaster,document.addEventListener("wheel",this.handleScroll.bind(this))}handleScroll(e){if(!this.target||!mt.locked)return;const r=e.deltaY>0?-this.zoomSpeed:this.zoomSpeed;this.scrollFactor=(this.scrollFactor||1)+r,this.scrollFactor=Math.max(.5,Math.min(1.5,this.scrollFactor)),console.log(`Scroll factor: ${this.scrollFactor}`)}update(){if(!this.target)return;const r=new THREE.Box3().setFromObject(this.target).getCenter(new THREE.Vector3),n=new THREE.Vector3;this.camera.getWorldDirection(n),n.y=0,n.normalize();const i=new THREE.Vector3;this.camera.getWorldDirection(i),i.normalize();const s=Math.asin(Math.max(-1,Math.min(1,i.y))),f=Math.abs(s)/(Math.PI/2),c=new THREE.Vector3(0,0,2.5),m=new THREE.Vector3(0,2,0),A=new THREE.Vector3(0,-1,.5);let B=s<0?c.clone().lerp(m,f):c.clone().lerp(A,f);const D=n.clone().multiplyScalar(-B.z),g=new THREE.Vector3(D.x,B.y,D.z),E=r.clone().add(g),l=E.clone().sub(r).normalize();this.raycaster.set(r,l);const a=Xr.filter(j=>j!==this.target),o=this.raycaster.intersectObjects(a,!0);let d=E;const x=E.distanceTo(r);if(o.length>0&&o[0].distance<g.length()){const j=Math.max(o[0].distance*.9,this.minDistance);d=r.clone().add(l.multiplyScalar(j))}else x<this.minDistance&&(d=r.clone().add(l.multiplyScalar(this.minDistance)));const v=d.clone().sub(r),k=v.length(),N=this.scrollFactor||1,M=k*N,P=r.clone().add(v.normalize().multiplyScalar(M));this.camera.position.copy(P)}setTarget(e){if(this.target=e,e){const n=new THREE.Box3().setFromObject(e).getCenter(new THREE.Vector3);this.targetCenter=n;const s=new THREE.Vector3(0,0,-1).multiplyScalar(this.maxDistance);this.camera.position.copy(n.clone().add(s)),this.camera.lookAt(n),console.log(`Camera initial set to: ${this.camera.position.toArray()}, looking at ${n.toArray()}`)}}}const Bs=new Tf(Wt,null),Nf=new THREE.AmbientLight(16777215,1);Fr.add(Nf);const bc=new THREE.DirectionalLight(16777215,1);bc.position.set(1,1,1);Fr.add(bc);window.addEventListener("resize",()=>{Wt.aspect=window.innerWidth/window.innerHeight,Wt.updateProjectionMatrix(),En.setSize(window.innerWidth,window.innerHeight)});document.getElementById("upload-khet").addEventListener("change",async t=>{const e=t.target.files[0];if(e){const r=document.getElementById("khet-type").value,n=t.target.files[1]?{texture1:t.target.files[1]}:{};try{const i=await Af(e,r,n,"object.rotation.y += 0.01;");await Sf(i,"be2us-64aaa-aaaaa-qaabq-cai");const{avatarMesh:s,avatarBody:f}=await xc(i.khetId,{scene:Fr,sceneObjects:Xr,world:lr,groundMaterial:As,animationMixers:Ec,khetState:Ss,cameraController:Bs});s&&f&&(gr=s,$e=f)}catch(i){console.error("Upload process failed:",i)}}});async function kf(){const t=new CANNON.Plane,e=new CANNON.Body({mass:0,material:As});e.addShape(t),e.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2),lr.addBody(e);const r=new THREE.PlaneGeometry(100,100),n=new THREE.MeshLambertMaterial({color:8947848}),i=new THREE.Mesh(r,n);i.rotation.x=-Math.PI/2,i.userData={body:e},Fr.add(i),Xr.push(i),console.log("Loaded fallback ground plane")}(async()=>(await Bf({scene:Fr,sceneObjects:Xr,world:lr,groundMaterial:As,animationMixers:Ec,khetState:Ss,cameraController:Bs})||await kf(),gc()))();
